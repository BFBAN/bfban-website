(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-546b58f4"],{1126:function(t,e,a){"use strict";a("3492")},1684:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"content"},[a("br"),a("Row",[a("Col",{attrs:{xs:{push:1},lg:{push:0}}},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:{name:"home"}}},[t._v(t._s(t.$t("header.index")))]),a("BreadcrumbItem",[t._v(t._s(t.$t("sitestats.title")))])],1)],1)],1),a("br"),a("Col",[a("Card",{attrs:{padding:0,"dis-hover":""}},[a("Row",{staticClass:"sitestats-chart-top",attrs:{gutter:10}},[a("Col",[a("Button",{on:{click:t.loadData}},[a("Icon",{class:[t.load?"spin-icon-load":""],attrs:{type:"md-refresh"}})],1)],1),a("Col",[a("Select",{on:{"on-change":t.changeChartTime},model:{value:t.chartConfig.timeFrame,callback:function(e){t.$set(t.chartConfig,"timeFrame",e)},expression:"chartConfig.timeFrame"}},[a("Option",{attrs:{value:"all"}},[t._v("All")]),a("Option",{attrs:{value:"yearly"}},[t._v(t._s(t.$t("sitestats.timeRange.yearly")))]),a("Option",{attrs:{value:"monthly"}},[t._v(t._s(t.$t("sitestats.timeRange.monthly")))])],1)],1)],1),a("v-chart",{ref:"chart",staticClass:"chart",attrs:{option:t.chart.stats}})],1),t.load?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),a("br"),a("Card",{attrs:{"dis-hover":""}},[a("Row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[t._v(" "+t._s(t.statistics.reports||0)+" ")]),a("span",[t._v(t._s(t.$t("sitestats.reports")))])]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[a("Badge",{attrs:{color:t.chart.stats.color[0]}}),t._v(" "+t._s(t.statistics.players||0)+" ")],1),t._v(" "+t._s(t.$t("sitestats.players"))+" ")]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[t._v(t._s(t.statistics.banAppeals||0))]),t._v(" "+t._s(t.$t("sitestats.banAppeals"))+" ")]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[a("Badge",{attrs:{color:t.chart.stats.color[2]}}),t._v(" "+t._s(t.statistics.registers||0)+" ")],1),a("span",[t._v(t._s(t.$t("sitestats.registers")))])]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[a("Badge",{attrs:{color:t.chart.stats.color[1]}}),t._v(" "+t._s(t.statistics.confirmed||0)+" ")],1),a("span",[t._v(t._s(t.$t("sitestats.confirmed")))])]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[t._v(t._s(t.statistics.admins||0))]),t._v(" "+t._s(t.$t("sitestats.admins"))+" ")])],1)],1),a("br"),t.isLogin?a("div",{staticStyle:{position:"relative"}},[a("div",[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{xs:{span:24,push:1},lg:{span:20,push:0}}},[a("RadioGroup",{directives:[{name:"voice-button",rawName:"v-voice-button"}],attrs:{size:"small",type:"button"},on:{"on-change":t.onChangePeriod},model:{value:t.timeRange,callback:function(e){t.timeRange=e},expression:"timeRange"}},t._l(t.timeArray,(function(e,s){return a("Radio",{key:s,attrs:{disabled:!t.isLogin&&!t.show,label:e.value,value:e.value}},[t._v(t._s(t.$t(e.name))+" ")])})),1)],1),a("Col",{staticClass:"mobile-hide",attrs:{xs:{span:24,push:0},lg:{span:4,push:0},align:"right"}},[a("Checkbox",{on:{"on-change":t.onChangePeriod},model:{value:t.isIncludingRobots,callback:function(e){t.isIncludingRobots=e},expression:"isIncludingRobots"}}),a("PrivilegesTag",{attrs:{data:["bot"]}})],1)],1)],1),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{xs:{span:24},lg:{span:12}}},[a("Card",{attrs:{"dis-hover":""}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("sitestats.communityParticipation"))+" · "+t._s(t.$t(t.timeArray.find((function(e){return e.value==t.timeRange})).name))+" ")]),a("Row",{attrs:{gutter:5}},[a("Col",{attrs:{span:"14"}},[t.active.community.length>0?a("ol",{staticClass:"sitestats-ul"},t._l(t.active.community,(function(e,s){return a("li",{key:s},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("businessCard",{attrs:{id:e.id}},[a("HtmlLink",{attrs:{text:e.username,"is-poptip":!1,href:"/space/"+e.id+"?username="+e.username}})],1)],1),a("Col",{attrs:{flex:"1"}},[a("Divider",{staticStyle:{margin:"0"},attrs:{dashed:""}})],1),a("Col",[t._v(t._s(Number.isInteger(e.total)?e.total:e.total.toFixed(1)||0))])],1)],1)})),0):a("Empty",{attrs:{notHint:!1}})],1),a("Col",{attrs:{span:"10"}},[a("v-chart",{staticClass:"chart chart-min",attrs:{option:t.active.communityConf}})],1)],1),a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.active.load,expression:"active.load"}],attrs:{size:"large",fix:""}},[a("Loading")],1)],1)],1),a("Col",{attrs:{xs:{span:24},lg:{span:12}}},[a("Card",{attrs:{"dis-hover":""}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("sitestats.reportRanking"))+" · "+t._s(t.$t(t.timeArray.find((function(e){return e.value==t.timeRange})).name))+" ")]),t.active.report.length>0?a("ol",{staticClass:"sitestats-ul"},t._l(t.active.report,(function(e,s){return a("li",{key:s},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("businessCard",{attrs:{id:e.id}},[a("HtmlLink",{attrs:{text:e.username,"is-poptip":!1,href:"/space/"+e.id+"?username="+e.username}})],1)],1),a("Col",{attrs:{flex:"1"}},[a("Divider",{staticStyle:{margin:"0"},attrs:{dashed:""}})],1),a("Col",[t._v(t._s(e.total.toFixed(0)||0))])],1)],1)})),0):a("Empty",{attrs:{notHint:!1}}),a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.active.load,expression:"active.load"}],attrs:{size:"large",fix:""}},[a("Loading")],1)],1)],1)],1),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{xs:{span:24},lg:{span:12}}},[a("Card",{attrs:{"dis-hover":""}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("sitestats.trend"))+" · "+t._s(t.$t(t.timeArray.find((function(e){return e.value==t.timeRange})).name))+" ")]),a("TrendWidget",{ref:"trend",attrs:{disabled:!t.isLogin,timeRange:t.timeRange}})],1)],1),a("Col",{attrs:{xs:{span:24},lg:{span:12}}},[a("Card",{attrs:{"dis-hover":""}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("sitestats.achievement")))]),t.active.achievement.length>0?a("ol",{staticClass:"sitestats-ul"},t._l(t.active.achievement,(function(e,s){return a("li",{key:s},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("ExposedName",[a("HtmlLink",{attrs:{text:e.username,"is-poptip":!1,href:"/space/"+e.id+"?username="+e.username}})],1)],1),a("Col",{attrs:{flex:"1"}},[a("Divider",{staticStyle:{margin:"0"},attrs:{dashed:""}})],1),a("Col",[a("AchievementsTag",{attrs:{maxOverflow:10,data:e.userAchievements,size:"15"}})],1),a("Col",[a("Tag",{attrs:{color:"primary"}},[a("Icon",{attrs:{type:"md-color-wand"}}),t._v(" "+t._s(e.points||0)+" ")],1)],1)],1)],1)})),0):a("Empty",{attrs:{notHint:!1}}),a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.active.load,expression:"active.load"}],attrs:{size:"large",fix:""}},[a("Loading")],1)],1)],1)],1)],1):t._e(),a("Card",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}],attrs:{"dis-hover":""}},[a("Spin",{attrs:{size:"large"}},[a("div",[a("Icon",{attrs:{type:"md-lock",size:"100"}})],1),a("br"),a("Button",{attrs:{to:{name:"signin"}}},[t._v(t._s(t.$t("header.signin")))])],1)],1)],1)])},i=[],r=a("e4b4"),n=a("02bc"),o=a("aa6e"),l=a("d78a"),c=a("fb1c"),d=a("120c"),m=a("c964"),h=a("5515"),u=a("3a5e"),p=(a("313e"),new r["d"]({data(){return{time:r["p"],load:!1,statistics:{},show:!1,isIncludingRobots:!0,chart:{stats:{color:["#fff13c","#401486","#ed4014"],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#f2f2f2",color:"#535353"}}},xAxis:{type:"time",boundaryGap:!0,splitLine:{show:!0},min:t=>{switch(this.chartConfig.timeFrame){case"yearly":return new Date((new Date).getTime()-31104e6);case"monthly":return new Date((new Date).getTime()-864e5);case"all":default:return r["p"].appStart()}}},yAxis:{type:"value",boundaryGap:[0,"30%"],show:!1},series:[],grid:{x:-1,y:-1,x2:-1,y2:30},useUTC:!0}},chartConfig:{timeFrame:"yearly",array:[{name:"players",valName:"playerStats",lineColor:"#fff13c"},{name:"confirmed",valName:"confirmStats",lineColor:"#401486"},{name:"registers",valName:"userStats",lineColor:"#ed4014"}]},timeArray:[{name:"sitestats.timeRange.daily",value:"daily",show:!1},{name:"sitestats.timeRange.weekly",value:"weekly",show:!1},{name:"sitestats.timeRange.monthly",value:"monthly",show:!1,privileges:["admin","spuer","root","dev"]},{name:"sitestats.timeRange.yearly",value:"yearly",show:!1,privileges:["admin","spuer","root","dev"]}],timeRange:"weekly",active:{load:!1,communityConf:{tooltip:{trigger:"item"},series:[{type:"pie",itemStyle:{borderRadius:5,borderWidth:3},radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:[]}]},community:Array.from({length:10},(t,e)=>({total:0,username:"🦈 "+e,id:-1}))||[],report:Array.from({length:10},(t,e)=>({total:0,username:"🦖 "+e,id:-2}))||[],achievement:Array.from({length:10},(t,e)=>({total:0,username:"🐧 "+e,id:-3}))||[]}}},created(){this.loadData()},components:{businessCard:o["a"],Loading:u["a"],Empty:n["a"],PrivilegesTag:l["a"],AchievementsTag:c["a"],HtmlLink:d["a"],TrendWidget:m["a"],ExposedName:h["a"]},methods:{async loadData(){this.init(),this.load=!0,await this.getSiteStats(),await this.getStatisticsInfo(),await this.onChangePeriod(),setTimeout(()=>{this.load=!1},1e3)},init(){this.chart.stats.series=[],this.chartConfig.array.map(t=>{this.chart.stats.series.push({name:this.$i18n.t("sitestats."+t.name),valName:t.valName,type:"line",smooth:!0,symbol:"none",stack:"Total",stackStrategy:"positive",showSymbol:!0,label:{show:!0,position:"top"},lineStyle:{color:t.lineColor,width:2},markLine:{symbol:["none","none"],label:{show:!0},data:[{xAxis:1},{xAxis:3},{xAxis:5},{xAxis:7}]},areaStyle:{opacity:.5,color:t.lineColor},data:[]})}),this.timeArray.map(t=>{t.show=r["a"].checkPrivilegeGroup(this.currentUser.userinfo,t.privileges)})},async onChangePeriod(){await this.getActiveStatistical(),await this.$refs.trend.getTrend()},getActiveStatistical(){if(!this.isLogin&&!r["a"].checkPrivilegeGroup(this.currentUser.userinfo,this.timeRange.privileges)){let t=[{username:"Tom",total:10},{username:"Rudi",total:5},{username:"まどか",total:3},{username:"David",total:5.1},{username:"张小明",total:2.4},{username:"Auston",total:1},{username:"Marcia",total:1}];return this.active.report=t,this.active.community=t,void this.active.community.forEach(t=>{this.active.communityConf.series[0].data.push({value:t.total.toFixed(2),name:t.username})})}this.active.load=!0;let t=this.timeArray.filter(t=>t.value==this.timeRange)[0].value;r["e"].get(r["c"]["activeStatistical"],{params:{isBot:this.isIncludingRobots,time:t,report:!0,community:!0}}).then(t=>{const e=t.data;1===e.success&&(this.active=Object.assign(this.active,e.data),this.active.communityConf.series[0].data=[],e.data.community.forEach(t=>{this.active.communityConf.series[0].data.push({value:t.total.toFixed(2),name:t.username})}))}).finally(()=>{this.active.load=!1})},changeChartTime(){this.$refs.chart.setOption(this.chart.stats)},async getSiteStats(){r["e"].get(r["c"]["siteStats"],{}).then(t=>{const e=t.data;if(1===e.success)for(const a in e.data)this.chart.stats.series.forEach(t=>{t.valName===a&&e.data[a].forEach(e=>{t.data.push([e.time,e.num])})})}).catch(t=>{this.$Message.error(t.message)})},getStatisticsInfo(){r["e"].get(r["c"]["statistics"],{params:{reports:!0,players:!0,confirmed:!0,registers:!0,banAppeals:!0,admins:!0,from:15147648e5}}).then(t=>{const e=t.data;1===e.success&&(this.statistics=e.data)})}}})),v=p,g=(a("1126"),a("2877")),y=Object(g["a"])(v,s,i,!1,null,"8408fc6e",null);e["default"]=y.exports},"262d":function(t,e,a){"use strict";a("8ff0")},3492:function(t,e,a){},"8ff0":function(t,e,a){},c964:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trend"},[t.trend.list.length>0?a("ol",{staticClass:"sitestats-ul"},t._l(t.trend.list,(function(e,s){return a("li",{key:s},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("ExposedName",[a("HtmlLink",{attrs:{text:e.originName,"is-poptip":!1,href:"/player/"+e.originPersonaId}})],1)],1),a("Col",{attrs:{flex:"1"}},[a("Divider",{staticStyle:{margin:"0"},attrs:{dashed:""}})],1),a("Col",[a("Icon",{attrs:{type:"md-chatbubbles"}}),t._v(" "+t._s(e.commentsNum.toFixed(0)||0)+" "),a("Divider",{attrs:{type:"vertical"}}),a("Icon",{attrs:{type:"md-eye"}}),t._v(" "+t._s(e.viewNum.toFixed(0)||0)+" ")],1),a("Col",[a("Tag",{attrs:{color:"error"}},[a("Icon",{attrs:{type:"ios-flame"}}),t._v(" "+t._s(e.hot.toFixed(0)||0)+" ")],1)],1)],1)],1)})),0):a("Empty",{attrs:{notHint:!1}}),a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.trend.load,expression:"trend.load"}],attrs:{size:"large",fix:""}},[a("Loading",{attrs:{size:50}})],1)],1)},i=[],r=a("e4b4"),n=a("02bc"),o=a("120c"),l=a("3a5e"),c=a("5515"),d=new r["d"]({props:{timeRange:{type:String,default:"weekly"},disabled:{type:Boolean,default:!1}},components:{Loading:l["a"],Empty:n["a"],HtmlLink:o["a"],ExposedName:c["a"]},data(){return{trend:{load:!1,list:Array.from({length:10},(t,e)=>({hot:0,commentsNum:0,viewNum:0,originName:"🦖 "+(e+1),originPersonaId:-1}))||[]}}},created(){this.getTrend()},watch:{$route:"getTrend",disabled:"getTrend"},methods:{getTrend(){this.disabled||(this.trend.load=!0,r["e"].get(r["c"]["trend"],{params:{limit:10,time:this.timeRange}}).then(t=>{const e=t.data;1===e.success&&(this.trend.list=e.data)}).catch(t=>{this.$Message.error(t.message)}).finally(()=>{this.trend.load=!1}))}}}),m=d,h=(a("262d"),a("2877")),u=Object(h["a"])(m,s,i,!1,null,"2e30c303",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-546b58f4.2.9.18.js.map