(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47833711"],{"00ee":function(t,e,r){var a=r("b622"),n=a("toStringTag"),i={};i[n]="z",t.exports="[object z]"===String(i)},"0366":function(t,e,r){var a=r("1c0b");t.exports=function(t,e,r){if(a(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,a){return t.call(e,r,a)};case 3:return function(r,a,n){return t.call(e,r,a,n)}}return function(){return t.apply(e,arguments)}}},"11c1":function(t,e,r){var a=r("c437"),n=r("c64e"),i=n;i.v1=a,i.v4=n,t.exports=i},"182d":function(t,e,r){var a=r("f8cd");t.exports=function(t,e){var r=a(t);if(r%e)throw RangeError("Wrong offset");return r}},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},2366:function(t,e){for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);function n(t,e){var a=e||0,n=r;return[n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]]].join("")}t.exports=n},"3bbe":function(t,e,r){var a=r("861d");t.exports=function(t){if(!a(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3c5d":function(t,e,r){"use strict";var a=r("ebb5"),n=r("50c4"),i=r("182d"),o=r("7b0b"),s=r("d039"),u=a.aTypedArray,c=a.exportTypedArrayMethod,p=s((function(){new Int8Array(1).set({})}));c("set",(function(t){u(this);var e=i(arguments.length>1?arguments[1]:void 0,1),r=this.length,a=o(t),s=n(a.length),c=0;if(s+e>r)throw RangeError("Wrong length");while(c<s)this[e+c]=a[c++]}),p)},"629a":function(t,e,r){},"77d9":function(t,e,r){"use strict";var a=r("ebb5"),n=r("a258").findLastIndex,i=a.aTypedArray,o=a.exportTypedArrayMethod;o("findLastIndex",(function(t){return n(i(this),t,arguments.length>1?arguments[1]:void 0)}))},"92a2":function(t,e,r){"use strict";r("629a")},a258:function(t,e,r){var a=r("0366"),n=r("44ad"),i=r("7b0b"),o=r("50c4"),s=function(t){var e=1==t;return function(r,s,u){var c,p,d=i(r),l=n(d),f=a(s,u,3),y=o(l.length);while(y-- >0)if(c=l[y],p=f(c,y,d),p)switch(t){case 0:return c;case 1:return y}return e?-1:void 0}};t.exports={findLast:s(0),findLastIndex:s(1)}},a981:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},acef:function(t,e,r){"use strict";var a=r("ebb5"),n=r("50c4"),i=r("a691"),o=a.aTypedArray,s=a.exportTypedArrayMethod;s("at",(function(t){var e=o(this),r=n(e.length),a=i(t),s=a>=0?a:r+a;return s<0||s>=r?void 0:e[s]}))},b2d4:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._t("default"),r("Modal",{attrs:{width:"60%"},model:{value:t.updataPlane,callback:function(e){t.updataPlane=e},expression:"updataPlane"}},[r("br"),-5!=t.currentIndex?r("Steps",{attrs:{current:t.currentIndex}},["url"==t.currentType?[r("Step",{attrs:{title:t.$t("textarea.steps.url.0")}}),r("Step",{attrs:{title:t.$t("textarea.steps.url.1")}})]:"upload"==t.currentType?[r("Step",{attrs:{title:t.$t("textarea.steps.upload.0")}}),r("Step",{attrs:{title:t.$t("textarea.steps.upload.1")}}),r("Step",{attrs:{title:t.$t("textarea.steps.upload.2")}})]:"media"==t.currentType?[r("Step",{attrs:{title:t.$t("textarea.steps.upload.0")}}),r("Step",{attrs:{title:t.$t("textarea.steps.upload.1")}})]:t._e()],2):t._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:0==t.currentIndex,expression:"currentIndex == 0"}]},[r("Select",{staticStyle:{margin:"40px 0 0 0"},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},t._l(t.uploadWidgetTypeArray,(function(e,a){return r("Option",{key:a,attrs:{value:e}},[t._v(" "+t._s(t.$t("textarea.type."+e))+" ")])})),1),"url"==t.currentType?[r("div",{staticClass:"see-mode"},[r("Input",{attrs:{placeholder:"http(s)://"},model:{value:t.insertValue,callback:function(e){t.insertValue=e},expression:"insertValue"}})],1)]:t._e(),"upload"==t.currentType?[r("Upload",{staticClass:"upload-mode",attrs:{action:"",accept:"image/*",multiple:"",type:"drag",headers:t.headers,data:t.extraData,"max-size":t.imgMaxSize,"with-credentials":t.withCredentials,"show-upload-list":t.showUploadList,"before-upload":t.handleBeforeSelectFile}},[r("div",{staticClass:"upload-mode-content"},[r("Icon",{attrs:{type:"ios-cloud-upload",size:"52"}})],1)]),r("Alert",{attrs:{type:"warning"}},[t._v(" "+t._s(t.$t("report.info.uploadPic2"))+" "),r("a",{attrs:{target:"_blank",href:"https://sm.ms"}},[t._v("https://sm.ms")]),t._v("，"+t._s(t.$t("report.info.uploadPic3"))+" ")]),r("span",{staticClass:"hint"},[t._v(t._s(t.$t("report.info.uploadPic1")))]),r("span",{staticClass:"hint"},[t._v(t._s(t.$t("report.info.uploadPic4")))])]:t._e(),"media"==t.currentType?[r("div",{staticClass:"media-card"},[t.media.data.length>0?[r("Form",{attrs:{"label-position":"top"}},t._l(t.media.data,(function(e,a){return r("Card",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{"dis-hover":""}},[r("Row",{attrs:{gutter:30}},[r("Col",{attrs:{flex:"1"}},[r("Row",[r("Col",{attrs:{span:"12"}},[t._v(" "+t._s(e.filename)+" ")]),r("Col",{attrs:{span:"6"}},[t._v(" "+t._s(e.size)+" ")]),r("Col",{attrs:{span:"6"}},[r("Time",{attrs:{time:e.createTime}})],1)],1)],1),r("Col",[r("Button",{attrs:{href:"javascript:void(0)",loading:e.load},on:{click:function(e){return t.selectMediaFile(a)}}},[t._v(" "+t._s(t.$t("basic.button.insert"))+" ")])],1)],1)],1)})),1)]:r("Empty"),r("Spin",{directives:[{name:"show",rawName:"v-show",value:t.media.load,expression:"media.load"}],attrs:{size:"large",fix:""}})],2)]:t._e()],2),r("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentIndex,expression:"currentIndex == 1"}]},[t.currentFileType.indexOf("image")>=0?[t.ignore?r("div",{staticClass:"see-mode"},[r("img",{attrs:{src:t.vueCropper.img}})]):r("vue-Cropper",{ref:"cropper",staticClass:"cropper-mode",attrs:{centerBox:!0,mode:"cover",img:t.vueCropper.img,outputSize:t.vueCropper.size,outputType:t.vueCropper.outputType,autoCrop:t.vueCropper.autoCrop}})]:r("div",[r("div",{staticClass:"see-mode"},[t._v(" 不支持编辑 ")])])],2),2==t.currentIndex?r("div",[t.currentFileType.indexOf("image")>=0?r("div",{staticClass:"see-mode"},[r("img",{attrs:{src:t.insertValue,height:"100%"}})]):r("div",{staticClass:"see-mode"},[r("div",[t._v(t._s(t.currentFileType))]),r("p",[r("a",{attrs:{href:t.insertValue,target:"_blank"}},[t._v(t._s(t.insertValue))])])])]):t._e(),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Row",{attrs:{gutter:20,type:"flex",align:"middle"}},[r("Col",[r("Button",{on:{click:t.onPanelChange}},[t._v(t._s(t.$t("basic.button.cancel")))])],1),0==t.currentIndex?[r("Col",{attrs:{flex:"1"}},["url"==t.currentType?r("Button",{attrs:{type:"primary",disabled:!t.insertValue},on:{click:function(e){t.currentIndex=2,t.currentFileType="image"}}},[t._v(t._s(t.$t("basic.button.next"))+" ")]):t._e()],1)]:t._e(),1==t.currentIndex?[r("Col",{attrs:{flex:"1"}},[r("Checkbox",{model:{value:t.ignore,callback:function(e){t.ignore=e},expression:"ignore"}},[t._v(t._s(t.$t("textarea.originalImage")))])],1),r("Col",[r("Button",{on:{click:function(e){t.currentIndex-=1}}},[t._v(t._s(t.$t("basic.button.prev")))]),r("Button",{attrs:{type:"primary",loading:t.updataIcon,disabled:t.updataIcon},on:{click:t.onBeforeUpload}},[t._v(t._s(t.$t("basic.button.next"))+" ")])],1)]:2==t.currentIndex||-5==t.currentIndex?r("Col",{attrs:{flex:"1"}},[r("Button",{on:{click:function(e){t.currentIndex=0}}},[t._v(t._s(t.$t("basic.button.reset")))]),r("Button",{attrs:{type:"primary",loading:t.insertLoad,disabled:!t.insertValue},on:{click:t.onFinish}},[t._v(t._s(t.$t("basic.button.commit"))+" ")])],1):t._e()],2)],1)],1)],2)},n=[],i=(r("acef"),r("3c5d"),r("fa9e"),r("77d9"),r("e4b4")),o=r("02bc"),s=r("7e79"),u=r("11c1"),c=r.n(u),p={name:"UploadWidget",props:{uploadWidgetTypeArray:{type:Array,default(){return["url","upload","media"]}}},components:{Empty:o["a"],VueCropper:s["VueCropper"]},watch:{currentType:{handler(t,e){"media"==t&&this.getMediaList()},deep:!0}},data(){return{currentIndex:0,currentFileType:"",currentType:"url",insertValue:"",updataPlane:!1,updataIcon:!1,headers:{"x-csrf-token":""},imgMaxSize:2014,vodMaxSize:30720,extraData:{token:""},withCredentials:!1,showUploadList:!1,vueCropper:{img:"",size:.6,outputType:"jpg",autoCrop:!0},insertLoad:!1,ignore:!1,media:{load:!1,detail:{},data:[],limit:40,skip:1}}},created(){this.http=i["d"].call(this),this.currentType=this.uploadWidgetTypeArray[0]},methods:{onFinish(){this.$emit("finish",this.insertValue),this.onPanelChange()},async onBeforeUpload(){const t=this;let e;this.ignore?(e=await t.dataURLtoFile(this.vueCropper.img,`${this.filename(this.vueCropper.name)}.${this.vueCropper.outputType}`),await t.onAfterUpload(e)):this.$refs.cropper.getCropBlob(async r=>{r.lastModifiedDate=new Date,r.name=`${this.filename(r.name)}.${this.vueCropper.outputType}`,this.updataIcon=!0,e=new File([r],t.currentFileType,{type:r.type}),await t.onAfterUpload(e)})},async onAfterUpload(t){const e=this;this.updataIcon=!0,await i["m"].on(t).then(t=>{t&&t.code>=1&&(this.currentIndex+=1,this.insertValue=t.url)}).catch(t=>{e.currentIndex=0,e.$Message.error(t.message)}).finally(()=>{e.updataIcon=!1})},async handleBeforeSelectFile(t){const e=this;if(t.length<=1)return;let r=new FileReader;return r.readAsDataURL(t),this.currentFileType=t.type,r.addEventListener("loadend",(function(){e.vueCropper.img=r.result,e.vueCropper.name=t.name,e.currentIndex+=1})),!1},async dataURLtoFile(t,e){var r=t.split(","),a=r[0].match(/:(.*?);/)[1],n=atob(r[1]),i=n.length,o=new Uint8Array(i);while(i--)o[i]=n.charCodeAt(i);return new File([o],e,{type:a})},filename(t){return c.a.v4({name:t,generationTime:(new Date).getTime()})},getMediaList(){this.http.get(i["b"]["service_myFiles"],{params:{limit:this.media.limit,skip:this.media.skip-1}}).then(t=>{const e=t.data;1===e.success&&(this.media.data=e.data)})},async queryMediaDetail(t){this.media.load=!0;let e=await i["c"].get(i["b"]["service_file"],{params:{filename:t,explain:!0}});return this.currentFileType=e.data.data.mimeType,this.media.load=!1,e},async selectMediaFile(t){if(this.media.data[t].load)return;this.media.data[t].load=!0;let e=await this.queryMediaDetail(this.media.data[t].filename);if(1==e.data.success)return this.insertValue="https://bfban.gametools.network/api/service/file?filename="+this.media.data[t].filename,this.currentIndex=2,void(this.media.data[t].load=!1);this.media.data[t].load=!1,this.currentIndex=0,this.$Message.error(e.data.code)},onReset(){this.currentIndex=0,this.insertValue="",this.currentFileType="",this.uploadWidgetTypeArray.length>0&&(this.currentFileType=this.uploadWidgetTypeArray[0])},onPanelChange(){this.updataPlane=!this.updataPlane,this.onReset(),this.$emit("change",this.updataPlane)}}},d=p,l=(r("92a2"),r("2877")),f=Object(l["a"])(d,a,n,!1,null,"74e07b20",null);e["a"]=f.exports},c437:function(t,e,r){var a,n,i=r("e1f4"),o=r("2366"),s=0,u=0;function c(t,e,r){var c=e&&r||0,p=e||[];t=t||{};var d=t.node||a,l=void 0!==t.clockseq?t.clockseq:n;if(null==d||null==l){var f=i();null==d&&(d=a=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==l&&(l=n=16383&(f[6]<<8|f[7]))}var y=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:u+1,v=y-s+(h-u)/1e4;if(v<0&&void 0===t.clockseq&&(l=l+1&16383),(v<0||y>s)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=y,u=h,n=l,y+=122192928e5;var m=(1e4*(268435455&y)+h)%4294967296;p[c++]=m>>>24&255,p[c++]=m>>>16&255,p[c++]=m>>>8&255,p[c++]=255&m;var g=y/4294967296*1e4&268435455;p[c++]=g>>>8&255,p[c++]=255&g,p[c++]=g>>>24&15|16,p[c++]=g>>>16&255,p[c++]=l>>>8|128,p[c++]=255&l;for(var b=0;b<6;++b)p[c+b]=d[b];return e||o(p)}t.exports=c},c64e:function(t,e,r){var a=r("e1f4"),n=r("2366");function i(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[i+s]=o[s];return e||n(o)}t.exports=i},d2bb:function(t,e,r){var a=r("825a"),n=r("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(r,[]),e=r instanceof Array}catch(i){}return function(r,i){return a(r),n(i),e?t.call(r,i):r.__proto__=i,r}}():void 0)},e163:function(t,e,r){var a=r("5135"),n=r("7b0b"),i=r("f772"),o=r("e177"),s=i("IE_PROTO"),u=Object.prototype;t.exports=o?Object.getPrototypeOf:function(t){return t=n(t),a(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,r){var a=r("d039");t.exports=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e1f4:function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var a=new Uint8Array(16);t.exports=function(){return r(a),a}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}},ebb5:function(t,e,r){"use strict";var a,n,i,o=r("a981"),s=r("83ab"),u=r("da84"),c=r("861d"),p=r("5135"),d=r("f5df"),l=r("9112"),f=r("6eeb"),y=r("9bf2").f,h=r("e163"),v=r("d2bb"),m=r("b622"),g=r("90e3"),b=u.Int8Array,x=b&&b.prototype,_=u.Uint8ClampedArray,T=_&&_.prototype,w=b&&h(b),A=x&&h(x),C=Object.prototype,I=C.isPrototypeOf,R=m("toStringTag"),$=g("TYPED_ARRAY_TAG"),S=g("TYPED_ARRAY_CONSTRUCTOR"),k=o&&!!v&&"Opera"!==d(u.opera),F=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},U=function(t){if(!c(t))return!1;var e=d(t);return"DataView"===e||p(O,e)||p(P,e)},V=function(t){if(!c(t))return!1;var e=d(t);return p(O,e)||p(P,e)},E=function(t){if(V(t))return t;throw TypeError("Target is not a typed array")},M=function(t){if(v&&!I.call(w,t))throw TypeError("Target is not a typed array constructor");return t},B=function(t,e,r){if(s){if(r)for(var a in O){var n=u[a];if(n&&p(n.prototype,t))try{delete n.prototype[t]}catch(i){}}A[t]&&!r||f(A,t,r?e:k&&x[t]||e)}},D=function(t,e,r){var a,n;if(s){if(v){if(r)for(a in O)if(n=u[a],n&&p(n,t))try{delete n[t]}catch(i){}if(w[t]&&!r)return;try{return f(w,t,r?e:k&&w[t]||e)}catch(i){}}for(a in O)n=u[a],!n||n[t]&&!r||f(n,t,e)}};for(a in O)n=u[a],i=n&&n.prototype,i?l(i,S,n):k=!1;for(a in P)n=u[a],i=n&&n.prototype,i&&l(i,S,n);if((!k||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},k))for(a in O)u[a]&&v(u[a],w);if((!k||!A||A===C)&&(A=w.prototype,k))for(a in O)u[a]&&v(u[a].prototype,A);if(k&&h(T)!==A&&v(T,A),s&&!p(A,R))for(a in F=!0,y(A,R,{get:function(){return c(this)?this[$]:void 0}}),O)u[a]&&l(u[a],$,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_CONSTRUCTOR:S,TYPED_ARRAY_TAG:F&&$,aTypedArray:E,aTypedArrayConstructor:M,exportTypedArrayMethod:B,exportTypedArrayStaticMethod:D,isView:U,isTypedArray:V,TypedArray:w,TypedArrayPrototype:A}},f5df:function(t,e,r){var a=r("00ee"),n=r("c6b6"),i=r("b622"),o=i("toStringTag"),s="Arguments"==n(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(r){}};t.exports=a?n:function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(e=Object(t),o))?r:s?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},f8cd:function(t,e,r){var a=r("a691");t.exports=function(t){var e=a(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},fa9e:function(t,e,r){"use strict";var a=r("ebb5"),n=r("a258").findLast,i=a.aTypedArray,o=a.exportTypedArrayMethod;o("findLast",(function(t){return n(i(this),t,arguments.length>1?arguments[1]:void 0)}))}}]);
//# sourceMappingURL=chunk-47833711.2.9.12.js.map