(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65a7f31b","chunk-2d0da581"],{"2d3b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"content"},[a("br"),a("Row",[a("Col",{attrs:{xs:{push:1},lg:{push:0}}},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:{name:"home"}}},[e._v(e._s(e.$t("header.index")))]),a("BreadcrumbItem",[e._v(e._s(e.$t("search.title")))])],1)],1)],1),a("br"),e._m(0),a("div",{class:["search-content",e.searchValue[e.searchTypeValue].toString().length>e.searchConfig.type[e.searchTypeValue].minLength&&e.searchPosting?"search-content-mini":""]},[a("Row",{staticStyle:{width:"100%"},attrs:{type:"flex",justify:"center",gutter:20}},[a("Col",{attrs:{xs:{span:24},sm:{span:18},md:{span:18}}},[a("div",{staticClass:"search-input search-input-show ivu-input ivu-input-large"},[a("Row",{attrs:{gutter:10}},[a("Col",[a("Select",{attrs:{size:"small"},model:{value:e.searchTypeValue,callback:function(t){e.searchTypeValue=t},expression:"searchTypeValue"}},[a("Option",{attrs:{label:e.$t("search.tabs.player"),value:"player"}},[e._v(e._s(e.$t("search.tabs.player")))]),a("Option",{attrs:{label:e.$t("search.tabs.user"),value:"user",disabled:!e.isLogin}},[e._v(e._s(e.$t("search.tabs.user"))+" ")]),e.isAdminL2?a("Option",{attrs:{label:e.$t("search.tabs.comment"),value:"comment",disabled:!e.isLogin&&!e.isAdminL2}},[e._v(" "+e._s(e.$t("search.tabs.comment"))+" ")]):e._e()],1)],1),a("Col",{attrs:{flex:"1"}},[a("Dropdown",{staticStyle:{width:"100%"}},["text"===e.searchConfig.type[e.searchTypeValue].inputType?[a("Input",{attrs:{size:"small",clearable:"","show-word-limit":!0,minlength:e.searchConfig.type[e.searchTypeValue].minLength,maxlength:e.searchConfig.type[e.searchTypeValue].maxLength,border:!1,placeholder:e.$t("search.placeholder")},on:{"on-enter":e.handleSearch,"on-search":e.handleSearch},model:{value:e.searchValue[e.searchTypeValue],callback:function(t){e.$set(e.searchValue,e.searchTypeValue,t)},expression:"searchValue[searchTypeValue]"}})]:"textarea"===e.searchConfig.type[e.searchTypeValue].inputType?[a("Input",{attrs:{type:"textarea",border:!1,placeholder:e.$t("search.placeholder"),minlength:e.searchConfig.type[e.searchTypeValue].minLength,maxlength:e.searchConfig.type[e.searchTypeValue].maxLength,multiple:!0,"show-word-limit":!0},on:{"on-search":e.handleSearch},model:{value:e.searchValue[e.searchTypeValue],callback:function(t){e.$set(e.searchValue,e.searchTypeValue,t)},expression:"searchValue[searchTypeValue]"}})]:e._e(),a("div",{staticStyle:{padding:"10px"},attrs:{slot:"list",transfer:""},slot:"list"},[e.searchHistory.list.length>0?a("Row",{attrs:{type:"flex",align:"middle",gutter:5}},[a("Col",{attrs:{flex:"1"}},[a("h5",[a("b",[e._v(e._s(e.searchHistory.list.length))]),a("span",[e._v("/10")])])]),a("Col",[a("Button",{attrs:{size:"small",type:"primary",ghost:""},on:{click:e.deleteSearchHistoryAll}},[a("Icon",{attrs:{type:"md-trash"}})],1)],1)],1):e._e(),e.searchHistory.list.length>0?[a("Row",{attrs:{gutter:5}},e._l(e.searchHistory.list,(function(t,s){return a("Col",{key:s},[a("Tag",{attrs:{stype:"border",type:"dot",color:t.count>0?"success":"default",checkable:"",closable:""},on:{"on-change":function(t){return e.handleSearchHistoryClickTag(s)},"on-close":function(t){return e.handleSearchHistoryClose(s)}}},[e._v(" "+e._s(e.$t("search.tabs."+t.type)||"")+":"+e._s(t.param)+" ")])],1)})),1)]:a("div",{attrs:{align:"center"}},[e._v(" 🦖🦈🐧 ")])],2)],2)],1),a("Col",[a("OcrWidget",{attrs:{data:{}},on:{ok:e.onOcrOutput}},[a("Tooltip",{attrs:{content:"OCR"}},[a("a",{attrs:{href:"javascript:void(0)"}},[a("Icon",{attrs:{type:"md-qr-scanner"}})],1)])],1)],1),a("Col",[a("Button",{attrs:{type:"primary",size:"small",disabled:e.searchTypeValue&&e.searchValue&&e.searchValue[e.searchTypeValue].length<=3},on:{click:e.handleSearch}},[e.modalSpinShow?a("Icon",{attrs:{type:"md-refresh spin-icon-load"}}):a("Icon",{attrs:{type:"ios-search"}})],1)],1)],1)],1)])],1),e.searchValue[e.searchTypeValue].toString().length>e.searchConfig.type[e.searchTypeValue].minLength&&e.searchPosting?e._e():a("Row",{staticClass:"checkboxGroup",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{xs:{span:24},lg:{span:6},align:"center"}},[a("Icon",{attrs:{type:"md-alert"}}),e._v(" "+e._s(e.$t("search.describe"))+" ")],1),a("Col",{attrs:{xs:{span:0},lg:{span:1}}},[a("Divider",{attrs:{type:"vertical"}})],1),a("Col",{attrs:{xs:{span:24},lg:{span:6},align:"center"}},[e._v(" "+e._s(e.$t("search.collectionHint"))+" ")])],1)],1),e.searchValue[e.searchTypeValue].length>=e.searchConfig.type[e.searchTypeValue].minLength&&e.searchPosting?[a("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[a("Col",{attrs:{flex:"1"}},[a("Tabs",{attrs:{captureFocus:""},on:{"on-click":e.onTabClick},model:{value:e.searchTypeValue,callback:function(t){e.searchTypeValue=t},expression:"searchTypeValue"}},[a("TabPane",{attrs:{name:"player",label:e.$t("search.tabs.player")}}),a("TabPane",{attrs:{name:"user",label:e.$t("search.tabs.user"),disabled:!e.isLogin}}),e.isAdminL2?a("TabPane",{attrs:{name:"comment",label:e.$t("search.tabs.comment"),disabled:!e.isLogin&&!e.isAdminL2}}):e._e()],1)],1),a("Col",[a("Row",{attrs:{gutter:5}},[a("Col",["player"===e.searchTypeValue?[a("Poptip",{ref:"filesPoptip",attrs:{placement:"bottom-end",trigger:"click",width:"400","popper-class":"files-poptip",padding:"20px 30px"}},[a("Button",{attrs:{size:"small"}},[a("Icon",{attrs:{type:"md-funnel",size:"15"}})],1),a("Form",{ref:"filesFunnel",attrs:{slot:"content","label-position":"top"},slot:"content"},[a("FormItem",[a("RadioGroup",{attrs:{type:"button"},model:{value:e.searchSort,callback:function(t){e.searchSort=t},expression:"searchSort"}},[a("Radio",{attrs:{label:"default"}},[e._v(e._s(e.$t("search.sort.default")))]),a("Radio",{attrs:{label:"latest"}},[e._v(e._s(e.$t("search.sort.latest")))]),a("Radio",{attrs:{label:"mostViewed"}},[e._v(e._s(e.$t("search.sort.mostViewed")))]),a("Radio",{attrs:{label:"mostComments"}},[e._v(e._s(e.$t("search.sort.mostComments")))])],1)],1),a("FormItem",[a("Select",{staticClass:"search-input-show",attrs:{transfer:!0},model:{value:e.searchGameValue,callback:function(t){e.searchGameValue=t},expression:"searchGameValue"}},[a("Icon",{staticStyle:{"margin-left":"10px","margin-right":"5px",opacity:".6"},attrs:{slot:"prefix",type:"ios-funnel"},slot:"prefix"}),e._l(e.searchGameList,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(e.$t("basic.games."+t.value))+" ")])}))],2)],1),a("FormItem",{attrs:{label:""}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",translate:"",placement:"bottom-end",placeholder:"Time","split-panels":"",options:e.timeOptions,value:e.intervalTime},on:{"on-change":e.handleCDatepicker}})],1),a("Row",{attrs:{gutter:10}},[a("Col",[a("Button",{attrs:{type:"primary",disabled:e.modalSpinShow},on:{click:e.handleSearch}},[e._v(" "+e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1)]:"user"===e.searchTypeValue?[a("Poptip",{ref:"filesPoptip",attrs:{placement:"bottom-end",trigger:"click",width:"400","popper-class":"files-poptip",padding:"20px 30px"}},[a("Button",{attrs:{size:"small"}},[a("Icon",{attrs:{type:"md-funnel",size:"15"}})],1),a("Form",{ref:"filesFunnel",attrs:{slot:"content","label-position":"top"},slot:"content"},[a("FormItem",[a("RadioGroup",{attrs:{type:"button"},model:{value:e.searchSort,callback:function(t){e.searchSort=t},expression:"searchSort"}},[a("Radio",{attrs:{label:"default"}},[e._v(e._s(e.$t("search.sort.default")))]),a("Radio",{attrs:{label:"joinedAt"}},[e._v(e._s(e.$t("account.joinedAt")))]),a("Radio",{attrs:{label:"lastOnlineTime"}},[e._v(e._s(e.$t("account.lastOnlineTime")))])],1)],1),a("FormItem",[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"Time","split-panels":"",options:e.timeOptions,value:e.intervalTime},on:{"on-change":e.handleCDatepicker}})],1),a("Row",{attrs:{gutter:10}},[a("Col",[a("Button",{attrs:{type:"primary",disabled:e.modalSpinShow},on:{click:e.handleSearch}},[e._v(" "+e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1)]:"comment"===e.searchTypeValue?[a("Poptip",{ref:"filesPoptip",attrs:{placement:"bottom-end",trigger:"click",width:"400","popper-class":"files-poptip",padding:"20px 30px"}},[a("Button",{attrs:{size:"small"}},[a("Icon",{attrs:{type:"md-funnel",size:"15"}})],1),a("Form",{ref:"filesFunnel",attrs:{slot:"content","label-position":"top"},slot:"content"},[a("FormItem",[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"Time","split-panels":"",options:e.timeOptions,value:e.intervalTime},on:{"on-change":e.handleCDatepicker}})],1),a("Row",{attrs:{gutter:10}},[a("Col",[a("Button",{attrs:{type:"primary",disabled:e.modalSpinShow},on:{click:e.handleSearch}},[e._v(" "+e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1)]:e._e()],2),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.handleSearch}},[a("Icon",{class:e.modalSpinShow?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1)],1)],1),"player"===e.searchTypeValue?[e.result.player.length>0?a("Card",{staticClass:"search-list",attrs:{"dis-hover":""}},[e._l(e.result.player,(function(t,s){return a("div",{directives:[{name:"voice-button",rawName:"v-voice-button"}],key:s,staticClass:"item-card"},[a("Badge",{staticStyle:{width:"100%"},attrs:{text:t.viewNum>100&&t.commentsNum>10?"hot":""}},[a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("Card",{attrs:{"dis-hover":"",padding:10,to:{name:"player",params:{ouid:t.originPersonaId},query:Object.assign({},{byPath:e.$route.name},e.$route.query)}}},[a("Row",{attrs:{gutter:10,type:"flex"}},[a("Col",{attrs:{xs:{span:5,push:0,pull:0},sm:{span:3,push:0,pull:0},lg:{span:2,push:0,pull:0}}},[t.avatarLink?a("Avatar",{staticClass:"default-avatar",attrs:{src:t.avatarLink,alt:"avatar",size:"55"}}):[a("Avatar",{staticClass:"default-avatar",attrs:{icon:"ios-person",size:"55"}})]],2),a("Col",{attrs:{xs:{span:18,push:0,pull:0},sm:{span:18,push:0,pull:0},lg:{span:18,push:0,pull:0}}},[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("ExposedName",[a("h2",[e._v(e._s(t.historyName))])])],1),a("div",[e._v(" "+e._s(e.$t("list.colums.reportTime"))+" "),a("TimeView",{attrs:{time:t.createTime,trigger:"hover"}},[t.createTime?a("Time",{attrs:{time:t.createTime,type:"datetime"}}):e._e()],1),a("Divider",{attrs:{type:"vertical"}}),e._v(" "+e._s(e.$t("list.colums.updateTime"))+" "),a("TimeView",{attrs:{time:t.updateTime,trigger:"hover"}},[t.updateTime?a("Time",{attrs:{time:t.updateTime,type:"datetime"}}):e._e()],1)],1)]),a("Col",{staticClass:"mobile-hide",attrs:{xs:{span:24,push:0,pull:0},lg:{span:3,push:0,pull:0}}},[a("Row",{staticStyle:{height:"100%"},attrs:{type:"flex",justify:"end",align:"middle"}},[a("Col",{staticClass:"item-text",attrs:{flex:"auto",align:"right"}},[a("span",[e._v(e._s(t.viewNum||0))]),a("Icon",{staticClass:"item-icon",attrs:{type:"md-eye",size:"17"}})],1),a("Col",{staticClass:"item-text",attrs:{flex:"auto",align:"right"}},[a("span",[e._v(e._s(t.commentsNum||0))]),a("Icon",{staticClass:"item-icon",attrs:{type:"md-chatboxes",size:"17"}})],1)],1)],1),a("Col",{staticClass:"mobile-hide",attrs:{xs:{span:24,push:0,pull:0},lg:{span:1,push:0,pull:0},align:"center"}},[a("Progress",{attrs:{vertical:"",percent:1==t.status?99:100,"hide-info":"",status:"wrong"}})],1)],1)],1)],1),a("Col",{staticClass:"mobile-hide"},[a("Card",{attrs:{"dis-hover":"",padding:25,to:{name:"player",params:{ouid:""+t.originPersonaId},query:{byPath:e.$route.name}},target:"_blank"}},[a("Button",{attrs:{size:"small",type:"text",icon:"md-open"}})],1)],1)],1)],1)],1)})),a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit.player,current:e.skip.player,total:e.total.player},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],2):a("Card",{staticClass:"list",attrs:{"dis-hover":"",padding:10,align:"center"}},[a("Empty")],1)]:e._e(),"user"===e.searchTypeValue?[e.result.user.length>0?a("Card",{staticClass:"search-list",attrs:{"dis-hover":""}},[e._l(e.result.user,(function(t,s){return a("div",{directives:[{name:"voice-button",rawName:"v-voice-button"}],key:s,staticClass:"item-card"},[a("Card",{attrs:{"dis-hover":"",padding:10,to:{path:"/space/"+t.dbId}}},[a("Row",{attrs:{gutter:10,type:"flex"}},[a("Col",{attrs:{xs:{span:4,push:0,pull:0},sm:{span:2,push:0,pull:0},lg:{span:2,push:0,pull:0}}},[t.userAvatar?a("Avatar",{attrs:{src:t.userAvatar,alt:"avatar",size:"55"}}):a("Avatar",{attrs:{alt:"avatar",size:"55"}},[e._v(" "+e._s(t.username)+" ")])],1),a("Col",{attrs:{xs:{span:15,push:0,pull:0},sm:{span:17,push:0,pull:0},lg:{span:17,push:0,pull:0}}},[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("Tooltip",{attrs:{content:e.$t("list.colums.playerId")}},[a("ExposedName",[a("h2",[e._v(e._s(t.username))])])],1)],1),a("div",[e._v(" "+e._s(e.$t("account.joinedAt"))+" "),a("TimeView",{attrs:{time:t.joinTime,trigger:"hover"}},[t.joinTime?a("Time",{attrs:{time:t.joinTime}}):e._e()],1),a("Divider",{attrs:{type:"vertical"}}),e._v(" "+e._s(e.$t("account.lastOnlineTime"))+" "),a("TimeView",{attrs:{time:t.signoutTime,trigger:"hover"}},[t.signoutTime?a("Time",{attrs:{time:t.signoutTime}}):e._e()],1)],1)]),a("Col",{attrs:{xs:{span:5,push:0,pull:0},sm:{span:5,push:0,pull:0},lg:{span:5,push:0,pull:0},align:"right"}},[a("PrivilegesTag",{attrs:{data:t.privilege}})],1)],1)],1)],1)})),a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit.user,current:e.skip.user,total:e.total.user},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],2):a("Card",{staticClass:"list",attrs:{"dis-hover":"",padding:10,align:"center"}},[a("Empty")],1)]:e._e(),"comment"===e.searchTypeValue?[e.result.comment.length>0?a("Card",{staticClass:"list",attrs:{"dis-hover":""}},[e._l(e.result.comment,(function(t,s){return a("div",{key:s,staticClass:"timeline-content"},[a("div",{staticClass:"timeline-time"},[a("Row",{attrs:{gutter:10}},[a("Col",[a("Button",{attrs:{size:"small",to:{name:"player",params:{ouid:""+t.toOriginPersonaId},query:{byPath:e.$route.name}}}},[a("Icon",{attrs:{type:"md-eye"}})],1)],1),a("Col",{attrs:{flex:"1"}},[a("router-link",{attrs:{to:{name:"space",params:{uId:""+t.byUserId}}}},[a("BusinessCard",{attrs:{id:t.byUserId}},[a("ExposedName",[a("u",[a("b",[e._v(e._s(t.username||t.byUserId))])])])],1)],1)],1),a("Col",{attrs:{align:"right"}},[a("TimeView",{attrs:{time:t.createTime}},[t.createTime?a("Time",{attrs:{time:t.createTime,type:"datetime"}}):e._e()],1)],1)],1)],1),a("Card",{directives:[{name:"voice-button",rawName:"v-voice-button"}],staticClass:"item-card timeline-description",attrs:{"dis-hover":"",padding:0}},[a("HtmlWidget",{attrs:{html:t.content}})],1),a("br")],1)})),a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit.comment,current:e.skip.comment,total:e.total.comment},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],2):a("Card",{staticClass:"list",attrs:{"dis-hover":"",padding:10,align:"center"}},[a("Empty")],1)]:e._e()]:e._e()],2)])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"styles-herosection user-select-none"},[s("div",{staticClass:"styles_bg"}),s("img",{staticClass:"styles_bg_img",attrs:{src:a("a240")}})])}],i=a("e4b4"),l=a("54c4"),o=a("d78a"),n=a("617b"),c=a("aa6e"),p=a("02bc"),h=a("9648"),m=a("5515"),u=a("6acc"),d=new i["d"]({name:"search",data(){return{modalSpinShow:!1,searchPosting:!1,searchValue:{player:"",user:"",comment:""},searchHistory:{load:!1,list:[]},searchConfig:{type:{player:{minLength:3,maxLength:50,inputType:"text",verify:[]},user:{minLength:3,maxLength:50,inputType:"text",verify:[]},comment:{minLength:2,maxLength:100,inputType:"text",verify:[]}}},searchTypeValue:"player",searchGameList:[{value:"all"}].concat(u.child),searchGameValue:"all",searchSort:"default",intervalTime:void 0,timeOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()},shortcuts:[{text:this.$i18n.t("sitestats.timeRange.daily"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.weekly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.monthly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.yearly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-31104e6),[t,e]}}]},result:{player:[],user:[],comment:[]},skip:{player:1,user:1,comment:1},limit:{player:40,user:20,comment:10},total:{player:0,user:0,comment:0}}},components:{OcrWidget:l["a"],PrivilegesTag:o["a"],HtmlWidget:n["a"],BusinessCard:c["a"],Empty:p["a"],TimeView:h["a"],ExposedName:m["a"]},created(){const{param:e,type:t,game:a,skip:s,limit:r}=this.$route.query;this.searchValue[t]=e||this.searchValue[t]||"",this.searchTypeValue=t||"player",this.searchGameValue=a||"all",t&&s>=1&&s<=Number.MAX_VALUE&&(this.skip[this.searchTypeValue]=Number(s)||this.skip[this.searchTypeValue]),t&&r>=0&&r<=40&&(this.limit[this.searchTypeValue]=Number(r)||this.limit[this.searchTypeValue]),this.getSearchHistory(),this.searchValue[t]&&this.handleSearch()},methods:{getSearchHistory(){let e=i["o"].local.get("search.history");-1===e.code&&this.setSearchHistoryValue([]),this.searchHistory.list=e.data.value||[]},setSearchHistoryValue(e){const t=10;let a=e;for(let s=0;s<a.length;s++)a.length>t&&a.pop();i["o"].local.set("search.history",a)},handleSearchHistoryClose(e){this.searchHistory.list.splice(e,1),this.setSearchHistoryValue(this.searchHistory.list)},handleSearchHistoryClickTag(e){this.modalSpinShow||(this.searchValue[this.searchTypeValue]=this.searchHistory.list[e].param,this.searchTypeValue=this.searchHistory.list[e].type,this.handleSearch())},handlePageChange(e){this.skip[this.searchTypeValue]=e,this.handleSearch()},handlePageSizeChange(e){this.limit[this.searchTypeValue]=e,this.handleSearch()},handleCDatepicker(e){this.intervalTime=e,this.skip[this.searchTypeValue]=1,this.handleSearch()},onOcrOutput(e){this.searchValue[this.searchTypeValue]=e.value,this.handleSearch()},deleteSearchHistoryAll(){i["o"].local.rem("search.history"),this.searchHistory.list=[]},onTabClick(e){this.searchTypeValue=e,this.handleSearch()},handleSearch(){const e=this,t=this.searchValue[this.searchTypeValue].toString().trim();let a={param:t,type:this.searchTypeValue},s="";switch(a=Object.assign({game:this.searchGameValue,sort:this.searchSort},a),this.$router.push({name:this.$router.name,query:{...a,...this.$route.query}}),this.searchValue[this.searchTypeValue]=t,this.searchPosting=!1,this.searchTypeValue){case"player":this.skip[this.searchTypeValue]>=1&&(a.skip=Number((this.skip[this.searchTypeValue]-1)*this.limit[this.searchTypeValue])),this.limit[this.searchTypeValue]>=0&&this.limit[this.searchTypeValue]<=40&&(a.limit=Number(this.limit[this.searchTypeValue])),this.intervalTime?(a.createTimeFrom=new Date(this.intervalTime[0]).getTime(),a.createTimeTo=new Date(this.intervalTime[1]).getTime()):(delete a.createTimeFrom,delete a.createTimeTo);break;case"user":case"comment":this.skip[this.searchTypeValue]>=1&&(a.skip=Number((this.skip[this.searchTypeValue]-1)*this.limit[this.searchTypeValue])),this.limit[this.searchTypeValue]>=0&&this.limit[this.searchTypeValue]<=40&&(a.limit=Number(this.limit[this.searchTypeValue])),this.intervalTime?(a.createTimeFrom=new Date(this.intervalTime[0]).getTime(),a.createTimeTo=new Date(this.intervalTime[1]).getTime()):(delete a.createTimeFrom,delete a.createTimeTo);break}""===a.param||a.param.length<=3||this.modalSpinShow?this.modalSpinShow=!1:(this.modalSpinShow=!0,i["e"].get(i["c"]["search"],{params:a}).then(a=>{const r=a.data;let i=!1;for(let s=0;s<e.searchHistory.list.length;s++){let a=e.searchHistory.list[s];a.param==t&&a.type==this.searchTypeValue&&(i=!0)}if(i||e.searchHistory.list.push({param:t,type:this.searchTypeValue,count:r.data.length||0}),e.setSearchHistoryValue(this.searchHistory.list),1===r.success)return this.result[this.searchTypeValue]=r.data,this.total[this.searchTypeValue]=r.total,void(r.data.length<=0&&this.$Message.info(this.$i18n.t("search.notExist")));"object"==typeof r.message?r.message.forEach(e=>s+=`${e.param}: ${e.msg}`):this.$t(`basic.tip['${r.code}']`,{message:r.message||""}),this.$Message.error({content:s,duration:10})}).catch(e=>{this.$Message.error({content:e,duration:10})}).finally(()=>{e.modalSpinShow=!1,e.searchPosting=!0}))}}}),g=d,y=(a("9ed0"),a("2877")),v=Object(y["a"])(g,s,r,!1,null,null,null);t["default"]=v.exports},"54c4":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ocr-widget"},[a("span",{on:{click:function(t){e.ocrModal.show=!0}}},[e._t("default")],2),a("Modal",{attrs:{title:"OCR","footer-hide":"","mask-closable":!1,styles:{top:"50%",transform:"translateY(-50%)"}},model:{value:e.ocrModal.show,callback:function(t){e.$set(e.ocrModal,"show",t)},expression:"ocrModal.show"}},[a("Steps",{attrs:{current:e.ocrModal.Steps,size:"small"}},[a("Step"),a("Step"),a("Step")],1),0==e.ocrModal.Steps?[a("br"),a("Upload",{attrs:{multiple:"",type:"drag",action:"",accept:"image/*","before-upload":e.onSelect}},[a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{attrs:{type:"md-document",size:"52"}})],1)])]:e._e(),e.ocrModal.Steps>=1?[a("div",{staticStyle:{position:"relative"}},[a("vue-Cropper",{ref:"cropper",staticClass:"orc-cropper-mode",attrs:{canScale:1==e.ocrModal.Steps,canMove:1==e.ocrModal.Steps,canMoveBox:1==e.ocrModal.Steps,fixedBox:2==e.ocrModal.Steps,centerBox:!0,mode:"cover",info:!1,img:e.ocrModal.image,outputSize:e.vueCropper.size,outputType:e.vueCropper.outputType,autoCrop:e.vueCropper.autoCrop}}),e.ocrModal.readOrcLoad?a("Spin",{staticClass:"ocr-readLoad",attrs:{fix:""}},[e.ocrModal.logger.status?a("p",[e._v(e._s(e.ocrModal.logger.status))]):e._e(),a("Progress",{staticStyle:{width:"300px"},attrs:{percent:100*e.ocrModal.logger.progress,"stroke-width":20,"text-inside":""}})],1):e._e()],1)]:e._e(),1==e.ocrModal.Steps?[a("Row",[a("Col",{attrs:{flex:"1"}},[a("Button",{on:{click:function(t){e.ocrModal.Steps-=1}}},[e._v(e._s(e.$t("basic.button.prev")))])],1),a("Col",[a("Button",{attrs:{loading:e.ocrModal.readOrcLoad},on:{click:e.fs}},[e._v(e._s(e.$t("basic.button.next")))])],1)],1)]:e._e(),2==e.ocrModal.Steps?[e.ocrModal.value.length>0?a("Card",{staticClass:"ocr-edit-string",attrs:{padding:0,"dis-hover":""}},e._l(e.ocrModal.value,(function(t,s){return a("span",{key:s},[e._v(e._s(t))])})),0):a("Card",{staticClass:"ocr-edit-string",attrs:{padding:0,"dis-hover":""}},[a("span",[e._v("Not Name")])]),a("Input",{model:{value:e.ocrModal.value,callback:function(t){e.$set(e.ocrModal,"value",t)},expression:"ocrModal.value"}}),a("Row",{staticStyle:{"margin-top":"15px"}},[a("Col",{attrs:{flex:"1"}},[a("Button",{attrs:{disabled:e.ocrModal.readOrcLoad},on:{click:function(t){e.ocrModal.Steps-=1}}},[e._v(e._s(e.$t("basic.button.prev")))])],1),a("Col",[a("Button",{attrs:{disabled:e.ocrModal.value.length<=0},on:{click:e.onSubmit}},[e._v(e._s(e.$t("basic.button.commit")))])],1)],1)]:e._e()],2)],1)},r=[],i=a("c9bf"),l=a("7e79"),o={name:"OrcWidget",props:{data:{type:Object,default:{}}},data(){return{vueCropper:{size:1,outputType:"jpg",autoCrop:!0},ocrModal:{Steps:0,show:!1,readOrcLoad:!1,file:null,value:"",logger:{progress:.4,status:"read load"},image:""},worker:null}},components:{VueCropper:l["VueCropper"]},created(){const e=this;this.worker=Object(i["createWorker"])({errorHandler:e=>{this.$Message.error(e.toString()),this.onClear()},logger:t=>{e.ocrModal.logger=t}})},methods:{onClear(e={show:!0,image:!0}){this.ocrModal.Steps=0,this.ocrModal.value="",e.image&&(this.ocrModal.image=""),e.show&&(this.ocrModal.show=!1)},onSelect(e){const t=this;this.onClear(),this.ocrModal.file=e;const a=new FileReader;return a.onloadend=()=>{t.ocrModal.image=a.result,t.ocrModal.show=!0},a.readAsDataURL(this.ocrModal.file),this.ocrModal.Steps+=1,!1},onSubmit(){this.$emit("ok",Object.assign(this.data,{value:this.ocrModal.value})),this.onClear()},async fs(){const e=this;this.ocrModal.readOrcLoad=!0,await this.worker.load(),await this.worker.loadLanguage("eng+chi_sim+chi_tra"),await this.worker.initialize("eng+chi_sim+chi_tra"),await this.worker.setParameters({tessjs_create_box:"1"}),this.$refs.cropper.getCropData(async t=>{const a=await e.worker.recognize(t);if(a.data.text.toString().length<=0)return e.$Message.error("Failed to recognize anything"),e.ocrModal.readOrcLoad=!1,void(e.ocrModal.Steps=0);setTimeout((function(){var t;e.ocrModal.value=null!==(t=a.data.text)&&void 0!==t?t:"",e.ocrModal.Steps+=1,e.ocrModal.readOrcLoad=!1}),1e3)})}}},n=o,c=(a("a335"),a("2877")),p=Object(c["a"])(n,s,r,!1,null,"af2c5e96",null);t["a"]=p.exports},"6acc":function(e){e.exports=JSON.parse('{"defaultIndex":0,"default":"bf1","child":[{"value":"bf1","full_name":"bf1","bk_file":"images/games/bf1","bk_src":"//media.contentapi.ea.com/content/dam/gin/images/2017/01/battlefield-1-keyart-5452x3859.jpg.adapt.crop1x1.767p.jpg","logo_src":"//media.contentapi.ea.com/content/dam/gin/common/logos/layer-1.png","app_assets_bk_file":"assets/images/games/bf1/bf.jpg","app_assets_logo_file":"assets/images/games/bf1/logo.png"},{"value":"bfv","full_name":"bfv","bk_file":"images/games/bfv","bk_src":"https://media.contentapi.ea.com/content/dam/gin/images/2018/05/bfv-campaignart-standard-large.jpg.adapt.crop1x1.767p.jpg","bk_width":150,"logo_src":"https://media.contentapi.ea.com/content/dam/gin/common/logos/bfv-logo-white.png","app_assets_bk_file":"assets/images/games/bfv/bf.jpg","app_assets_logo_file":"assets/images/games/bfv/logo.png"},{"value":"bf6","full_name":"bf2042","bk_file":"images/games/bf6","bk_src":"https://media.contentapi.ea.com/content/dam/gin/images/2021/06/battlefield-2042-key-art.jpg.adapt.crop1x1.767p.jpg","logo_src":"https://media.contentapi.ea.com/content/dam/gin/common/logos/battlefield-2042-mono-logo-svg.svg","app_assets_bk_file":"assets/images/games/bf6/bf.jpg","app_assets_logo_file":"assets/images/games/bf6/logo.png"}]}')},"97f1":function(e,t,a){},"9ed0":function(e,t,a){"use strict";a("c6f7")},a240:function(e,t,a){e.exports=a.p+"assets/img/hero-grid-overlay.890f5154.png"},a335:function(e,t,a){"use strict";a("97f1")},c6f7:function(e,t,a){}}]);
//# sourceMappingURL=chunk-65a7f31b.2.9.18.js.map