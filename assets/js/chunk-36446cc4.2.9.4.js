(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36446cc4"],{"2d3b":function(t,e,s){"use strict";s.r(e);s("14d9");var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"container"},[e("div",{staticClass:"content"},[e("br"),e("Row",[e("Col",{attrs:{xs:{push:1},lg:{push:0}}},[e("Breadcrumb",[e("BreadcrumbItem",{attrs:{to:{name:"home"}}},[t._v(t._s(t.$t("header.index")))]),e("BreadcrumbItem",[t._v(t._s(t.$t("search.title")))])],1)],1)],1),e("br"),e("div",{class:"search-content "+(t.cheaters.length>0?"search-content-mini":"")},[e("Row",{staticStyle:{width:"100%"},attrs:{type:"flex",justify:"center",gutter:20}},[e("Col",{attrs:{xs:{span:24},sm:{span:12},md:{span:7}}},[e("Select",{staticClass:"search-input-show",attrs:{size:"large"},model:{value:t.searchScopeValue,callback:function(e){t.searchScopeValue=e},expression:"searchScopeValue"}},[e("Icon",{staticStyle:{"margin-left":"10px","margin-right":"5px",opacity:".6"},attrs:{slot:"prefix",type:"ios-funnel"},slot:"prefix"}),t._l(t.searchScope,(function(s){return e("Option",{key:s,attrs:{value:s}},[t._v(t._s(t.$t("search.scope."+s)))])}))],2)],1),e("Col",{staticClass:"desktop-hide",attrs:{xs:{span:24}}},[t._v("â€‰")]),e("Col",{attrs:{xs:{span:24},sm:{span:12},md:{span:12}}},[e("div",{staticClass:"search-input search-input-show ivu-input ivu-input-large"},[e("Row",{attrs:{gutter:10}},[e("Col",{attrs:{flex:"1"}},[e("Dropdown",{staticStyle:{width:"100%"}},[e("Input",{attrs:{size:"small",border:!1,placeholder:t.$t("search.placeholder")},on:{"on-search":t.handleSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}}),e("div",{attrs:{slot:"list",transfer:""},slot:"list"},[t.searchHistory.list.length>0?e("Row",{staticStyle:{padding:"10px"},attrs:{gutter:5}},t._l(t.searchHistory.list,(function(s,a){return e("Col",{key:a},[e("Tag",{attrs:{stype:"border",type:"dot",checkable:"",closable:""},on:{"on-change":function(e){return t.handleSearchHistoryClickTag(a)},"on-close":function(e){return t.handleSearchHistoryClose(a)}}},[t._v(t._s(s||"")+" ")])],1)})),1):e("div",{attrs:{align:"center"}},[t._v(" ðŸ¦– ")])],1)],1)],1),e("Col",[e("OcrWidget",{attrs:{data:{}},on:{ok:t.onOcrOutput}},[e("Tooltip",{attrs:{content:"OCR"}},[e("a",{attrs:{href:"javascript:void(0)"}},[e("Icon",{attrs:{type:"md-qr-scanner"}})],1)])],1)],1),e("Col",[e("Button",{attrs:{type:"primary",size:"small"},on:{click:t.handleSearch}},[t.modalSpinShow?e("Icon",{attrs:{type:"md-refresh spin-icon-load"}}):e("Icon",{attrs:{type:"ios-search"}})],1)],1)],1)],1)])],1),t.cheaters.length<=0?e("Row",{staticClass:"checkboxGroup",attrs:{type:"flex",justify:"center",align:"middle"}},[e("Col",{attrs:{xs:{span:24},lg:{span:6},align:"center"}},[e("Icon",{attrs:{type:"md-alert"}}),t._v(" "+t._s(t.$t("search.describe"))+" ")],1),e("Col",{attrs:{xs:{span:0},lg:{span:1}}},[e("Divider",{attrs:{type:"vertical"}})],1),e("Col",{attrs:{xs:{span:24},lg:{span:6},align:"center"}},[e("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.$t("search.collectionHint")))])])],1):t._e()],1),0!==t.cheaters.length?e("div",[e("List",{staticClass:"content",attrs:{border:""}},[t._l(t.cheaters,(function(s,a){return e("ListItem",{key:a,nativeOn:{click:function(e){return t.$router.push({name:"player",params:{ouid:s.originPersonaId}})}}},[e("ListItemMeta",{attrs:{avatar:s.avatarLink,title:s.currentName||s.originName,description:`${s.originUserId?"uid:"+s.originPersonaId:""} ${s.historyName?t.$t("search.scope.history")+":"+s.historyName:""}`}}),e("router-link",{attrs:{slot:"action",to:{name:"player",params:{ouid:""+s.originPersonaId}}},slot:"action"},[e("div",[e("Icon",{attrs:{type:"ios-eye",size:"30"}})],1)])],1)})),e("Spin",{directives:[{name:"show",rawName:"v-show",value:t.modalSpinShow,expression:"modalSpinShow"}],attrs:{size:"large",fix:""}})],2)],1):t._e()],1)])},r=[],i=s("890e"),o=s("54c4"),c=s("e4b4"),n=new i["a"]({name:"search",data(){return{searchVal:"",searchHistory:{list:[]},modalSpinShow:!1,searchScope:["current","history"],searchScopeValue:"current",cheaters:[]}},components:{OcrWidget:o["a"]},created(){const{s:t,type:e}=this.$route.query;this.searchScopeValue=e||this.searchScope[0],this.searchVal=t||"",this.handleSearch(),this.getSearchHistory()},methods:{getSearchHistory(){let t=c["j"].get("search.history");-1==t.code&&this.setSearchHistoryValue([]),this.searchHistory.list=t.data.value||[]},async setSearchHistoryValue(t){let e=10,s=t;for(let a=0;a<s.length;a++)s.length>e&&s.pop();c["j"].set("search.history",s)},handleSearchHistoryClose(t){this.searchHistory.list.splice(t,1),this.setSearchHistoryValue(this.searchHistory.list)},handleSearchHistoryClickTag(t){this.modalSpinShow||(this.searchVal=this.searchHistory.list[t],this.handleSearch())},onOcrOutput(t){this.searchVal=t.value,this.handleSearch()},handleSearch(){const t=this,e=this.searchVal.trim();""==e||e.length<=2||!this.searchScopeValue||this.modalSpinShow||(this.modalSpinShow=!0,c["c"].get(c["b"]["search"],{params:{param:e,scope:this.searchScopeValue}}).then(s=>{let a=Array.from(new Set(t.searchHistory.list.concat([e])));t.setSearchHistoryValue(a),t.searchHistory.list=a;const r=s.data;if(1===r.success)return this.cheaters=r.data,void(r.data.length<=0&&this.$Message.info("The player is not found in the database"));this.$Message.error(r.message||r.code)}).finally(()=>{t.modalSpinShow=!1}))}}}),l=n,h=(s("bf23"),s("2877")),p=Object(h["a"])(l,a,r,!1,null,"328d442a",null);e["default"]=p.exports},bf23:function(t,e,s){"use strict";s("db52")},db52:function(t,e,s){}}]);
//# sourceMappingURL=chunk-36446cc4.2.9.4.js.map