(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f59ae77"],{"0d7f":function(t,e,s){},"195a":function(t){t.exports=JSON.parse('{"sendTypes":[{"title":"direct","privilege":["normal","admin","root","super"]},{"title":"warn","privilege":["super"]},{"title":"fatal","privilege":["super"]},{"title":"toAll","privilege":["super"]},{"title":"toAdmins","privilege":["super","admin"]},{"title":"toNormals","privilege":["super","admin"]},{"title":"command","privilege":["root","dev"]}],"typeDictionary":["direct","warn","fatal"]}')},"2b11":function(t,e,s){},"499e":function(t,e,s){},5052:function(t,e,s){"use strict";s("0d7f")},"686c":function(t,e,s){"use strict";s("f89a")},"72c3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("br"),e("Row",[e("Col",{attrs:{xs:{push:1},lg:{push:0}}},[e("Breadcrumb",[e("BreadcrumbItem",{attrs:{to:{name:"home"}}},[t._v(t._s(t.$t("header.index")))]),e("BreadcrumbItem",[t._v(t._s(t.$t("header.profile")))])],1)],1)],1),e("br"),e("Card",{attrs:{"dis-hover":""}},[e("Form",{attrs:{"label-position":"top"}},[e("Row",{attrs:{gutter:15}},[e("Col",[e("Avatar",{attrs:{size:48}},[t._v(t._s(t.currentUser.userinfo.username[0]))])],1),e("Col",{attrs:{flex:"1"}},[e("h3",[t._v(" "+t._s(t.currentUser.userinfo.username)+" ")]),e("p",[t._v(t._s(t.$t("profile.meet",{name:t.currentUser.userinfo.username}))+" ("+t._s(t.currentUser.userinfo.userId)+")")])]),t.currentUser.userinfo.privilege?e("Col",[e("p",[e("b",[t._v(t._s(t.$t("profile.account.form.privilege")))])]),e("PrivilegesTag",{attrs:{data:t.currentUser.userinfo.privilege}})],1):t._e()],1)],1),e("br"),e("Row",{attrs:{gutter:30}},[e("Col",{attrs:{xs:{span:24},sm:{span:6}}},[e("List",{attrs:{border:"",size:"small"}},t._l(t.muen,(function(s,a){return e("ListItem",{key:s.value},[e("a",{on:{click:function(e){return t.upDateUri(t.muen[a].value)}}},[t.muen[a].value==t.muenIndex?e("b",[t._v(" "+t._s(t.$t("profile."+t.muen[s.value].title+".title"))+" ")]):e("span",[t._v(t._s(t.$t("profile."+t.muen[s.value].title+".title")))])])])})),1),e("br"),e("List",{attrs:{border:"",size:"small"}},[e("ListItem",[e("router-link",{attrs:{to:{name:"account",params:{uId:""+t.currentUser.userinfo.userId}}}},[t._v(" "+t._s(t.$t("header.userCenter"))+" "),e("Icon",{attrs:{type:"ios-link"}})],1)],1)],1),e("br"),e("Divider",[t._v(t._s(t.$t("home.bulletin.title")))]),e("Bulletin")],1),e("Col",{attrs:{xs:{span:24},sm:{span:18}}},[0==t.muenIndex?e("account"):t._e(),1==t.muenIndex?e("appearance"):t._e(),2==t.muenIndex?e("message"):t._e(),3==t.muenIndex?e("enhance"):t._e(),4==t.muenIndex?e("media"):t._e(),5==t.muenIndex?e("history"):t._e(),6==t.muenIndex?e("subscribes"):t._e()],1)],1)],1),e("br")],1)},i=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"md",domProps:{innerHTML:t._s(t.data)}})])},o=[],n={data(){return{data:"⛑"}}},l=n,c=(s("686c"),s("2877")),d=Object(c["a"])(l,r,o,!1,null,null,null),m=d.exports,u=s("d78a"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"theme"},[e("RadioGroup",{attrs:{size:"large","button-style":"solid"},model:{value:t.themeIndex,callback:function(e){t.themeIndex=e},expression:"themeIndex"}},t._l(t.themes.child,(function(s,a){return e("Badge",{key:a,staticClass:"theme-card",attrs:{text:s.version}},[e("Card",{attrs:{"dis-hovershow":""},on:{click:function(e){t.themeIndex=a}}},[e("div",[e("span",[t._v(t._s(s.authorInfo.authorName))]),e("Divider",{attrs:{type:"vertical"}}),e("span",[t._v(t._s(s.authorInfo.authorUpdate))])],1)]),e("Row",[e("Col",{attrs:{flex:"auto"}},[e("Radio",{attrs:{label:a,align:"center"}},[e("span",[t._v(t._s(s.name))])])],1),e("Col")],1)],1)})),1),e("Divider"),e("div",[e("Row",[e("Col",{attrs:{span:"12"}},[e("Button",{on:{click:t.changeTheme}},[t._v(t._s(t.$t("basic.button.save")))])],1),e("Col",{attrs:{span:"12",align:"right"}},[t._v(" 🦖 ")])],1)],1)],1)},h=[],g=s("e4b4"),f=s("bce8"),v={name:"appearance",data(){return{themes:f,themeIndex:0}},created(){this.getTheme()},methods:{async getTheme(){let t=await g["f"].get("theme");if(t.data&&t.data.value)return this.themes.child.forEach((e,s)=>{e.name==t.data.value.name&&(this.themeIndex=s)}),void await this.$store.dispatch("setTheme",t.data.value);f.child.filter((t,e)=>{t.name==f.default&&(this.themeIndex=e)}),await this.$store.dispatch("setTheme",this.$store.state.$theme)},changeTheme(t){g["f"].set("theme",this.themes.child[this.themeIndex||0]),location.reload()}}},_=v,b=(s("f4e8"),Object(c["a"])(_,p,h,!1,null,"6e41e086",null)),w=b.exports,y=function(){var t=this,e=t._self._c;return e("div",[e("Form",{attrs:{model:t.formItem,"label-position":"top"}},[e("Row",{attrs:{gutter:30}},[e("Col",{attrs:{span:"12"}},[e("FormItem",[e("div",{attrs:{slot:"label"},slot:"label"},[e("Icon",{attrs:{type:"md-key"}}),t._v(" "+t._s(t.$t("signup.form.username")))],1),e("Input",{attrs:{placeholder:"",disabled:""},model:{value:t.formItem.username,callback:function(e){t.$set(t.formItem,"username",e)},expression:"formItem.username"}},[e("a",{attrs:{slot:"append"},on:{click:function(e){t.modal_setusername.show=!t.modal_setusername.show}},slot:"append"},[e("Icon",{attrs:{type:"md-create",size:"15"}})],1)])],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",[e("div",{attrs:{slot:"label"},slot:"label"},[e("Icon",{attrs:{type:"md-lock"}}),t._v(" "+t._s(t.$t("signup.form.password")))],1),e("Input",{attrs:{disabled:"",type:"password"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}},[e("a",{attrs:{slot:"append"},on:{click:function(e){t.modal_changePassword.show=!t.modal_changePassword.show}},slot:"append"},[e("Icon",{attrs:{type:"md-create",size:"15"}})],1)])],1)],1),e("Col",{attrs:{span:"12"}},[e("Card",{attrs:{"dis-hover":""}},[e("FormItem",{attrs:{label:t.$t("account.joinedAt")}},[e("Tag",[e("Time",{attrs:{time:t.formItem.joinTime||(new Date).getTime()}})],1)],1)],1)],1),e("Col",{attrs:{span:"12"}},[e("Card",{attrs:{"dis-hover":""}},[e("FormItem",{attrs:{label:t.$t("account.lastOnlineTime")}},[e("Tag",[e("Time",{attrs:{time:t.formItem.lastOnlineTime||(new Date).getTime()}})],1)],1)],1)],1)],1),e("Divider",{attrs:{dashed:""}}),e("FormItem",{attrs:{label:t.$t("profile.account.form.introduction")}},[e("Card",{attrs:{"dis-hover":"",padding:0}},[e("Textarea",{attrs:{toolbar:[[{list:"ordered"},{list:"bullet"}],["bold"]],height:"200px"},model:{value:t.formItem.introduction,callback:function(e){t.$set(t.formItem,"introduction",e)},expression:"formItem.introduction"}})],1)],1),e("Divider",{attrs:{dashed:""}}),null==t.formItem.origin.originName||null==t.formItem.origin.originUserId?[e("Alert",{attrs:{"show-icon":"",type:"error"}},[t._v(" "+t._s(t.$t("account.bindOrigin.title"))+" "),e("Icon",{attrs:{slot:"icon",type:"ios-bulb-outline"},slot:"icon"}),e("template",{slot:"desc"},[e("p",[t._v(t._s(t.$t("account.bindOrigin.content")))]),e("br"),e("router-link",{attrs:{to:"/bindOrigin"}},[e("Button",[t._v(t._s(t.$t("account.bindOrigin.travel")))])],1)],1)],2)]:[e("Row",{attrs:{gutter:30}},[e("Col",{attrs:{flex:"1"}},[e("FormItem",{attrs:{label:t.$t("signup.form.originEmail")}},[e("Input",{attrs:{type:"text",disabled:"",autosize:{minRows:2,maxRows:5},placeholder:""},model:{value:t.formItem.origin.originName,callback:function(e){t.$set(t.formItem.origin,"originName",e)},expression:"formItem.origin.originName"}})],1)],1),e("Col",{attrs:{flex:"1"}},[e("FormItem",{attrs:{label:t.$t("signup.form.originName")}},[e("Input",{attrs:{type:"text",disabled:"",autosize:{minRows:2,maxRows:5},placeholder:""},model:{value:t.formItem.origin.originUserId,callback:function(e){t.$set(t.formItem.origin,"originUserId",e)},expression:"formItem.origin.originUserId"}})],1)],1)],1)],e("Divider",{attrs:{dashed:""}}),e("Row",{attrs:{gutter:30}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:t.$t("profile.account.form.language")}},[e("Select",{staticClass:"switch-language",attrs:{prefix:"md-globe",placement:"top-end"},on:{"on-change":t.switchLanguage},model:{value:t.formItem.attr.language,callback:function(e){t.$set(t.formItem.attr,"language",e)},expression:"formItem.attr.language"}},t._l(t.languages,(function(s){return e("Option",{key:s.name,attrs:{value:s.name}},[t._v(t._s(s.label))])})),1),e("Alert",{attrs:{"show-icon":""}},[t._v(t._s(t.$t("profile.account.form.languageSyncDescribe")))])],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:t.$t("profile.account.form.showOrigin")}},[e("Alert",{attrs:{"show-icon":""}},[t._v(t._s(t.$t("profile.account.form.showOriginDescribe")))]),e("i-switch",{model:{value:t.formItem.attr.showOrigin,callback:function(e){t.$set(t.formItem.attr,"showOrigin",e)},expression:"formItem.attr.showOrigin"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:t.$t("profile.account.form.allowDM")}},[e("Alert",{attrs:{"show-icon":""}},[t._v(t._s(t.$t("profile.account.form.allowDMdescribe")))]),e("i-switch",{model:{value:t.formItem.attr.allowDM,callback:function(e){t.$set(t.formItem.attr,"allowDM",e)},expression:"formItem.attr.allowDM"}})],1)],1)],1),e("Affix",{attrs:{"offset-bottom":5}},[e("Card",{attrs:{padding:10}},[e("Row",[e("Col",{attrs:{flex:"1"}}),e("Col",[e("Button",{attrs:{type:"primary",loading:t.formLoad},on:{click:t.onSave}},[t._v(" "+t._s(t.$t("basic.button.save"))+" ")])],1)],1)],1)],1)],2),e("Modal",{on:{"on-cancel":function(e){t.modal_setusername.index=0}},model:{value:t.modal_setusername.show,callback:function(e){t.$set(t.modal_setusername,"show",e)},expression:"modal_setusername.show"}},[e("p",{attrs:{slot:"header"},slot:"header"},[e("Icon",{attrs:{type:"ios-information-circle"}}),e("span",[t._v(t._s(t.$t("profile.account.modifyName.title")))])],1),e("div",[e("Steps",{attrs:{current:t.modal_setusername.index,size:"small"}},[e("Step",{attrs:{title:t.$t("profile.account.modifyName.steps[0].title")}}),e("Step",{attrs:{title:t.$t("profile.account.modifyName.steps[1].title")}}),e("Step",{attrs:{title:t.$t("profile.account.modifyName.steps[2].title")}})],1),e("Form",{ref:"formValidate",attrs:{"label-position":"top"}},[0==t.modal_setusername.index?e("div",[e("br"),e("Alert",{attrs:{type:"warning"}},[e("template",{slot:"desc"},[e("p",{domProps:{innerHTML:t._s(t.$t("profile.account.modifyName.specification1"))}}),e("p",[t._v(" "+t._s(t.$t("profile.account.modifyName.residueDegree",{changeNameLeft:t.formItem.attr.changeNameLeft||0}))+" ")]),e("br"),e("b",[t._v(" "+t._s(t.$t("profile.account.modifyName.specification2")))])])],2)],1):t._e(),1==t.modal_setusername.index?e("div",[e("br"),e("FormItem",{attrs:{label:t.$t("signup.form.username")}},[e("Input",{attrs:{size:"large",disabled:""},model:{value:t.formItem.username,callback:function(e){t.$set(t.formItem,"username",e)},expression:"formItem.username"}})],1),e("FormItem",{attrs:{label:t.$t("signup.form.newUsername")}},[e("Input",{attrs:{size:"large",placeholder:t.$t("signup.form.newUsername")},model:{value:t.formItem.newname,callback:function(e){t.$set(t.formItem,"newname",e)},expression:"formItem.newname"}})],1),e("FormItem",{attrs:{label:t.$t("captcha.title"),prop:"captcha"}},[e("Input",{attrs:{type:"text",size:"large",maxlength:"4",placeholder:t.$t("captcha.title")},model:{value:t.captchaUrl.value,callback:function(e){t.$set(t.captchaUrl,"value",e)},expression:"captchaUrl.value"}},[e("div",{staticClass:"captcha-input-append",attrs:{slot:"append",alt:t.$t("captcha.get")},slot:"append"},[e("Captcha",{ref:"captcha"})],1)])],1)],1):t._e(),2==t.modal_setusername.index?e("div",{attrs:{align:"center"}},[e("br"),e("Icon",{attrs:{type:"ios-cloud-done",size:"200",color:"#19be6b"}}),e("br")],1):t._e()])],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[t.modal_setusername.index>0&&t.modal_setusername.index<=1?e("Button",{attrs:{size:"large",disabled:""==t.formItem.newname,loading:t.modal_setusername.load},on:{click:function(e){t.modal_setusername.index=t.setUserName()}}},[t._v("下一步 ")]):t._e(),t.modal_setusername.index<=0?e("Button",{attrs:{type:"warning",size:"large",disabled:0==t.formItem.attr.changeNameLeft},on:{click:function(e){t.modal_setusername.index=1}}},[t._v("是的，更变账户名称 ")]):t._e()],1)]),e("Modal",{model:{value:t.modal_changePassword.show,callback:function(e){t.$set(t.modal_changePassword,"show",e)},expression:"modal_changePassword.show"}},[e("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("reset.title")))]),e("div",[e("Form",{ref:"formValidate",attrs:{"label-position":"top"}},[e("FormItem",{attrs:{label:t.$t("reset.form.oldPassword")}},[e("Input",{attrs:{placeholder:"******",minlength:"6"},model:{value:t.modal_changePassword.oldpassword,callback:function(e){t.$set(t.modal_changePassword,"oldpassword",e)},expression:"modal_changePassword.oldpassword"}})],1),e("FormItem",{attrs:{label:t.$t("reset.form.newPassword")}},[e("Input",{attrs:{placeholder:"******",minlength:"6"},model:{value:t.modal_changePassword.newpassword,callback:function(e){t.$set(t.modal_changePassword,"newpassword",e)},expression:"modal_changePassword.newpassword"}})],1),e("FormItem",{attrs:{label:t.$t("captcha.title"),prop:"captcha"}},[e("Input",{attrs:{type:"text",size:"large",maxlength:"4",placeholder:t.$t("captcha.title")},model:{value:t.captchaUrl.value,callback:function(e){t.$set(t.captchaUrl,"value",e)},expression:"captchaUrl.value"}},[e("div",{staticClass:"captcha-input-append",attrs:{slot:"append",alt:t.$t("captcha.get")},slot:"append"},[e("Captcha",{ref:"captcha"})],1)])],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{size:"large",disabled:!t.modal_changePassword.oldpassword&&!t.modal_changePassword.newpassword&&!t.captchaUrl.value,loading:t.modal_changePassword.load},on:{click:function(e){return t.handChangePassword()}}},[t._v(" "+t._s(t.$t("reset.title"))+" ")])],1)])],1)},x=[],I=s("5d71"),$=s("e7f8"),C={name:"account",data(){return{privileges:[],languages:[],formLoad:!1,modal_changePassword:{load:!1,show:!1,newpassword:"",oldpassword:""},modal_setusername:{load:!1,show:!1,index:0},captchaUrl:{value:"",content:""}}},components:{Textarea:I["a"],Captcha:$["a"]},created(){this.http=g["d"].call(this),this.ready()},methods:{async ready(){const t=await Promise.resolve().then(s.t.bind(null,"a7d7",3)),e=await Promise.resolve().then(s.t.bind(null,"7292",3));this.privileges=this.privileges.concat(e.child),this.languages=this.languages.concat(t.child)},handChangePassword(){const{newpassword:t="",oldpassword:e=""}=this.modal_changePassword;this.modal_changePassword.load=!0,this.http.post(g["b"]["user_changePassword"],{data:{data:{newpassword:t,oldpassword:e},encryptCaptcha:this.captchaUrl.hash,captcha:this.captchaUrl.value}}).then(t=>{const e=t.data;if(1===e.success)return this.$Message.success(e.message),this.$store.dispatch("signout").then(()=>{this.signout()}),this.modal_changePassword.show=!1,void this.$router.push({name:"signin"});this.$Message.error(e.message)}).finally(()=>{this.modal_changePassword.load=!1})},signout(){g["c"].post(g["b"]["account_signout"],{headers:{"x-access-token":this.$store.state.user.token}}).then(t=>{const e=t.data;1==e.success&&this.$router.push("/signin")})},switchLanguage(t){this.formItem.attr.language=t},setUserName(){this.modal_setusername.load=!0,this.formItem.newname&&this.http.post(g["b"]["user_changeName"],{data:{data:{newname:this.formItem.newname},encryptCaptcha:this.captchaUrl.hash,captcha:this.captchaUrl.value}}).then(t=>{const e=t.data;1===e.success?(this.modal_setusername.index+=1,this.getUserinfo(),this.$Message.success(e.code)):this.$Message.error(e.message)}).finally(()=>{this.modal_setusername.load=!1})},onSave(){const{introduction:t,attr:e={language:this.$root.$i18n.locale,showOrigin:!1,allowDM:!1}}=this.formItem;this.formLoad=!0,this.http.post(g["b"]["user_me"],{data:{data:{introduction:t,attr:e}}}).then(t=>{const e=t.data;1===e.success&&(e.data.attr.language&&this.$store.dispatch("setLang",e.data.attr.language),this.$Message.success(e.code))}).finally(()=>{this.formLoad=!1})},getUserinfo(){this.http.get(g["b"]["user_me"],{}).then(t=>{const e=t.data;1===e.success&&(this.$store.dispatch("setUserInfo",e.data),this.formItem=e.data)})}},computed:{formItem(){return Object.assign({introduction:"",password:"******",origin:{originName:"",originEmail:""},newname:"",username:"",attr:{language:""}},this.$store.state.$userinfo)},currentUser(){return this.$store.state.user||{token:""}}}},k=C,T=Object(c["a"])(k,y,x,!1,null,"cfc3d8b8",null),U=T.exports,L=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("Tabs",{attrs:{value:t.tagsName}},[e("TabPane",{attrs:{label:t.$t("profile.message.tabsList.itemName"),name:"message0"}},[e("Card",{attrs:{"dis-hover":"",padding:0}},[e("p",{attrs:{slot:"title"},slot:"title"}),e("div",{attrs:{slot:"extra"},slot:"extra"},[e("Button",{attrs:{size:"small",disabled:!t.selectWindow},on:{click:t.setMessageEdit}},[t._v(" "+t._s(t.$t("profile.message.control"))+" ")]),e("Divider",{attrs:{type:"vertical"}}),e("Button",{attrs:{type:"primary",size:"small",loading:t.messageLoad},on:{click:t.getMessage}},[t._v(" "+t._s(t.$t("profile.message.load"))+" ")])],1),t.messageList[t.selectWindow]?e("Row",[e("Col",{staticClass:"message-user"},[t._l(t.messageUser,(function(s,a){return e("div",{key:a},[e("Row",{staticClass:"message-user-item",style:"font-weight: "+(t.selectWindow==s.value?"bold":""),attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[e("Col",[t.messageList[s.type]?e("Badge",{attrs:{count:t.messageList[s.type]["num"]||0}},[e("Avatar",{attrs:{icon:"md-notifications"}})],1):e("Avatar",{attrs:{icon:"md-notifications"}},[t._v(" "+t._s(s.text[0])+" ")])],1),e("Col",{attrs:{flex:"1"}},[e("p",[e("b",[t._v(t._s(s.text.toString()))])])]),e("Col",[e("a",{on:{click:function(e){t.selectWindow=s.value}}},[t._v(t._s(t.$t("profile.message.look")))])])],1)],1)}))],2),e("Col",{staticClass:"message-content",attrs:{flex:"1"}},[t.control.open?e("Row",{staticClass:"message-content-control"},[e("Col",[e("Checkbox",{on:{"on-change":t.onBatchAll},model:{value:t.control.all,callback:function(e){t.$set(t.control,"all",e)},expression:"control.all"}}),e("Divider",{attrs:{type:"vertical"}})],1),e("Col",{attrs:{flex:"1"}},[e("Select",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:t.control.model,callback:function(e){t.$set(t.control,"model",e)},expression:"control.model"}},t._l(t.control.list,(function(s){return e("Option",{key:s.value,attrs:{value:s.value}},[t._v(" "+t._s(t.$t("profile.message.tabsList.form."+s.label))+" ")])})),1)],1),e("Col",[e("Button",{attrs:{size:"small",disabled:t.control.model<0,loading:t.control.load},on:{click:t.onBatchOperation}},[t._v(" "+t._s(t.$t("basic.button.submit"))+" ")])],1)],1):t._e(),t._l(t.messageList[t.selectWindow].child,(function(s,a){return e("div",{key:a,staticClass:"message-content-item"},[e("Row",{attrs:{gutter:18}},[t.control.open?e("Col",[e("Checkbox",{model:{value:s.choose,callback:function(e){t.$set(s,"choose",e)},expression:"child.choose"}})],1):t._e(),e("Col",[e("Avatar",{attrs:{src:"/assets/img/logo.75abcc53.png"}})],1),e("Col",{attrs:{flex:"1"}},[e("Row",[e("Col",{attrs:{flex:"1"}},[e("Time",{attrs:{time:s.time}})],1),e("Col",[0==s.haveRead?e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.onMessageMark(s.id,0)}}},[e("Icon",{attrs:{type:"md-eye",size:"20"}})],1):t._e(),e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.onMessageMark(s.id,2)}}},[e("Icon",{attrs:{type:"md-trash",color:"red",size:"20"}})],1)])],1),e("Card",{attrs:{"dis-hover":"",padding:5}},[t._v(t._s(s.content))])],1)],1),e("divider",{attrs:{size:"small"}})],1)})),"direct"==t.messageList[t.selectWindow].type?e("div",{staticClass:"message-content-footer"},[e("Button",{attrs:{long:"",type:"primary"}},[e("router-link",{attrs:{to:{path:"/account/"+t.selectWindow,query:{repeat:!0}}}},[e("Icon",{attrs:{type:"ios-send",size:"20"}})],1)],1)],1):t._e()],2)],1):[e("div",{staticClass:"message-content-not"},[t._v(t._s(t.$t("basic.tip.notcontent")))])]],2)],1),t.isAdmin?e("TabPane",{attrs:{label:t.$t("profile.message.tabsSend.itemName"),name:"message1"}},[e("Card",{attrs:{"dis-hover":""}},[e("Form",{attrs:{slot:"title",model:t.message,rules:t.message.ruleValidate},slot:"title"},[e("Row",{attrs:{gutter:30}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:t.$t("profile.message.tabsSend.messageMethod"),prop:"type"}},[e("Select",{attrs:{transfer:!0},model:{value:t.message.type,callback:function(e){t.$set(t.message,"type",e)},expression:"message.type"}},t._l(t.message.list,(function(s,a){return e("Option",{directives:[{name:"show",rawName:"v-show",value:s.privilege.filter(e=>t.currentUser.userinfo.privilege.includes(e)).length,expression:"item.privilege.filter(p => currentUser.userinfo.privilege.includes(p) ).length"}],key:a,attrs:{value:s.title,label:t.$t("profile.message.types."+s.title+".text")}},[t._v(" "+t._s(t.$t("profile.message.types."+s.title+".text"))+" "),e("p",{staticStyle:{margin:"5px 0","font-size":"10px"}},[t._v(" "+t._s(t.$t("profile.message.types."+s.title+".describe"))+" ")]),e("PrivilegesTag",{attrs:{data:s.privilege}})],1)})),1)],1)],1),t.message.typeDictionary.includes(t.message.type)?e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:t.$t("profile.message.tabsSend.messageID"),prop:"id"}},[e("AutoComplete",{attrs:{data:t.message.playerList,placeholder:t.$t("profile.message.tabsSend.messageID")},model:{value:t.message.id,callback:function(e){t.$set(t.message,"id",e)},expression:"message.id"}},t._l(t.message.playerList,(function(s,a){return e("Option",{key:a,attrs:{value:s.id}},[e("Avatar",{attrs:{src:s.avatarLink||""}},[t._v(t._s(s.username[0]))]),t._v("  "),e("span",[t._v(t._s(s.username))]),e("Tag",{staticStyle:{float:"right"}},[t._v(" "+t._s(s.id)+" ")])],1)})),1)],1)],1):t._e()],1),e("FormItem",{attrs:{label:t.$t("profile.message.tabsSend.content"),prop:"content"}},[e("Input",{attrs:{"show-word-limit":"",type:"textarea",placeholder:t.$t("profile.message.placeholder"),maxlength:1e3,autosize:{minRows:5,maxRows:10}},model:{value:t.message.content,callback:function(e){t.$set(t.message,"content",e)},expression:"message.content"}})],1)],1),e("Row",{attrs:{gutter:10}},[e("Col",{attrs:{flex:"1"}}),e("Col",[e("Button",{attrs:{type:"primary",loading:t.message.load,disabled:!t.message.type||!t.message.content},on:{click:t.putMessage}},[t._v(t._s(t.$t("basic.button.commit")))])],1)],1)],1)],1):t._e()],1)],1)},P=[],z=s("890e"),M=s("195a"),N=new z["a"]({name:"message",data(){return{that:this,tagsName:"message0",messageLoad:!1,selectWindow:"",message:{list:M.sendTypes,typeDictionary:M.typeDictionary,ruleValidate:{type:[{required:!0,trigger:"blur"}],id:[{required:!0,trigger:"blur"}],content:[{required:!0,trigger:"blur"}]},messages:[],playerList:[],show:!1,load:!1,type:"",id:"",content:""},messageUser:[],messageList:{},control:{load:!1,open:!1,all:!1,model:-1,list:[{value:0,label:"read"},{value:2,label:"del"}]}}},components:{PrivilegesTag:u["a"]},watch:{$route:"loadData"},created(){this.http=g["d"].call(this),this.loadData()},methods:{async loadData(){await this.getMessage(),this.message.type=this.message.list[0].title,this.messageUser.length>0&&(this.selectWindow=this.messageUser[0].value)},resetMessageFrom(){this.message.id="",this.message.content="",this.message.type=this.message.list[0].title},onBatchAll(){this.messageList[this.selectWindow].child.forEach(t=>{t.choose=this.control.all})},onBatchOperation(){let t=[];this.messageList[this.selectWindow].child.forEach(e=>{if(e.choose)switch(this.control.model){case 0:0==e.haveRead&&t.push(this.onMessageMark(e.id,this.control.model));break;case 1:t.push(this.onMessageMark(e.id,this.control.model));break}}),this.control.load=!0,new Promise.all(t,()=>{}).finally(()=>{this.control.load=!1})},async onMessageMark(t,e){await this.http.post(g["b"]["user_message_mark"],{params:{id:t,type:["read","unread","del"][e]}}),this.getMessage()},getPlayerList(t){this.message.load=!0,this.message.playerList=[],t.length<=2||"number"==typeof t||g["c"].get(g["b"]["users"],{params:{param:t.trim()}}).then(t=>{const e=t.data;1==e.success&&(this.message.playerList=e.data),this.message.load=!1})},putMessage(){const{uId:t}=this.$route.params;this.http.post(g["b"]["user_message"],{data:{data:{toUserId:this.message.id||t,type:this.message.type,content:this.message.content}}}).then(t=>{1==t.data.success?this.$Message.success(t.data.message):this.$Message.error(t.data.message)}).finally(()=>{this.resetMessageFrom(),this.message.load=!1,this.message.show=!1})},setMessageEdit(){this.control.open=!this.control.open},async getMessage(){return this.messageLoad=!0,await this.http.get(g["b"]["user_message"]).then(t=>{const e=t.data;if(1==e.success){this.message.messages=e.data.messages;let t=[],s={};e.data.messages.forEach(e=>{let a=0;switch(e.type){case"warn":t.forEach(t=>{t.type==e.type&&(a+=1)}),a<=0&&t.push({text:"@"+this.$i18n.t("profile.message.types."+e.type),value:e.type,type:e.type});break;case"reply":case"direct":t.forEach(t=>{t.value==e.byUserId&&(a+=1)}),a<=0&&t.push({text:e.byUserId,value:e.byUserId,type:e.type});break}let i="warn"==e.type?e.type:e.byUserId;s[i]||(s[i]={child:[],num:0}),s[i].child.push(Object.assign({time:e.createTime,content:e.content,choose:!1},e)),s[i].type=e.type,s[i].num=s[i].child.length||0}),this.messageList=s,this.messageUser=t}}).finally(()=>{this.messageLoad=!1}),!0}},computed:{isAdmin(){const t=this.$store.state.user,e=!!t&&t.userinfo.privilege.concat("").includes("admin");return Boolean(e)},currentUser(){return this.$store.state.user}}}),O=N,D=(s("5052"),Object(c["a"])(O,L,P,!1,null,"008e5dfc",null)),S=D.exports,R=function(){var t=this,e=t._self._c;return e("div",t._l(t.enhance,(function(s,a){return e("div",{key:a},[e("Card",[e("Row",[e("Col",{attrs:{flex:"auto"}},[e("h1",[t._v(t._s(s.name))]),e("p",[t._v(t._s(s.dis))])]),e("Col",[e("i-switch",{attrs:{disabled:""},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"i.value"}})],1)],1)],1),e("br")],1)})),0)},B=[],A={data(){return{enhance:[{name:"底部工具栏",dis:"网站顶部附属的工具栏，为用户提供玩家持续关注等功能",value:!1},{name:"未处理提醒",dis:"为管理员提供自动刷新，关注未处理玩家做出站内提醒",value:!1},{name:"桌面通知",dis:"需要安装客户端，桌面级提醒通知",value:!1},{name:"多标签举报",dis:"允许同页面上，创建多个举报表单",value:!0},{name:"同步语言",dis:"个人信息的语言同步客户端",value:!1},{name:"游览标记",dis:"记录访问过玩家，并在列表中标记它，如果同时启动[未处理提醒]会标记自动刷新出现的新玩家",value:!1},{name:"历史",dis:"记录访问过玩家，在历史列表中可以再次访问",value:!1},{name:"交互声音",dis:"不同交互提供不同的声音",value:!1}]}}},F=A,j=Object(c["a"])(F,R,B,!1,null,null,null),E=j.exports,W=s("1770"),H=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"list"},t._l(t.list,(function(s,a){return e("div",{key:s.originUserId,staticClass:"item-card"},[e("Badge",{staticStyle:{width:"100%"},attrs:{text:s.viewNum>100&&s.commentsNum>10?"hot":""}},[e("Card",{attrs:{"dis-hover":"",padding:10}},[e("Row",{attrs:{gutter:10,type:"flex"}},[e("Col",{attrs:{xs:{span:8,push:0,pull:0},lg:{span:3,push:0,pull:0}}},[s.avatarLink?e("Avatar",{attrs:{src:s.avatarLink,alt:"avatar",size:"55"},on:{"on-error":function(e){return t.onAvatarError(a)}}}):[e("Avatar",{staticStyle:{"background-color":"rgba(255,0,0,0.37)"},attrs:{icon:"ios-person",size:"55"}})]],2),e("Col",{attrs:{xs:{span:17,push:0,pull:0},lg:{span:17,push:0,pull:0}}},[e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("Tooltip",{attrs:{content:t.$t("list.colums.playerId")}},[e("h2",[e("router-link",{style:""==s.avatarLink?"color: rgba(255,0,0,1);text-decoration: line-through;":"",attrs:{to:{name:"player",params:{ouid:""+s.originPersonaId}}}},[t._v(" "+t._s(s.originName)+" ")]),e("Button",{attrs:{size:"small",type:"text",icon:"ios-copy-outline","data-clipboard-text":s.originId}})],1)])],1),e("div",[t._v(" "+t._s(t.$t("list.colums.reportTime"))+" "),s.createTime?e("Time",{attrs:{time:s.createTime}}):t._e(),e("Divider",{attrs:{type:"vertical"}}),t._v(" "+t._s(t.$t("list.colums.updateTime"))+" "),s.updateTime?e("Time",{attrs:{time:s.updateTime}}):t._e()],1)]),e("Col",{staticClass:"mobile-hide",attrs:{xs:{span:24,push:0,pull:0},lg:{span:3,push:0,pull:0}}},[e("Row",{staticStyle:{height:"100%"},attrs:{type:"flex",justify:"end",align:"middle"}},[e("Col",{staticClass:"item-text",attrs:{flex:"auto",align:"right"}},[e("span",[t._v(t._s(s.viewNum||0))]),e("Icon",{staticClass:"item-icon",attrs:{type:"md-eye",size:"17"}})],1),e("Col",{staticClass:"item-text",attrs:{flex:"auto",align:"right"}},[e("span",[t._v(t._s(s.commentsNum||0))]),e("Icon",{staticClass:"item-icon",attrs:{type:"md-chatboxes",size:"17"}})],1)],1)],1),e("Col",{staticClass:"mobile-hide",attrs:{xs:{span:24,push:0,pull:0},lg:{span:1,push:0,pull:0},align:"center"}},[e("Progress",{attrs:{vertical:"",percent:1==s.status?99:100,"hide-info":"",status:"wrong"}})],1)],1)],1)],1)],1)})),0),t.list.length<=0?e("div",[t._v(t._s(t.$t("basic.tip.notcontent")))]):t._e()])},q=[],V={data(){return{list:[]}},created(){this.http=g["d"].call(this),this.getHisory()},methods:{async getHisory(){let t=g["f"].get("viewed");if(t.code>=0)for(const e in t.data.value){let t=await this.getCheatersInfo(e);1==t.data.success&&this.list.push(t.data.data)}},async getCheatersInfo(t){return this.cheater={},await this.http.get(g["b"]["cheaters"],{params:Object.assign({history:!0},{dbId:t})})}}},J=V,G=(s("9990"),Object(c["a"])(J,H,q,!1,null,"7362dbc1",null)),K=G.exports,Q=function(){var t=this,e=t._self._c;return e("div",[e("Row",[e("Col",{attrs:{flex:"1"}},[t._v(" "+t._s(t.list.length)+" / 100 ")]),e("Col")],1),e("div",{staticClass:"list"},t._l(t.list,(function(s,a){return e("div",{key:s.originUserId,staticClass:"item-card"},[e("Badge",{staticStyle:{width:"100%"},attrs:{text:s.viewNum>100&&s.commentsNum>10?"hot":""}},[e("Card",{attrs:{"dis-hover":"",padding:10}},[e("Row",{attrs:{gutter:10,type:"flex"}},[e("Col",{attrs:{xs:{span:8,push:0,pull:0},lg:{span:3,push:0,pull:0}}},[s.avatarLink?e("Avatar",{attrs:{src:s.avatarLink,alt:"avatar",size:"55"},on:{"on-error":function(e){return t.onAvatarError(a)}}}):[e("Avatar",{staticStyle:{"background-color":"rgba(255,0,0,0.37)"},attrs:{icon:"ios-person",size:"55"}})]],2),e("Col",{attrs:{xs:{span:17,push:0,pull:0},lg:{span:17,push:0,pull:0}}},[e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("Tooltip",{attrs:{content:t.$t("list.colums.playerId")}},[e("h2",[e("router-link",{style:""==s.avatarLink?"color: rgba(255,0,0,1);text-decoration: line-through;":"",attrs:{to:{name:"player",params:{ouid:""+s.originPersonaId}}}},[t._v(" "+t._s(s.originName)+" ")]),e("Button",{attrs:{size:"small",type:"text",icon:"ios-copy-outline","data-clipboard-text":s.originId}})],1)])],1),e("div",[t._v(" "+t._s(t.$t("list.colums.reportTime"))+" "),s.createTime?e("Time",{attrs:{time:s.createTime}}):t._e(),e("Divider",{attrs:{type:"vertical"}}),t._v(" "+t._s(t.$t("list.colums.updateTime"))+" "),s.updateTime?e("Time",{attrs:{time:s.updateTime}}):t._e()],1)]),e("Col",{staticClass:"mobile-hide",attrs:{xs:{span:24,push:0,pull:0},lg:{span:3,push:0,pull:0}}},[e("Row",{staticStyle:{height:"100%"},attrs:{type:"flex",justify:"end",align:"middle"}},[e("Col",{staticClass:"item-text",attrs:{flex:"auto",align:"right"}},[e("span",[t._v(t._s(s.viewNum||0))]),e("Icon",{staticClass:"item-icon",attrs:{type:"md-eye",size:"17"}})],1),e("Col",{staticClass:"item-text",attrs:{flex:"auto",align:"right"}},[e("span",[t._v(t._s(s.commentsNum||0))]),e("Icon",{staticClass:"item-icon",attrs:{type:"md-chatboxes",size:"17"}})],1)],1)],1),e("Col",{staticClass:"mobile-hide",attrs:{xs:{span:24,push:0,pull:0},lg:{span:1,push:0,pull:0},align:"center"}},[e("Progress",{attrs:{vertical:"",percent:1==s.status?99:100,"hide-info":"",status:"wrong"}})],1)],1)],1)],1)],1)})),0),t.list.length<=0?e("div",[t._v(t._s(t.$t("basic.tip.notcontent")))]):t._e()],1)},X=[],Y={data(){return{list:[]}},created(){this.http=g["d"].call(this),this.getSubscribes()},methods:{getSubscribes(){let t=g["f"].get("user.subscribes");t.code>=0&&t.data.value.forEach(async t=>{let e=await this.getCheatersInfo(t);1==e.data.success&&this.list.push(e.data.data)})},async getCheatersInfo(t){return this.cheater={},await this.http.get(g["b"]["cheaters"],{params:Object.assign({history:!0},{dbId:t})})}}},Z=Y,tt=(s("9de4"),Object(c["a"])(Z,Q,X,!1,null,"d9dbd918",null)),et=tt.exports,st={name:"profile",data(){return{privileges:[],muenIndex:0,muen:[{title:"account",value:"0"},{title:"appearance",value:"1"},{title:"message",value:"2"},{title:"enhance",value:"3"},{title:"media",value:"4"},{title:"history",value:"5"},{title:"subscribes",value:"6"}]}},components:{Bulletin:m,appearance:w,account:U,message:S,enhance:E,media:W["a"],history:K,subscribes:et,PrivilegesTag:u["a"]},created(){const t=this.$route.params.pagename;if(void 0==t)return void this.upDateUri(0,!0);let e=this.muen.filter(e=>e.title.toLocaleLowerCase()==t)[0].value;this.upDateUri(e||this.muenIndex)},methods:{upDateUri(t,e=!1){this.muenIndex=t,this.$router.push({path:(e?"profile/":"")+this.muen[t].title.toLowerCase()})}},computed:{isLogin(){return Boolean(this.$store.state.user)},isAdmin(){const t=this.$store.state.user,e=!!t&&t.userinfo.privilege.concat("").includes("admin");return Boolean(e)},currentUser(){return this.$store.state.user}}},at=st,it=Object(c["a"])(at,a,i,!1,null,"c6a67454",null);e["default"]=it.exports},9990:function(t,e,s){"use strict";s("499e")},"9de4":function(t,e,s){"use strict";s("d60b")},ae97:function(t,e,s){},c72a:function(t,e,s){"use strict";s("2b11")},d60b:function(t,e,s){},e7f8:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"captcha-view",style:`cursor: ${t.captchaTime.count<=0?"pointer":"not-allowed"};height: ${t.height}`,on:{click:t.refreshCaptcha}},[t.content?e("div",{class:""+(t.captchaTime.count<=0?"disable":""),domProps:{innerHTML:t._s(t.content)}}):e("span",{staticClass:"tip"},[t.disable?e("div",{staticStyle:{"min-width":"80px"}},[e("Icon",{attrs:{type:"md-close",size:"20"}})],1):[t._v(" "+t._s(t.$t("captcha.get"))+" ")]],2),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.content&&t.captchaTime.count<=0,expression:"content && captchaTime.count <= 0"}],staticClass:"captcha-view-icon"},[t.disable?e("Icon",{attrs:{type:"md-close",size:"20"}}):e("Icon",{attrs:{type:"md-refresh",size:"20"}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.captchaTime.count>0,expression:"captchaTime.count > 0"}],staticClass:"count"},[t._v(t._s(t.captchaTime.count)+"s")])],1)},i=[],r=s("e4b4"),o={name:"Captcha",props:{id:{type:String,default:"0"},disable:{type:Boolean,default:!1},seconds:{type:Number,default:60},height:{type:String,default:"40px"}},data(){return{postload:!1,hash:"",content:"",capthcaHash:{},captchaTime:{fun:null,count:0,lock:!1}}},created(){let t=r["f"].session().get("captcha");t?this.capthcaHash=t.data:r["f"].session().set("captcha",{[`${this.id}_${this.$route.name}`]:this.seconds})},destroyed(){clearInterval(this.captchaTime.fun),this.captchaTime.fun=null},methods:{async refreshCaptcha(){let t=await r["f"].session().get("captcha"),e=this;t.code<=0&&(t={data:{value:this.seconds}}),this.disable||this.postload||this.captchaTime.count>0||(this.postload=!0,r["c"].get(r["b"]["captcha"],{params:{t:Math.random()}}).then(t=>{1===t.data.success&&(e.capthcaHash=Object.assign({[e.$route.name]:0}),this.hash=t.data.data["hash"],this.content=t.data.data["content"])}).finally(s=>{setTimeout((function(){e.postload=!1}),800),Object.keys(t.data.value).indexOf(this.$route.name)>=0&&(this.captchaTime.count=t.data.value[this.$route.name]),this.capthcaTimeout(this.captchaTime.count||this.seconds)}))},capthcaTimeout(t){const e=this;let s;e.captchaTime.lock||(e.captchaTime.count=t,s=setInterval((function(){if(e.captchaTime.count<=0)return clearInterval(s),void(e.captchaTime.lock=!1);e.captchaTime.count-=1,e.capthcaHash=Object.assign({[`${e.id}_${e.$route.name}`]:e.captchaTime.count}),r["f"].session().set("captcha",e.capthcaHash)}),1e3),e.captchaTime.lock=!0)}},computed:{isCaptcha(){return this.hash&&this.content}}},n=o,l=(s("c72a"),s("2877")),c=Object(l["a"])(n,a,i,!1,null,null,null);e["a"]=c.exports},f4e8:function(t,e,s){"use strict";s("ae97")},f89a:function(t,e,s){}}]);
//# sourceMappingURL=chunk-4f59ae77.2.0.2.js.map