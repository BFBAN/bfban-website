{"version":3,"sources":["webpack:///./src/views/forgetPassword.vue","webpack:///src/views/forgetPassword.vue","webpack:///./src/views/forgetPassword.vue?4588","webpack:///./src/views/forgetPassword.vue?52a8","webpack:///./src/components/EmailTip.vue","webpack:///src/components/EmailTip.vue","webpack:///./src/components/EmailTip.vue?f94a","webpack:///./src/components/EmailTip.vue?3e5f","webpack:///./src/components/Captcha.vue","webpack:///src/components/Captcha.vue","webpack:///./src/components/Captcha.vue?68b1","webpack:///./src/components/Captcha.vue?a78d","webpack:///./src/components/Captcha.vue?c904"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","push","name","_v","_s","$t","stepsIndex","ref","staticStyle","ruleValidate","model","value","forgetPassword","username","callback","$$v","$set","expression","originEmail","_e","captcha","slot","password","button","prev","prevShow","on","$event","preventDefault","stopPropagation","onStepsIndex","next","nextShow","submit","spinShow","onSubmit","apply","arguments","staticRenderFns","data","verify","load","components","EmailTip","Captcha","created","code","methods","forgetPasswordVerify","http","newpassword","then","res","catch","e","msg","finally","onForgetPassword","encryptCaptcha","language","computed","currentUser","token","component","$","props","email","style","captchaTime","count","height","refreshCaptcha","content","class","domProps","disable","directives","rawName","id","type","default","seconds","postload","hash","capthcaHash","fun","lock","storage","destroyed","clearInterval","params","t","that","setTimeout","capthcaTimeout","isCaptcha"],"mappings":"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","file":"assets/js/chunk-ea56d2c2.2.7.0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"content\"},[_c('br'),_c('Row',[_c('Col',{attrs:{\"xs\":{push: 1},\"lg\":{push: 0}}},[_c('Breadcrumb',[_c('BreadcrumbItem',{attrs:{\"to\":{name: 'home'}}},[_vm._v(_vm._s(_vm.$t(\"header.index\")))]),_c('BreadcrumbItem',[_vm._v(_vm._s(_vm.$t(\"forgetPassword.title\")))])],1)],1)],1),_c('br'),_c('Row',[_c('Col',{attrs:{\"span\":\"24\"}},[_c('Card',{attrs:{\"shadow\":\"\"}},[_c('Steps',{attrs:{\"current\":_vm.stepsIndex}},[_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[0].title'),\"content\":_vm.$t('signup.steps[0].title')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[1].title'),\"content\":_vm.$t('signup.steps[1].title')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[2].title'),\"content\":_vm.$t('signup.steps[2].title')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[3].title'),\"content\":_vm.$t('signup.steps[3].title')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[4].title'),\"content\":_vm.$t('signup.steps[4].title')}})],1),_c('Divider',{attrs:{\"dashed\":\"\"}}),_c('Card',{attrs:{\"dis-hover\":\"\",\"padding\":50}},[_c('Form',{ref:\"formValidate\",staticStyle:{\"position\":\"relative\"},attrs:{\"label-position\":\"top\",\"rules\":_vm.ruleValidate}},[(_vm.stepsIndex == 0)?_c('div',[_c('FormItem',{attrs:{\"label\":_vm.$t('signup.form.username'),\"prop\":\"username\"}},[_c('Input',{attrs:{\"size\":\"large\",\"placeholder\":_vm.$t('signup.placeholder.username')},model:{value:(_vm.forgetPassword.username),callback:function ($$v) {_vm.$set(_vm.forgetPassword, \"username\", $$v)},expression:\"forgetPassword.username\"}})],1),_c('FormItem',{attrs:{\"label\":_vm.$t('signup.form.originEmail'),\"prop\":\"originEmail\"}},[_c('Input',{attrs:{\"size\":\"large\",\"placeholder\":_vm.$t('signup.placeholder.originEmail')},model:{value:(_vm.forgetPassword.originEmail),callback:function ($$v) {_vm.$set(_vm.forgetPassword, \"originEmail\", $$v)},expression:\"forgetPassword.originEmail\"}})],1)],1):_vm._e(),(_vm.stepsIndex == 1)?_c('FormItem',{attrs:{\"label\":_vm.$t('captcha.title')}},[_c('Input',{attrs:{\"type\":\"text\",\"size\":\"large\",\"maxlength\":\"4\",\"placeholder\":_vm.$t('captcha.title')},model:{value:(_vm.forgetPassword.captcha),callback:function ($$v) {_vm.$set(_vm.forgetPassword, \"captcha\", $$v)},expression:\"forgetPassword.captcha\"}},[_c('div',{staticClass:\"captcha-input-append\",attrs:{\"slot\":\"append\"},slot:\"append\"},[_c('Captcha',{ref:\"captcha\"})],1)])],1):_vm._e(),(_vm.stepsIndex == 2)?_c('div',[_c('EmailTip',{attrs:{\"email\":_vm.forgetPassword.originEmail}})],1):_vm._e(),(_vm.stepsIndex == 3)?_c('div',[_c('FormItem',{attrs:{\"label\":_vm.$t('signup.form.password'),\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"password\":\"\",\"minlength\":\"6\",\"size\":\"large\",\"placeholder\":_vm.$t('signup.placeholder.password')},model:{value:(_vm.forgetPassword.password),callback:function ($$v) {_vm.$set(_vm.forgetPassword, \"password\", $$v)},expression:\"forgetPassword.password\"}})],1)],1):_vm._e(),(_vm.stepsIndex == 4)?_c('div',{attrs:{\"align\":\"center\"}},[_c('h1',[_vm._v(_vm._s(_vm.$t('forgetPassword.resetSuccess')))])]):_vm._e(),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[(_vm.button.prev)?_c('Button',{attrs:{\"disabled\":_vm.button.prevShow,\"size\":\"large\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stepsIndex--; _vm.onStepsIndex();}}},[_vm._v(_vm._s(_vm.$t('basic.button.prev'))+\" \")]):_vm._e(),_c('Divider',{attrs:{\"type\":\"vertical\"}}),(_vm.button.next)?_c('Button',{attrs:{\"disabled\":_vm.button.nextShow,\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stepsIndex++; _vm.onStepsIndex();}}},[_vm._v(_vm._s(_vm.$t('basic.button.next'))+\" \")]):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\",\"align\":\"right\",\"type\":\"flex\"}},[(_vm.button.submit)?_c('Button',{attrs:{\"long\":\"\",\"disabled\":_vm.forgetPassword.captcha == '',\"loading\":_vm.spinShow,\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onSubmit.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t('basic.button.submit'))+\" \")]):_vm._e()],1)],1)],1)],1)],1)],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"content\">\n      <br>\n      <Row>\n        <Col :xs=\"{push: 1}\" :lg=\"{push: 0}\">\n          <Breadcrumb>\n            <BreadcrumbItem :to=\"{name: 'home'}\">{{ $t(\"header.index\") }}</BreadcrumbItem>\n            <BreadcrumbItem>{{ $t(\"forgetPassword.title\") }}</BreadcrumbItem>\n          </Breadcrumb>\n        </Col>\n      </Row>\n      <br>\n\n      <Row>\n        <Col span=\"24\">\n          <Card shadow>\n            <Steps :current=\"stepsIndex\">\n              <Step :title=\"$t('signup.steps[0].title')\" :content=\"$t('signup.steps[0].title')\"></Step>\n              <Step :title=\"$t('signup.steps[1].title')\" :content=\"$t('signup.steps[1].title')\"></Step>\n              <Step :title=\"$t('signup.steps[2].title')\" :content=\"$t('signup.steps[2].title')\"></Step>\n              <Step :title=\"$t('signup.steps[3].title')\" :content=\"$t('signup.steps[3].title')\"></Step>\n              <Step :title=\"$t('signup.steps[4].title')\" :content=\"$t('signup.steps[4].title')\"></Step>\n            </Steps>\n\n            <Divider dashed></Divider>\n\n            <Card dis-hover :padding=\"50\">\n              <Form ref=\"formValidate\" label-position=\"top\" :rules=\"ruleValidate\" style=\"position: relative;\">\n                <div v-if=\"stepsIndex == 0\">\n                  <FormItem :label=\"$t('signup.form.username')\" prop=\"username\">\n                    <Input v-model=\"forgetPassword.username\" size=\"large\" :placeholder=\"$t('signup.placeholder.username')\"/>\n                  </FormItem>\n                  <FormItem :label=\"$t('signup.form.originEmail')\" prop=\"originEmail\">\n                    <Input v-model=\"forgetPassword.originEmail\" size=\"large\" :placeholder=\"$t('signup.placeholder.originEmail')\"/>\n                  </FormItem>\n                </div>\n\n                <FormItem v-if=\"stepsIndex == 1\" :label=\"$t('captcha.title')\">\n                  <Input type=\"text\" v-model=\"forgetPassword.captcha\"\n                         size=\"large\"\n                         maxlength=\"4\"\n                         :placeholder=\"$t('captcha.title')\">\n                    <div slot=\"append\" class=\"captcha-input-append\">\n                      <Captcha ref=\"captcha\"></Captcha>\n                    </div>\n                  </Input>\n                </FormItem>\n\n                <div v-if=\"stepsIndex == 2\">\n                  <EmailTip :email=\"forgetPassword.originEmail\"></EmailTip>\n                </div>\n\n                <div v-if=\"stepsIndex == 3\">\n                  <FormItem :label=\"$t('signup.form.password')\" prop=\"password\">\n                    <Input type=\"password\" password minlength=\"6\" v-model=\"forgetPassword.password\" size=\"large\"\n                           :placeholder=\"$t('signup.placeholder.password')\"/>\n                  </FormItem>\n                </div>\n\n                <!-- 重置成功 S -->\n                <div v-if=\"stepsIndex == 4\" align=\"center\">\n                  <h1>{{ $t('forgetPassword.resetSuccess') }}</h1>\n                </div>\n                <!-- 重置成功 E -->\n\n                <Row>\n                  <Col span=\"12\">\n                    <Button v-if=\"button.prev\"\n                            :disabled=\"button.prevShow\"\n                            @click.prevent.stop=\"stepsIndex--; onStepsIndex();\" size=\"large\">{{ $t('basic.button.prev') }}\n                    </Button>\n                    <Divider type=\"vertical\"/>\n                    <Button v-if=\"button.next\"\n                            :disabled=\"button.nextShow\"\n                            @click.prevent.stop=\"stepsIndex++; onStepsIndex();\" size=\"large\"\n                            type=\"primary\">{{ $t('basic.button.next') }}\n                    </Button>\n                  </Col>\n                  <Col span=\"12\" align=\"right\" type=\"flex\">\n                    <Button v-if=\"button.submit\"\n                            long\n                            @click.prevent.stop=\"onSubmit\"\n                            :disabled=\"forgetPassword.captcha == ''\"\n                            :loading=\"spinShow\"\n                            size=\"large\" type=\"primary\">\n                      {{ $t('basic.button.submit') }}\n                    </Button>\n                  </Col>\n                </Row>\n              </Form>\n            </Card>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BFBAN from \"../assets/js/bfban\";\nimport {http, api, conf, mail} from '../assets/js/index'\nimport EmailTip from \"../components/EmailTip\";\nimport Captcha from \"../components/Captcha\";\n\nexport default new BFBAN({\n  name: 'forgetPassword',\n  data() {\n    return {\n      button: {\n        next: true,\n        nextShow: false,\n        prev: true,\n        prevShow: true,\n        submit: false\n      },\n      stepsIndex: 0,\n      ruleValidate: {},\n      forgetPassword: {\n        username: '',\n        originEmail: '',\n        password: '',\n      },\n      spinShow: false,\n\n      verify: {\n        load: 0,\n      },\n    }\n  },\n  components: {EmailTip, Captcha},\n  created() {\n    const {code} = this.$route.query;\n    if (code) {\n      this.stepsIndex = 3;\n      this.onStepsIndex();\n    }\n  },\n  methods: {\n    onStepsIndex () {\n      let stepsIndex = this.stepsIndex;\n      this.button.submit = false;\n\n      switch (stepsIndex) {\n        case 0:\n          this.button.prev = true;\n          this.button.prevShow = true;\n          this.button.next = true;\n          break;\n        case 1:\n          this.button.prev = true;\n          this.button.prevShow = false;\n          this.button.next = false;\n          this.button.submit = true;\n          break;\n        case 2:\n          this.button.prev = false;\n          this.button.next = false;\n          break;\n        case 3:\n          this.button.prev = false;\n          this.button.next = false;\n          this.button.submit = true;\n          break;\n        case 4:\n          this.button = {};\n          break;\n      }\n\n      return this.stepsIndex;\n    },\n\n    /**\n     * 提交\n     */\n    onSubmit () {\n      switch (this.stepsIndex) {\n        case 1:\n          this.onForgetPassword();\n          break;\n        case 3:\n          this.forgetPasswordVerify();\n          break;\n      }\n    },\n\n    /**\n     * 重置密码 key验证\n     * @param code\n     */\n    forgetPasswordVerify() {\n      const {code} = this.$route.query;\n      const newpassword = this.forgetPassword.password;\n      this.spinShow = true;\n\n      if (code == '' || code == undefined || code == null) {\n        this.verify.iscode = false;\n        return;\n      }\n      this.verify.iscode = true;\n      this.verify.load = 0;\n\n      http.post(api[\"user_forgetPasswordVerify\"], {\n        data: {\n          data: {\n            code,\n            newpassword\n          }\n        }\n      }).then((res) => {\n        const d = res.data;\n\n        if (d.success === 1) {\n          this.verify.load = 3;\n          this.stepsIndex = 4;\n          // this.forgetPassword.password = d.data.newpassword;\n        } else {\n          this.$Message.error(d.message);\n          this.verify.load = -1;\n        }\n      }).catch((e) => {\n        this.verify = {\n          load: -1,\n          msg: e.toString(),\n        };\n      }).finally(() => {\n        this.spinShow = false;\n        this.onStepsIndex();\n      });\n    },\n\n    /**\n     * 提交 重置密码\n     */\n    onForgetPassword () {\n      this.spinShow = true;\n\n      this.forgetPassword.language = this.$root.$i18n.locale;\n\n      http.post(api[\"user_forgetPassword\"], {\n        data: {\n          data: this.forgetPassword,\n          encryptCaptcha: this.$refs.captcha.hash,\n          captcha: this.forgetPassword.captcha,\n          language: mail.exchangeLangField(this.$root.$i18n.locale)\n        },\n      }).then(res => {\n        const d = res.data;\n\n        if (d.success === 1) {\n          this.stepsIndex++;\n          this.$Message.success(this.$i18n.t('detail.messages.submitSuccess'));\n        } else {\n          this.$Message.error(d.message);\n        }\n      }).finally(() => {\n        this.onStepsIndex();\n        this.spinShow = false;\n      });\n    },\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.user || {token: ''};\n    }\n  }\n});\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forgetPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forgetPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./forgetPassword.vue?vue&type=template&id=def50478&scoped=true&\"\nimport script from \"./forgetPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./forgetPassword.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"def50478\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$('signup.checkAllEmail'))+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Alert type=\"success\" show-icon>\n      {{ $('signup.checkAllEmail') }}\n    </Alert>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"EmailTip\",\n  props: {\n    email: String\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailTip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailTip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmailTip.vue?vue&type=template&id=32964e9f&scoped=true&\"\nimport script from \"./EmailTip.vue?vue&type=script&lang=js&\"\nexport * from \"./EmailTip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32964e9f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"captcha-view\",style:(`cursor: ${_vm.captchaTime.count <= 0 ? 'pointer' : 'not-allowed'};height: ${_vm.height}`),on:{\"click\":_vm.refreshCaptcha}},[(!_vm.content)?_c('span',{staticClass:\"tip\"},[(!_vm.disable)?[_vm._v(\" \"+_vm._s(_vm.$t('captcha.get'))+\" \")]:_c('div',{staticStyle:{\"min-width\":\"80px\"}},[_c('Icon',{attrs:{\"type\":\"md-close\",\"size\":\"20\"}})],1)],2):_c('div',{class:`${_vm.captchaTime.count <= 0 ? 'disable': ''}`,domProps:{\"innerHTML\":_vm._s(_vm.content)}}),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.content && _vm.captchaTime.count <= 0),expression:\"content && captchaTime.count <= 0\"}],staticClass:\"captcha-view-icon\"},[(_vm.disable)?_c('Icon',{attrs:{\"type\":\"md-close\",\"size\":\"20\"}}):_c('Icon',{attrs:{\"type\":\"md-refresh\",\"size\":\"20\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.captchaTime.count > 0),expression:\"captchaTime.count > 0\"}],staticClass:\"count\"},[_vm._v(_vm._s(_vm.captchaTime.count)+\"s\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"captcha-view\"\n       @click=\"refreshCaptcha\"\n       :style=\"`cursor: ${captchaTime.count <= 0 ? 'pointer' : 'not-allowed'};height: ${height}`\">\n    <span v-if=\"!content\" class=\"tip\">\n      <template v-if=\"!disable\">\n        {{ $t('captcha.get') }}\n      </template>\n      <div v-else style=\"min-width: 80px\">\n        <Icon type=\"md-close\" size=\"20\" />\n      </div>\n    </span>\n    <div v-else v-html=\"content\"\n         :class=\"`${captchaTime.count <= 0 ? 'disable': ''}`\">\n    </div>\n    <transition name=\"fade\">\n      <div v-show=\"content && captchaTime.count <= 0\" class=\"captcha-view-icon\">\n        <Icon v-if=\"disable\" type=\"md-close\" size=\"20\" />\n        <Icon v-else type=\"md-refresh\" size=\"20\" />\n      </div>\n    </transition>\n    <div class=\"count\" v-show=\"captchaTime.count > 0\">{{ captchaTime.count }}s</div>\n  </div>\n</template>\n\n<script>\nimport {http, api, storage} from '../assets/js/index'\nexport default {\n  name: \"Captcha\",\n  props: {\n    id: {\n      type: String,\n      default: '0',\n    },\n    disable: {\n      type: Boolean,\n      default: false,\n    },\n    seconds: {\n      type: Number,\n      default: 60\n    },\n    height: {\n      type: String,\n      default: '40px'\n    }\n  },\n  data() {\n    return {\n      postload: false,\n      hash: \"\",\n      content: \"\",\n      capthcaHash: {},\n      captchaTime: {\n        fun: null,\n        count: 0,\n        lock: false,\n      },\n    }\n  },\n  created() {\n    let captcha = storage.session().get('captcha');\n    if (captcha) {\n      this.capthcaHash = captcha.data;\n    } else {\n      storage.session().set(`captcha`, {\n        [`${this.id}_${this.$route.name}`]: this.seconds\n      });\n    }\n  },\n  destroyed() {\n    clearInterval(this.captchaTime.fun);\n    this.captchaTime.fun = null;\n  },\n  methods: {\n    /**\n     * 刷新验证码\n     */\n    async refreshCaptcha() {\n      let captcha = await storage.session().get('captcha');\n      let that = this;\n\n      if (captcha.code <= 0) {\n        captcha = {\n          data: {\n            value: this.seconds,\n          }\n        }\n      }\n\n      if (this.disable || this.postload) return;\n      if (this.captchaTime.count > 0) return;\n\n      this.postload = true;\n\n      http.get(api[\"captcha\"], {\n        params: {\n          t: Math.random()\n        }\n      }).then((res) => {\n        if (res.data.success === 1) {\n          // 储存验证码hash\n          that.capthcaHash = Object.assign({\n            [that.$route.name] : 0\n          });\n\n          this.hash = res.data.data[\"hash\"];\n          this.content = res.data.data[\"content\"];\n\n          if (Object.keys(captcha.data.value).indexOf(this.$route.name) >= 0) {\n            // 会话持久对应时间加载\n            this.captchaTime.count = captcha.data.value[this.$route.name];\n          }\n\n          this.capthcaTimeout(this.captchaTime.count || this.seconds);\n          return;\n        }\n\n        this.$Message.error(res.data.code);\n      }).finally((res) => {\n        setTimeout(function () {\n          that.postload = false;\n        }, 800)\n      });\n    },\n    /**\n     * 计时器\n     * @param num\n     */\n    capthcaTimeout(num) {\n      const that = this;\n      let fun;\n      if (that.captchaTime.lock) return;\n      that.captchaTime.count = num;\n      fun = setInterval(function () {\n        if (that.captchaTime.count <= 0) {\n          clearInterval(fun);\n          that.captchaTime.lock = false;\n          return;\n        }\n        that.captchaTime.count -= 1;\n\n        that.capthcaHash = Object.assign({\n          [`${that.id}_${that.$route.name}`] : that.captchaTime.count\n        });\n        storage.session().set(\"captcha\", that.capthcaHash);\n      }, 1000);\n\n      that.captchaTime.lock = true;\n    }\n  },\n  computed: {\n    // 是否有验证码\n    isCaptcha() {\n      return this.hash && this.content;\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.captcha-view {\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  justify-items: center;\n  align-items: center;\n  margin: 0 5px;\n\n  .captcha-view-icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    top: 0;\n    height: 100%;\n    width: 100%;\n  }\n\n  .disable {\n    filter: blur(2px);\n    transition: all .24s;\n    opacity: .4;\n  }\n\n  .count {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: all 1s;\n    font-size: 10px;\n    transform: scale(.7);\n    color: #000;\n    padding: 0 2px;\n    border: 1px solid #000;\n    background-color: #fff;\n    border-radius: 5px;\n    position: absolute;\n    top: 2px;\n    right: 2px;\n  }\n\n  .tip {\n    font-size: 12px;\n    margin: 0 5px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Captcha.vue?vue&type=template&id=f5c19fd8&\"\nimport script from \"./Captcha.vue?vue&type=script&lang=js&\"\nexport * from \"./Captcha.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Captcha.vue?vue&type=style&index=0&id=f5c19fd8&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=style&index=0&id=f5c19fd8&prod&lang=less&\""],"sourceRoot":""}