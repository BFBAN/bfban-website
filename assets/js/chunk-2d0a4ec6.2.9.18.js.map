{"version":3,"sources":["webpack:///./src/views/WorkflowAdd.vue?fb74","webpack:///src/views/WorkflowAdd.vue","webpack:///./src/views/WorkflowAdd.vue?5b60","webpack:///./src/views/WorkflowAdd.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","push","name","_v","_s","$t","$route","_e","query","type","id","_l","i","index","key","model","value","callback","$$v","status","expression","load","on","onAddDataWorkflow","staticRenderFns","component"],"mappings":"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","file":"assets/js/chunk-2d0a4ec6.2.9.18.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('br'),_c('Row',[_c('Col',{attrs:{\"flex\":\"1\",\"xs\":{push: 1},\"lg\":{push: 0}}},[_c('Breadcrumb',[_c('BreadcrumbItem',{attrs:{\"to\":{name: 'home'}}},[_vm._v(_vm._s(_vm.$t(\"header.index\")))]),_c('BreadcrumbItem',{attrs:{\"to\":{name: 'workflow'}}},[_vm._v(_vm._s(_vm.$t(\"workflow.title\")))]),_c('BreadcrumbItem',[_vm._v(_vm._s(_vm.$t(\"workflow.add.title\")))])],1)],1)],1),_c('br'),_c('Card',{attrs:{\"dis-hover\":\"\"}},[(_vm.$route.name === 'workflow_item_add')?[_c('h1',[_vm._v(\"添加\")]),_c('p',[_vm._v(\"将以下玩家添加到你的工作流中\")]),_c('br')]:_vm._e(),(_vm.$route.query.type === 'persona' && _vm.$route.name === 'workflow_adds')?[_c('h1',[_vm._v(\"批量添加\")]),_c('p',[_vm._v(\"将以下玩家添加到你的工作流中\")]),_c('br')]:_vm._e(),_c('Row',{attrs:{\"gutter\":10}},[_c('Col',[(_vm.$route.name === 'workflow_item_add')?[_c('SharePlayerCell',{attrs:{\"type\":\"card\",\"persona-id\":_vm.$route.query.id}})]:_vm._e(),(_vm.$route.query.type === 'persona' && _vm.$route.name === 'workflow_adds')?[_c('Row',{attrs:{\"gutter\":10}},_vm._l((_vm.getPlayers),function(i,index){return _c('Col',{key:index},[_c('SharePlayerCell',{attrs:{\"type\":\"card\",\"persona-id\":i}})],1)}),1)]:_vm._e()],2)],1),_c('Divider',{attrs:{\"dashed\":\"\"}}),_c('Row',{attrs:{\"gutter\":10,\"type\":\"flex\",\"justify\":\"center\"}},[_c('Col',[_c('Select',{attrs:{\"size\":\"large\",\"disabled\":true},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}},[_c('Option',{attrs:{\"value\":0}},[_vm._v(\"待处理\")])],1)],1),_c('Col',[_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"long\":\"\",\"loading\":_vm.load},on:{\"click\":_vm.onAddDataWorkflow}},[_vm._v(\"确认\")])],1)],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport SharePlayerCell from \"@/components/SharePlayerCell.vue\";\nimport {player_storage, workflow_storage} from \"@/assets/js\";\n\nexport default {\n  data() {\n    return {\n      load: false,\n      status: 0\n    }\n  },\n  components: {SharePlayerCell},\n  methods: {\n    /**\n     * 确认\n     * 将批量或单个案件添加到工作流中\n     */\n    async onAddDataWorkflow() {\n      try {\n        this.load = true;\n        let workflowData = workflow_storage.getConfiguration('0', workflow_storage.DATA),\n            promises = this.getPlayers.map(async personaId => {\n              if (this.$route.query.type === 'persona' && this.getPlayers.indexOf(personaId) >= 0) {\n                return {\n                  data: await player_storage.getPlayerInfo({personaId}, true)\n                };\n              }\n              return {\n                error: true,\n                data: {\n                  originPersonaId: personaId\n                },\n              }\n            }),\n            playersData = await Promise.all(promises).then(res => res.find(i => i.error !== true)),\n            selectStatusIndex = workflowData.children.findIndex(i => i.name.value === 0);\n\n        workflowData.children[selectStatusIndex].children = workflowData.children[selectStatusIndex].children.concat(playersData)\n\n        workflow_storage.updateConfiguration('0', workflowData, workflow_storage.DATA);\n        await this.$router.push({name: \"workflow\"})\n      } finally {\n        this.load = false;\n      }\n    }\n  },\n  computed: {\n    /**\n     * 添加玩家ids\n     * @returns {(string|(string | null)[])[]|string[]|*[]}\n     */\n    getPlayers() {\n      const {ids, id} = this.$route.query;\n      if (ids)\n        return this.$route.query.ids.split(',');\n      if (id)\n        return [id];\n      return []\n    }\n  }\n}\n</script>\n\n<template>\n  <div class=\"container\">\n    <br>\n    <Row>\n      <Col flex=\"1\" :xs=\"{push: 1}\" :lg=\"{push: 0}\">\n        <Breadcrumb>\n          <BreadcrumbItem :to=\"{name: 'home'}\">{{ $t(\"header.index\") }}</BreadcrumbItem>\n          <BreadcrumbItem :to=\"{name: 'workflow'}\">{{ $t(\"workflow.title\") }}</BreadcrumbItem>\n          <BreadcrumbItem>{{ $t(\"workflow.add.title\") }}</BreadcrumbItem>\n        </Breadcrumb>\n      </Col>\n    </Row>\n    <br>\n\n    <Card dis-hover>\n      <template v-if=\"$route.name === 'workflow_item_add'\">\n        <h1>添加</h1>\n        <p>将以下玩家添加到你的工作流中</p>\n        <br>\n      </template>\n\n      <template v-if=\"$route.query.type === 'persona' && $route.name === 'workflow_adds'\">\n        <h1>批量添加</h1>\n        <p>将以下玩家添加到你的工作流中</p>\n        <br>\n      </template>\n\n      <Row :gutter=\"10\">\n        <Col>\n          <template v-if=\"$route.name === 'workflow_item_add'\">\n            <SharePlayerCell type=\"card\" :persona-id=\"$route.query.id\"></SharePlayerCell>\n          </template>\n          <template v-if=\"$route.query.type === 'persona' && $route.name === 'workflow_adds'\">\n            <Row :gutter=\"10\">\n              <Col v-for=\"(i, index) in getPlayers\" :key=\"index\">\n                <SharePlayerCell type=\"card\" :persona-id=\"i\"></SharePlayerCell>\n              </Col>\n            </Row>\n          </template>\n        </Col>\n      </Row>\n\n      <Divider dashed></Divider>\n      <Row :gutter=\"10\" type=\"flex\" justify=\"center\">\n        <Col>\n          <Select v-model=\"status\" size=\"large\" :disabled=\"true\">\n            <Option :value=\"0\">待处理</Option>\n          </Select>\n        </Col>\n        <Col>\n          <Button type=\"primary\" size=\"large\" long :loading=\"load\" @click=\"onAddDataWorkflow\">确认</Button>\n        </Col>\n      </Row>\n\n    </Card>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkflowAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkflowAdd.vue?vue&type=template&id=fd06d302&scoped=true&\"\nimport script from \"./WorkflowAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkflowAdd.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd06d302\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}