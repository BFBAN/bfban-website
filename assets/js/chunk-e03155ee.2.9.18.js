(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e03155ee"],{"4a33":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container"},[e("div",{staticClass:"content"},[e("div",[e("Row",{attrs:{gutter:0,type:"flex",justify:"center"}},[e("Col",{staticStyle:{width:"500px"}},[e("br"),e("Row",[e("Col",{attrs:{xs:{push:1},lg:{push:0}}},[e("Breadcrumb",[e("BreadcrumbItem",{attrs:{to:{name:"home"}}},[t._v(t._s(t.$t("header.index")))]),e("BreadcrumbItem",[t._v(t._s(t.$t("signin.title")))])],1)],1)],1),e("br"),t.isLogin?t._e():e("Card",{staticClass:"signin-box",attrs:{padding:t.isMobile?20:30,"dis-hover":""}},[e("Banner",{style:"margin: -"+(t.isMobile?20:30)+"px -"+(t.isMobile?20:30)+"px 30px;",attrs:{height:"120"}}),e("Form",{ref:"signin",attrs:{model:t.signin,rules:t.ruleValidate,"label-position":"top"}},[t.serverReturnMessage?e("Alert",{attrs:{type:"error","show-icon":""}},[e("b",[t._v(t._s(t.$t("signin.failed"))+" :")]),t._v(" "+t._s(t.serverReturnMessage)+" ")]):t._e(),e("FormItem",{attrs:{label:t.$t("signin.form.username"),prop:"username"}},[e("Input",{attrs:{prefix:"ios-contact",type:"text",size:"large",placeholder:t.$t("signin.form.username")},model:{value:t.signin.username,callback:function(s){t.$set(t.signin,"username",s)},expression:"signin.username"}})],1),e("FormItem",{attrs:{label:t.$t("signin.form.password"),prop:"password"}},[e("Input",{attrs:{type:"password",password:"",size:"large",placeholder:t.$t("signin.form.password")},model:{value:t.signin.password,callback:function(s){t.$set(t.signin,"password",s)},expression:"signin.password"}})],1),e("FormItem",{attrs:{label:t.$t("captcha.title"),prop:"captcha"}},[e("Captcha",{ref:"captcha",on:{getCaptchaData:t.getCaptchaData}})],1),e("br"),e("FormItem",[e("Button",{attrs:{long:"",loading:t.spinShow,size:"large",type:"primary"},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.handleSignin.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("basic.button.submit"))+" ")])],1),t.spinShow?e("spin",{attrs:{fix:""}},[e("Icon",{attrs:{type:"md-refresh spin-icon-load",size:"30"}})],1):t._e()],1),e("Divider",{style:"margin:25px -"+(t.isMobile?20:50)+"px;width:calc(100% + "+(t.isMobile?40:100)+"px)",attrs:{dashed:""}}),e("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[e("Col",[e("router-link",{attrs:{to:{name:"signup"}}},[t._v(" "+t._s(t.$t("signin.form.submitHint"))+" ")])],1),e("Divider",{attrs:{type:"vertical"}}),e("Col",[e("router-link",{attrs:{to:{name:"forgetPassword"}}},[t._v(t._s(t.$t("signin.form.forgetPasswordHint")))])],1),e("Col",{attrs:{span:"24"}},[e("Row",{attrs:{gutter:10}},[e("Col",[e("a",{attrs:{href:"http://kook.top/wHwxhw"}},[t._v(t._s(t.$t("signin.form.Feedback")))])]),e("Col",[e("Icon",{attrs:{type:"md-open"}})],1)],1)],1)],1)],1),t.isLogin?e("Card",{attrs:{"dis-hover":"",padding:t.isMobile?20:50}},[e("div",{staticClass:"signin-out-userinfo"},[e("Avatar",{staticClass:"userinfo-avatar",attrs:{icon:"ios-person",size:"100",src:t.currentUser.userinfo.userAvatar}}),e("h1",[e("router-link",{attrs:{to:{name:"profile",params:{pagename:"information"}}}},[t._v(" "+t._s(t.currentUser.userinfo.username)+" ")])],1),e("p",[t._v(" "+t._s(t.$t("signin.loggedIn"))+" ")])],1),e("Button",{attrs:{long:"",type:"error",ghost:"",size:"large",loading:t.signoutLoad,disabled:t.signoutLoad},on:{click:t.onAccountSignout}},[t._v(" "+t._s(t.$t("header.signout"))+" ")])],1):t._e()],1)],1)],1)])])},i=[],r=e("e4b4"),n=e("84af"),o=e("45ce"),c=e("2f62");const{mapActions:p,mapMutations:u}=c["a"];var g=new r["d"]({components:{Banner:n["a"],Captcha:o["a"]},data(){return{ruleValidate:{username:[{required:!0,min:4,max:40,trigger:"blur"},{validator(t,s,e){return 0==r["n"].check("username",s).code||0==r["n"].check("email",s).code},message:this.$t("signup.placeholder.username"),trigger:"change"}],password:[{required:!0,trigger:"blur"}],captcha:[{required:!0}]},serverReturnMessage:"",signin:{username:"",password:"",captcha:{}},signoutLoad:!1,spinShow:!1}},beforeMount(){this.$route.query.backPath&&this.$Message.info(this.$t("signin.loginFirst"))},methods:{...p({signinUser:"signin"}),...u(["SIGNIN"]),getCaptchaData(t){this.signin.captcha=Object.assign(this.signin.captcha,t),this.signin.captcha=t},async onAccountSignout(){try{this.signoutLoad=!0,await r["a"].signout(),this.$store.dispatch("signout").then(()=>{this.$router.push("/")})}catch(t){this.$Message.error(t.toString())}finally{this.signoutLoad=!1}},handleSignin(){const t=this,s=this.$route.query.backPath;let{username:e,password:a,captcha:i}=this.signin;e=e.trim(),a=a.trim(),this.$refs["signin"].validate(n=>{n?(this.spinShow=!0,r["e"].post(r["c"]["account_signin"],{data:{data:{username:e,password:a},captcha:i}}).then(async e=>{const a=e.data;if(1===a.error)return t.signin.password="",t.signin.captcha="",t.serverReturnMessage=this.$t(`basic.tip['${a.code}']`,{message:a.message||""}),void this.$Message.error(t.serverReturnMessage);await t.signinUser(a.data),s?await this.$router.push({path:s}):(this.$router.go("-1"),this.$router.go(-1)),this.$Message.success(this.$t(`basic.tip['${a.code}']`,{message:a.message||""}))}).finally(s=>{t.spinShow=!1,t.$refs.captcha&&t.$refs.captcha.refreshCaptcha()})):this.$Message.error(this.$t("signin.fillEverything"))})}},computed:{currentUser(){return this.$store.state.user||{token:""}}}}),l=g,h=(e("6953"),e("2877")),d=Object(h["a"])(l,a,i,!1,null,"0d590509",null);s["default"]=d.exports},"569f":function(t,s,e){},6953:function(t,s,e){"use strict";e("569f")}}]);
//# sourceMappingURL=chunk-e03155ee.2.9.18.js.map