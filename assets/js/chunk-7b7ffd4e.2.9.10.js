(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b7ffd4e"],{"0469":function(e,t,a){"use strict";a("d6b9")},"0810":function(e,t,a){"use strict";a("0af7")},"0af7":function(e,t,a){},"0b05":function(e,t,a){var s={"./images/games/bf1/logo.png":"d141","./images/games/bf6/logo.png":"a542","./images/games/bfv/logo.png":"28dd","./images/logo.png":"9d64"};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id="0b05"},"1c8a":function(e,t,a){e.exports=a.p+"assets/img/bf.350c4f88.jpg"},2953:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"container"},[t("br"),t("Row",[t("Col",{attrs:{xs:{push:1},lg:{push:0}}},[t("Breadcrumb",[t("BreadcrumbItem",{attrs:{to:{name:"home"}}},[e._v(e._s(e.$t("header.index")))]),t("BreadcrumbItem",{attrs:{to:{name:"profile",params:{pagename:"information"}}}},[e._v(e._s(e.$t("header.profile"))+" ")]),t("BreadcrumbItem",[e._v(e._s(e.$t("profile.admin.title")))])],1)],1)],1),t("br"),t("Card",{staticClass:"admin",attrs:{"dis-hover":"",padding:0}},[t("Row",{attrs:{gutter:0}},[t("Col",{attrs:{xs:{span:24},sm:{span:6}}},[t("Menu",{staticClass:"admin-menu",attrs:{mode:e.isMobile?"horizontal":"vertical",width:e.isMobile?null:"100%","open-names":e.openMuen,"active-name":e.adminMenuValue},on:{"on-select":e.onMenuActive}},[t("MenuItem",{attrs:{name:"home"}},[e._v(" "+e._s(e.$t("profile.admin.menu.home"))+" ")]),e._l(e.adminMuen,(function(a,s){return t("MenuGroup",{key:s,attrs:{title:e.isMobile?null:e.$t("profile.admin.menu."+a.title)}},e._l(a.child,(function(a,s){return t("MenuItem",{directives:[{name:"show",rawName:"v-show",value:a.disabled,expression:"j.disabled"}],key:s,attrs:{name:a.value}},[t("Row",[t("Col",{attrs:{flex:"1"}},[a.icon?t("Icon",{attrs:{type:a.icon}}):e._e(),e._v(" "+e._s(e.$t("profile.admin.menu."+a.title))+" ")],1),a.ignore?e._e():t("Col",[t("Poptip",{attrs:{trigger:"hover",transfer:""}},[t("Icon",{attrs:{type:"md-help-circle"}}),t("PrivilegesTag",{attrs:{slot:"content",data:a.privilege},slot:"content"})],1)],1)],1)],1)})),1)}))],2)],1),t("Col",{staticStyle:{padding:"20px"},attrs:{xs:{span:24},sm:{span:18}}},[t("keep-alive",["home"==e.adminMenuValue?t("div",{staticClass:"admin-content"},[t("h1",[e._v(e._s(e.currentUser.userinfo.username))]),t("p",[e._v("("+e._s(e.currentUser.userinfo.userId)+")")]),t("br"),t("p",[t("PrivilegesTag",{attrs:{data:e.currentUser.userinfo.privilege}})],1)]):"user"==e.adminMenuValue?t("user"):"blockedUsers"==e.adminMenuValue?t("blockedUsers"):"muteUsers"==e.adminMenuValue?t("muteUsers"):"verifications"==e.adminMenuValue?t("verifications"):"comment"==e.adminMenuValue?t("comment"):"chat_push"==e.adminMenuValue?t("chatPush"):"chat_list"==e.adminMenuValue?t("chatList"):"file_list"==e.adminMenuValue?t("fileList"):"admin_operation_log"==e.adminMenuValue?t("adminOperationLog"):"message_Log"==e.adminMenuValue?t("messageLog"):"adminOperation"==e.adminMenuValue?t("adminOperation"):"judgement_log"==e.adminMenuValue?t("judgementLog"):e._e()],1)],1)],1)],1)],1)},i=[],r=(a("14d9"),a("ad43")),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[t("Col",[t("Button",{attrs:{disabled:!e.isAdmin},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.addUserModel=!0}}},[t("Row",{attrs:{gutter:20,type:"flex",align:"middle"}},[t("privilegesTag",{attrs:{data:["dev"]}}),t("Col",[t("Icon",{attrs:{type:"md-add"}})],1)],1)],1)],1),t("Col",{attrs:{flex:"1"}}),t("Col",[t("Select",{on:{"on-change":e.getUserList},model:{value:e.userOrder.value,callback:function(t){e.$set(e.userOrder,"value",t)},expression:"userOrder.value"}},e._l(e.userOrder.list,(function(a,s){return t("Option",{key:s,attrs:{value:a.value}},[e._v(" "+e._s(a.title)+" ")])})),1)],1),t("Col",[t("Select",{on:{"on-change":e.getUserList},model:{value:e.userType.value,callback:function(t){e.$set(e.userType,"value",t)},expression:"userType.value"}},e._l(e.userType.list,(function(a,s){return t("Option",{key:s,attrs:{value:a.value}},[e._v(" "+e._s(a.title)+" ")])})),1)],1),"all"==e.userType.value?[t("Col",[t("Select",{on:{"on-change":e.getUserList},model:{value:e.userParameter.value,callback:function(t){e.$set(e.userParameter,"value",t)},expression:"userParameter.value"}},e._l(e.userParameter.list,(function(a,s){return t("Option",{key:s,attrs:{value:a.value}},[e._v(" "+e._s(a.title)+" ")])})),1)],1),t("Col",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}]},[t("Icon",{attrs:{type:"ios-loading"}})],1)]),t("Col",[t("Input",{staticStyle:{width:"280px"},attrs:{type:"text",search:"","enter-button":""},on:{"on-enter":e.onSearchUser,"on-search":e.onSearchUser},model:{value:e.userValue,callback:function(t){e.userValue=t},expression:"userValue"}})],1)]:e._e()],2),t("br"),t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getUserList}},[t("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),e._l(e.userListData,(function(a,s){return t("Card",{key:s,staticClass:"admin-user",attrs:{"dis-hover":""}},[t("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[t("BusinessCard",{attrs:{id:a.id,showAdminUserInfo:!0}},[t("b",[e._v(e._s(a.username))])]),t("div",[e._v(" Id:"+e._s(a.id)+" "),t("divider",{attrs:{type:"vertical"}}),e._v(" Valid:"+e._s(a.valid)+" ")],1)],1),t("Col",[a.privilege?t("PrivilegesTag",{ref:`tag_${a.id}_privilegesTag`,refInFor:!0,attrs:{data:a.privilege}}):e._e()],1),t("Col",[t("Divider",{attrs:{type:"vertical"}}),t("Button",{attrs:{type:"dashed",size:"small",disabled:!e.isAdmin},on:{click:function(t){return e.onEditUser(s)}}},[t("Icon",{attrs:{type:"ios-create"}})],1),t("Divider",{attrs:{type:"vertical"}}),t("router-link",{attrs:{to:{name:"account",params:{uId:""+a.id}},target:"_blank"}},[t("Button",{attrs:{type:"dashed",size:"small"}},[t("Icon",{attrs:{type:"ios-eye"}})],1)],1),t("Divider",{attrs:{type:"vertical"}}),t("Button",{attrs:{type:"error",size:"small",disabled:!e.isAdmin},on:{click:function(t){return e.openDelUserModel(s)}}},[t("Icon",{attrs:{type:"md-trash"}})],1)],1)],1)],1)})),e.userListData.length<=0?t("Card",{attrs:{"dis-hover":"",align:"center"}},[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]):e._e(),t("br"),t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),t("Modal",{attrs:{width:"980",title:e.editUserData.username},on:{"on-ok":e.onEditUserSubmit},model:{value:e.userEditModel,callback:function(t){e.userEditModel=t},expression:"userEditModel"}},[t("Form",{ref:"formValidate",attrs:{model:e.editUserData,"label-position":"top"}},[t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{span:"12"}},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{span:"24"}},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{prop:"id"}},[t("Input",{attrs:{readonly:""},model:{value:e.editUserData.id,callback:function(t){e.$set(e.editUserData,"id",t)},expression:"editUserData.id"}})],1)],1),t("Col",{attrs:{span:"18"}},[t("FormItem",{attrs:{prop:"username"}},[t("Input",{attrs:{maxlength:"40"},model:{value:e.editUserData.username,callback:function(t){e.$set(e.editUserData,"username",t)},expression:"editUserData.username"}})],1)],1)],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.lastSigninIP"),prop:"username"}},[t("Input",{attrs:{readonly:"",disabled:""},model:{value:e.editUserData.attr.lastSigninIP,callback:function(t){e.$set(e.editUserData.attr,"lastSigninIP",t)},expression:"editUserData.attr.lastSigninIP"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.registerIP"),prop:""}},[t("Input",{attrs:{readonly:"",disabled:""},model:{value:e.editUserData.attr.registerIP,callback:function(t){e.$set(e.editUserData.attr,"registerIP",t)},expression:"editUserData.attr.registerIP"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.createTime"),prop:""}},[t("Input",{attrs:{readonly:"",disabled:""},model:{value:e.editUserData.createTime,callback:function(t){e.$set(e.editUserData,"createTime",t)},expression:"editUserData.createTime"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.signoutTime"),prop:""}},[t("Input",{attrs:{readonly:"",disabled:""},model:{value:e.editUserData.signoutTime,callback:function(t){e.$set(e.editUserData,"signoutTime",t)},expression:"editUserData.signoutTime"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.originEmail")}},[t("Input",{attrs:{readonly:""},model:{value:e.editUserData.originEmail,callback:function(t){e.$set(e.editUserData,"originEmail",t)},expression:"editUserData.originEmail"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.originName")}},[t("Input",{attrs:{readonly:""},model:{value:e.editUserData.originName,callback:function(t){e.$set(e.editUserData,"originName",t)},expression:"editUserData.originName"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.originPersonaId")}},[t("Input",{attrs:{readonly:""},model:{value:e.editUserData.originPersonaId,callback:function(t){e.$set(e.editUserData,"originPersonaId",t)},expression:"editUserData.originPersonaId"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.originUserId")}},[t("Input",{attrs:{readonly:""},model:{value:e.editUserData.originUserId,callback:function(t){e.$set(e.editUserData,"originUserId",t)},expression:"editUserData.originUserId"}})],1)],1)],1)],1),t("Col",{attrs:{span:"12"}},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.changeNameLeft")}},[t("InputNumber",{attrs:{max:5,min:0},model:{value:e.editUserData.attr.changeNameLeft,callback:function(t){e.$set(e.editUserData.attr,"changeNameLeft",t)},expression:"editUserData.attr.changeNameLeft"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.language")}},[t("Select",{staticClass:"switch-language",attrs:{prefix:"md-globe",placement:"top-end"},model:{value:e.editUserData.attr.language,callback:function(t){e.$set(e.editUserData.attr,"language",t)},expression:"editUserData.attr.language"}},e._l(e.languages,(function(a){return t("Option",{key:a.name,attrs:{value:a.name,disabled:a.ignoreSave}},[e._v(" "+e._s(a.label)+" ")])})),1)],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.showOrigin")}},[t("i-switch",{model:{value:e.editUserData.attr.showOrigin,callback:function(t){e.$set(e.editUserData.attr,"showOrigin",t)},expression:"editUserData.attr.showOrigin"}})],1)],1),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.account.form.allowDM")}},[t("i-switch",{model:{value:e.editUserData.attr.allowDM,callback:function(t){e.$set(e.editUserData.attr,"allowDM",t)},expression:"editUserData.attr.allowDM"}})],1)],1)],1),t("FormItem",{attrs:{label:e.$t("profile.account.form.privileges"),prop:"privileges"}},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{span:"24"}},[t("PrivilegesTag",{ref:"privilegesTag",attrs:{data:e.editUserData.privilege}})],1),t("Col",{attrs:{span:"24"}},[t("Row",{attrs:{gutter:10}},[t("Col",[t("Select",{staticStyle:{width:"160px"},model:{value:e.editPrivilegesForm.activeName,callback:function(t){e.$set(e.editPrivilegesForm,"activeName",t)},expression:"editPrivilegesForm.activeName"}},e._l(e.editPrivilegesForm.action,(function(a,s){return t("Option",{key:s,attrs:{value:a}},[e._v(" "+e._s(a)+" ")])})),1)],1),t("Col",{attrs:{flex:"1"}},[t("Select",{model:{value:e.editPrivilegesForm.roleName,callback:function(t){e.$set(e.editPrivilegesForm,"roleName",t)},expression:"editPrivilegesForm.roleName"}},e._l(e.editPrivilegesForm.role,(function(a,s){return t("Option",{key:s,attrs:{value:a,label:e.$t("basic.privilege."+a)}},[t("Tag",[e._v(e._s(e.$t("basic.privilege."+a)))])],1)})),1)],1),t("Col",[t("Button",{on:{click:e.onEditPrivileges}},["grant"==e.editPrivilegesForm.activeName?t("Icon",{attrs:{type:"md-add"}}):"revoke"==e.editPrivilegesForm.activeName?t("Icon",{attrs:{type:"md-close"}}):e._e()],1)],1)],1)],1)],1),t("p",{staticClass:"hint"},[e._v("To modify the user identity, click Save below")])],1),t("FormItem",{attrs:{label:"introduction",prop:"introduction"}},[t("Card",{attrs:{"dis-hover":"",padding:0}},[t("Textarea",{ref:"userIntroductionTextarea",attrs:{content:e.editUserData.attr.introduction},model:{value:e.editUserData.attr.introduction,callback:function(t){e.$set(e.editUserData.attr,"introduction",t)},expression:"editUserData.attr.introduction"}})],1)],1)],1)],1)],1)],1),t("Modal",{attrs:{loading:e.addUserLoad},model:{value:e.addUserModel,callback:function(t){e.addUserModel=t},expression:"addUserModel"}},[t("Form",{ref:"addUserFormValidate",attrs:{model:e.addUserData,rules:e.addUserRuleValidate,"label-position":"top"}},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:e.$t("signup.form.username"),prop:"username"}},[t("Input",{attrs:{maxlength:"40",placeholder:e.$t("signup.placeholder.username")},model:{value:e.addUserData.username,callback:function(t){e.$set(e.addUserData,"username",t)},expression:"addUserData.username"}})],1)],1),t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:e.$t("signup.form.password"),prop:"password"}},[t("Input",{attrs:{password:"",minlength:"6",placeholder:e.$t("signup.placeholder.password")},model:{value:e.addUserData.password,callback:function(t){e.$set(e.addUserData,"password",t)},expression:"addUserData.password"}})],1)],1),t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:e.$t("signup.form.originEmail"),prop:"originEmail"}},[t("Input",{attrs:{password:"",minlength:"6",placeholder:e.$t("signup.placeholder.originEmail")},model:{value:e.addUserData.originEmail,callback:function(t){e.$set(e.addUserData,"originEmail",t)},expression:"addUserData.originEmail"}})],1)],1),t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:e.$t("signup.form.originName"),prop:"originName"}},[t("Input",{attrs:{password:"",minlength:"6",placeholder:e.$t("signup.placeholder.originName")},model:{value:e.addUserData.originName,callback:function(t){e.$set(e.addUserData,"originName",t)},expression:"addUserData.originName"}})],1)],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{loading:e.addUserLoad},on:{click:e.onAddUserSubmit}},[e._v(e._s(e.$t("basic.button.submit")))])],1)],1),t("Modal",{attrs:{loading:e.delUserLoad,width:"360"},model:{value:e.delUserModel,callback:function(t){e.delUserModel=t},expression:"delUserModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("Icon",{attrs:{type:"ios-information-circle"}}),t("span",[e._v("User account status")])],1),t("Card",{attrs:{"dis-hover":"",align:"center"}},[t("BusinessCard",{attrs:{id:e.editUserData.id,showAdminUserInfo:!0}},[t("h2",[t("a",{attrs:{href:"javascript:void(0)"}},[t("b",[e._v(e._s(e.editUserData.username))])])])]),t("p",[e._v("User Id: "+e._s(e.editUserData.id))]),t("p",[e._v("Current valid: "+e._s(e.editUserData.valid))])],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Row",{attrs:{type:"flex",align:"middle"}},[t("Col",[t("Select",{model:{value:e.delTypeValue,callback:function(t){e.delTypeValue=t},expression:"delTypeValue"}},e._l(e.delTypes,(function(a,s){return t("Option",{key:s,attrs:{value:a}},[e._v(" "+e._s(a))])})),1)],1),t("Divider",{attrs:{type:"vertical"}}),t("Col",{attrs:{flex:"1"}},[t("Button",{attrs:{long:"",type:{logic:"error",real:"error",restore:"success"}[e.delTypeValue],ghost:{logic:!0,real:!1,restore:!1}[e.delTypeValue],loading:e.delUserLoad},on:{click:e.onDeleteUser}},["restore"!=e.delTypeValue?t("Icon",{attrs:{type:{logic:"md-trash",real:"md-trash"}[e.delTypeValue]}}):e._e(),e._v(" "+e._s(e.$t("basic.button.submit"))+" "),"real"==e.delTypeValue?[e._v("⚠️⚠️⚠️")]:e._e()],2)],1)],1)],1)],1)],2)},n=[],l=a("e4b4"),d=a("afdf"),c=a("6ea1"),m=a("d78a"),u=a("5d71"),h=new r["a"]({data(){return{delUserModel:!1,delUserLoad:!1,delTypes:["logic","real","restore"],delTypeValue:"logic",userType:{value:"all",list:[{title:"All",value:"all"},{title:"Admin`s",value:"admin"}]},userOrder:{value:"asc",list:[{title:"Asc",value:"asc"},{title:"Desc",value:"desc"}]},userParameter:{value:"username",list:[{title:"BFBAN ID",value:"id"},{title:"BFBAN Username",value:"username"},{title:"originName",value:"originName"},{title:"originPersonaId",value:"originPersonaId"},{title:"Email",value:"originEmail"}]},addUserLoad:!1,load:!1,userValue:"",userListData:[],editUserData:{attr:{language:"",introduction:""},temporaryPrivilege:{},privilege:[]},editPrivilegesForm:{id:"",roleName:"",role:["normal","admin","bot","super","dev","volunteer","blacklisted","freezed"],activeName:"grant",action:["grant","revoke"]},addUserData:{username:"",password:"",originEmail:"",originName:""},addUserRuleValidate:{username:[{required:!0,min:4,max:40,trigger:"blur"}],password:[{required:!0,min:6,max:40,trigger:"blur"}],originName:[{required:!0,min:1,trigger:"blur"}],originEmail:[{required:!0,min:1,type:"email",trigger:"blur"}]},userEditModel:!1,addUserModel:!1,languages:d.child,skip:1,limit:40,order:"desc",total:0}},components:{Textarea:u["a"],PrivilegesTag:m["a"],BusinessCard:c["a"]},created(){this.http=l["d"].call(this),this.getUserList()},methods:{async onEditUserSubmit(){this.load=!0,await this.setUserAttr();for(const e in this.editUserData.temporaryPrivilege)this.editUserData.id&&await this.setUser(this.editUserData.id,this.editUserData.temporaryPrivilege[e],e);await this.onSearchUser(),this.load=!1},onAddUserSubmit(){const{username:e,password:t,originEmail:a,originName:s}=this.addUserData;this.isAdminL3?this.$Message.error(this.$i18n.t("basic.tip.noAccess")):this.$refs.addUserFormValidate.validate(i=>{i?(this.addUserLoad=!0,this.http.post(l["b"]["signup4dev"],{data:{data:{username:e,password:t,originEmail:a,originName:s,language:this.$i18n.locale}}}).then(e=>{const t=e.data;1!=t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.code)}).error(e=>{this.$Message.error(e)}).finally(()=>{this.addUserLoad=!1,this.addUserModel=!1})):this.$Message.error("Fail!")})},onDeleteUser(){const{id:e}=this.editUserData;!e&&this.delTypes.constructor(this.delTypeValue)||(this.delUserLoad=!0,this.http.post(l["b"]["admin_delUser"],{data:{data:{type:this.delTypeValue,id:e}}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.code)}).finally(()=>{this.getUserList(),this.delUserLoad=!1,this.delUserModel=!1}))},openDelUserModel(e){this.editUserData=this.userListData[e],this.delUserModel=!0},onEditPrivileges(){if(!this.editPrivilegesForm.roleName||!this.editUserData.privilege)return;const e=this.editUserData.privilege.indexOf(this.editPrivilegesForm.roleName);switch(this.editPrivilegesForm.activeName){case"grant":e>=0?this.$Message.error("already exist"):(this.editUserData.privilege.push(this.editPrivilegesForm.roleName),this.editUserData.temporaryPrivilege[this.editPrivilegesForm.roleName]="grant");break;case"revoke":e>=0?(this.editUserData.privilege.splice(e,1),this.editUserData.temporaryPrivilege[this.editPrivilegesForm.roleName]="revoke"):this.$Message.error("not role");break}this.$refs.privilegesTag&&this.$refs.privilegesTag.update()},onSearchUser(){this.getUserList().finally(()=>{this.onReset()})},async getUserList(){const e=this;let t={name:"",skip:(this.skip-1)*this.limit,limit:this.limit,parameter:""};if(!this.load)return new Promise((a,s)=>{e.load=!0,this.userValue&&(t.name=this.userValue),this.userType.value&&(t.type=this.userType.value),this.userOrder.value&&(t.order=this.userOrder.value),this.userParameter.value&&(t.parameter=this.userParameter.value),e.http.get(l["b"]["admin_searchUser"],{params:t}).then(t=>{const a=t.data;if(1==a.success)return e.userListData=a.data,void(e.total=a.total);e.$Message.error(a.message||a.code)}).finally(()=>{e.load=!1,a()})})},onEditUser(e){this.userEditModel=!0,this.editUserData=Object.assign(this.editUserData,this.userListData[e]),this.$refs.privilegesTag&&this.$refs.privilegesTag.update(this.editUserData.privilege),this.$refs.introduction&&this.$refs.introduction.updateContent(this.editUserData.userIntroduction)},async setUser(e,t,a){await this.http.post("admin/setUser",{data:{data:{id:e,action:t,role:a}}}).then(e=>{const t=e.data;1!=t.success&&this.$Message.error(t.message||t.code)})},async setUserAttr(){return new Promise((e,t)=>{let a=this.editUserData.attr;delete a.valid,delete a.language,delete a.registerIP,delete a.lastSigninIP,delete a.freezeOfNoBinding,this.http.post("admin/setUserAttr",{data:{data:{id:this.editUserData.id,username:this.editUserData.username,attr:a,userIntroduction:a.userIntroduction}}}).then(a=>{const s=a.data;1!=s.success?(this.$Message.error(s.message||s.code),t()):e()})})},handlePageChange(e){this.skip=e,this.getUserList()},handlePageSizeChange(e){this.limit=e,this.getUserList()},onReset(){this.skip=1,this.limit=20,this.order="desc",this.total=0}}}),g=h,p=(a("0810"),a("2877")),v=Object(p["a"])(g,o,n,!1,null,"6f7893f0",null),f=v.exports,b=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("p",{staticClass:"hint"},[e._v("此处名单将禁用账户，用户无法继续登陆账户；如果仍然需要保留账户，并且依旧能赋予黑名单限制，可以在账户身份中添加'黑名单'身份来限制用户网站使用范围")]),t("p",{staticClass:"hint"},[e._v("Use with caution, and your actions will be recorded")]),t("br"),t("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[t("Select",{attrs:{filterable:"","remote-method":e.getSearchUser,loading:e.searchLoading},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},e._l(e.searchBlockedUserList,(function(a,s){return t("Option",{key:s,attrs:{value:a.username,disabled:!0}},[t("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[e._v(" "+e._s(a.username)+" ("+e._s(a.id)+") ")]),t("Col",[t("PrivilegesTag",{attrs:{data:a.privilege}})],1),t("Col",[t("Button",{attrs:{size:"small",disabled:e.isDeleteExecutable},on:{click:function(t){return e.onAddUserBlocked(e.searchBlockedUserList[s])}}},[t("Icon",{attrs:{type:"md-add"}})],1)],1)],1)],1)})),1)],1),t("Col",[t("router-link",{attrs:{to:{name:"admin",params:{pagename:"admin_operation_log"}}}},[e._v(" "+e._s(e.$t("profile.admin.menu.adminOperationLog"))+" ")])],1)],1),t("br"),t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getBlockedUserAll}},[t("Icon",{class:e.blockedLoading?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),e.blockedUserList.length>0?e._l(e.blockedUserList,(function(a,s){return t("Card",{key:s,staticClass:"interval-card",attrs:{"dis-hover":""}},[t("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[t("BusinessCard",{attrs:{id:a.id,showAdminUserInfo:!0}},[t("b",[e._v(e._s(a.username))]),e._v(" ("+e._s(a.id)+") ")])],1),t("Col",[a.privilege?t("PrivilegesTag",{ref:`tag_${a.id}_privilegesTag`,refInFor:!0,attrs:{data:a.privilege}}):e._e()],1),t("Col",[t("Button",{attrs:{disabled:e.isDeleteExecutable},on:{click:function(t){return e.onRemoveUserBlocked(e.blockedUserList[s])}}},[t("Icon",{attrs:{type:"md-trash"}}),e._v(" Removal Blocked ")],1)],1)],1)],1)})):t("Card",{attrs:{"dis-hover":""}},[t("Empty")],1),t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),t("br")],2)},_=[],y=a("02bc"),C=new r["a"]({name:"blockedUsers",data(){return{searchName:"",searchLoading:!1,searchBlockedUserList:[],blockedLoading:!1,blockedModel:!1,blockedUserList:[],editUserData:{attr:{language:"",introduction:""},temporaryPrivilege:{},privilege:[]},skip:1,limit:20,total:0,order:null}},components:{PrivilegesTag:m["a"],BusinessCard:c["a"],Empty:y["a"]},created(){this.http=l["d"].call(this),this.getBlockedUserAll()},methods:{handlePageChange(e){this.skip=e,this.getBlockedUserAll()},handlePageSizeChange(e){this.limit=e,this.getBlockedUserAll()},getSearchUser(e){e&&(this.searchLoading=!0,this.http.get(l["b"]["admin_searchUser"],{params:{name:e,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order,parameter:"username"}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error({content:t.message||t.code,duration:3}):this.searchBlockedUserList=t.data}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.searchLoading=!1}))},getBlockedUserAll(){this.blockedLoading=!0,this.http.get(l["b"]["admin_blockedUserAll"],{params:{skip:this.skip-1,limit:this.limit}}).then(e=>{const t=e.data;if(1===t.success)return this.blockedUserList=t.data,void(this.total=t.total);this.$Message.error({content:t.message||t.code,duration:3})}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.blockedLoading=!1})},onOperatingAccountStatus(e,t){e&&(t||["logic","restore"].includes(t))?(this.delUserLoad=!0,this.http.post(l["b"]["admin_delUser"],{data:{data:{type:t,id:e}}}).then(e=>{const t=e.data;if(1===t.success)return this.$Message.success(t.code),void(this.searchBlockedUserList=[]);this.$Message.error(t.message||t.code)}).finally(()=>{this.getBlockedUserAll(),this.delUserLoad=!1,this.delUserModel=!1})):this.$Message.error(this.$i18n.t("signup.fillIn"))},onAddUserBlocked(e){const{id:t}=e;this.onOperatingAccountStatus(t,"logic")},onRemoveUserBlocked(e){const{id:t}=e;this.onOperatingAccountStatus(t,"restore")}},computed:{isDeleteExecutable(){return!l["a"].checkPrivilegeGroup(this.currentUser.userinfo,["root","dev"])}}}),U=C,k=(a("da32"),Object(p["a"])(U,b,_,!1,null,"5cd8e560",null)),w=k.exports,T=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("p",{staticClass:"hint"},[e._v("Here you can search for users on the site and add a gag, which prevents users from Posting anything on the site")]),t("p",{staticClass:"hint"},[e._v("Unable to add an administrator user")]),t("p",{staticClass:"hint"},[e._v("Use with caution, and your actions will be recorded")]),t("br"),t("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[t("Select",{attrs:{filterable:"","remote-method":e.getSearchMuteUser,loading:e.searchLoading},model:{value:e.muteSearchName,callback:function(t){e.muteSearchName=t},expression:"muteSearchName"}},e._l(e.searchMuteUserList,(function(a,s){return t("Option",{key:s,attrs:{value:a.username,disabled:!0}},[t("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[t("b",[e._v(e._s(a.username))]),e._v(" ("+e._s(a.id)+") ")]),t("Col",[t("PrivilegesTag",{attrs:{data:a.privilege}})],1),t("Col",[t("Button",{attrs:{type:"dashed",size:"small",disabled:!e.isAdmin},nativeOn:{click:function(t){return e.showMuteAlert(a.id)}}},[t("Icon",{attrs:{type:"md-add"}}),t("Icon",{attrs:{type:"md-mic",title:"mute user"}})],1)],1)],1)],1)})),1)],1),t("Col",[t("router-link",{attrs:{to:{name:"admin",params:{pagename:"admin_operation_log"}}}},[e._v(" "+e._s(e.$t("profile.admin.menu.adminOperationLog"))+" ")])],1)],1),t("br"),t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getMuteUsers}},[t("Icon",{class:e.queryMuteUsersLoading?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),e.muteUserList.length>0?e._l(e.muteUserList,(function(a,s){return t("Card",{key:s,staticClass:"interval-card",attrs:{"dis-hover":""}},[t("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[t("b",[e._v(e._s(a.username))]),e._v(" ("+e._s(a.id)+") "),t("p",{staticClass:"description"},[e._v(" Gag time: "),t("Time",{attrs:{time:a.attr.mute}})],1)]),t("Col",[t("PrivilegesTag",{attrs:{data:a.privilege}})],1),t("Col",[t("Button",{attrs:{disabled:!e.isAdmin},on:{click:function(t){return e.muteUser("remove",a.id)}}},[t("Icon",{attrs:{type:"md-mic-off",title:"remove mute"}}),e._v(" Removal Mute ")],1)],1)],1)],1)})):t("Card",{attrs:{"dis-hover":""}},[t("Empty")],1),t("br"),t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),t("Modal",{on:{"on-ok":e.modalOk,"on-cancel":function(t){e.mute.show=!1}},model:{value:e.mute.show,callback:function(t){e.$set(e.mute,"show",t)},expression:"mute.show"}},[t("p",{staticStyle:{color:"#333","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("Select the time duration for mute")])]),t("Form",[t("FormItem",[t("Select",{model:{value:e.mute.value,callback:function(t){e.$set(e.mute,"value",t)},expression:"mute.value"}},e._l([{value:0,text:"10 mins"},{value:1,text:"1 hr"},{value:2,text:"12 hrs"},{value:3,text:"1 day"},{value:4,text:"1 week"},{value:5,text:"1 month"}],(function(a){return t("Option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.text)+" ")])})),1)],1),t("FormItem",[t("Checkbox",{model:{value:e.mute.isNoticeIntraStationUser,callback:function(t){e.$set(e.mute,"isNoticeIntraStationUser",t)},expression:"mute.isNoticeIntraStationUser"}},[e._v("是否将此禁令通知玩家？")])],1)],1)],1)],2)},I=[],x=new r["a"]({name:"muteUsers",data(){return{mute:{value:"0",id:"",show:!1,isNoticeIntraStationUser:!1},muteSearchName:"",muteUserList:[],queryMuteUsersLoading:!1,searchMuteUserList:[],searchLoading:!1,skip:1,limit:20,total:0,order:null}},components:{PrivilegesTag:m["a"],Empty:y["a"]},created(){this.http=l["d"].call(this),this.getMuteUsers()},methods:{showMuteAlert(e){this.mute.id=e,this.mute.show=!0},modalOk(){this.muteUser("add",this.mute.id,this.mute.value)},muteUser(e,t,a=0){const{isNoticeIntraStationUser:s}=this.mute;if(!a&&!t&&!e)return!1;this.http.post(l["b"]["admin_muteUser"],{data:{data:{type:e,id:t,value:a},isNotice:s,language:l["e"].exchangeLangField(this.$root.$i18n.locale)}}).then(e=>{const t=e.data;if(1===t.success)return this.getMuteUsers(),void this.$Message.success({content:t.message||t.code,duration:3});this.$Message.error({content:t.message||t.code,duration:3})}).catch(e=>{this.$Message.error(e.code)})},handlePageChange(e){this.skip=e,this.getMuteUsers()},handlePageSizeChange(e){this.limit=e,this.getMuteUsers()},getSearchMuteUser(e){e&&(this.searchLoading=!0,this.http.get(l["b"]["admin_searchUser"],{params:{name:e,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order,parameter:"username"}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error({content:t.message||t.code,duration:3}):this.searchMuteUserList=t.data}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.searchLoading=!1}))},getMuteUsers(){this.queryMuteUsersLoading=!0,this.http.get(l["b"]["admin_muteUserAll"],{params:{skip:this.skip-1,limit:this.limit,order:this.order}}).then(e=>{const t=e.data;if(1===t.success)return this.muteUserList=t.data,this.total=t.total,void(this.searchMuteUserList=[]);this.$Message.error({content:t.message||t.code,duration:3})}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.queryMuteUsersLoading=!1})}}}),D=x,$=(a("4741"),Object(p["a"])(D,T,I,!1,null,"e7b3f98c",null)),L=$.exports,P=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Row",{attrs:{type:"flex",align:"middle"}},[t("Col",[t("Select",{on:{"on-change":e.getCommentAllList},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.typeArray,(function(a,s){return t("Option",{key:s,attrs:{value:a}},[e._v(e._s(a))])})),1)],1),"judgement"==e.typeValue?[t("Col",[t("Select",{on:{"on-change":e.getCommentTypeList},model:{value:e.judgementType.value,callback:function(t){e.$set(e.judgementType,"value",t)},expression:"judgementType.value"}},e._l(e.judgementType.list,(function(a,s){return t("Option",{key:s,attrs:{value:a.value}},[e._v(" "+e._s(a.title)+" ")])})),1)],1)]:e._e(),"banAppeal"==e.typeValue?[t("Col",[t("Select",{on:{"on-change":e.getCommentTypeList},model:{value:e.banAppealStats.value,callback:function(t){e.$set(e.banAppealStats,"value",t)},expression:"banAppealStats.value"}},e._l(e.banAppealStats.list,(function(a,s){return t("Option",{key:s,attrs:{value:a.value}},[e._v(" "+e._s(a.title)+" ")])})),1)],1)]:e._e(),t("Col",{attrs:{flex:"1"}}),t("Col",[t("Row",{attrs:{gutter:10}},[t("Col",[t("Select",{attrs:{value:"id"}},[t("Option",{attrs:{value:"id"}},[e._v("id")])],1)],1),t("Col",[t("Input",{staticStyle:{width:"280px"},attrs:{type:"text",search:"","enter-button":""},on:{"on-enter":e.getSearchComment,"on-search":e.getSearchComment},model:{value:e.searchCommentValue,callback:function(t){e.searchCommentValue=t},expression:"searchCommentValue"}})],1)],1)],1)],2),t("br"),t("Row",[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getCommentAllList}},[t("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),e.commentList.length>0?t("div",e._l(e.commentList,(function(a,s){return t("div",{key:s},[t("Card",{attrs:{padding:0,"dis-hover":""}},[t("div",{attrs:{slot:"title"},slot:"title"},["banAppeal"===a.type?t("div",[t("Tag",[e._v("COMMENT")]),t("Tag",[e._v(e._s(a.type))]),t("Tag",[e._v(e._s(a.appealStatus))])],1):e._e(),"judgement"===a.type?t("div",[t("Tag",[e._v("COMMENT")]),t("Tag",[e._v(e._s(a.type))]),t("Tag",[e._v(e._s(a.judgeAction))])],1):e._e(),"reply"===a.type?t("div",[t("Tag",[e._v("COMMENT")]),t("Tag",[e._v(e._s(a.type))]),t("Tag",[e._v(e._s(a.id))])],1):e._e(),"all"===a.type?t("div",[t("Tag",[e._v("COMMENT")]),t("Tag",[e._v(e._s(a.id))]),t("Tag",[e._v(e._s(a.type))])],1):e._e(),"report"===a.type?t("div",[t("Tag",[e._v("REPORT")]),t("Tag",[e._v(e._s(a.toOriginName))]),t("Tag",[e._v(e._s(a.toOriginPersonaId))])],1):e._e(),t("Time",{attrs:{time:a.createTime,type:"date"}}),e._v(" : "),t("BusinessCard",{attrs:{id:a.byUserId,showAdminUserInfo:!0}},[t("a",{attrs:{href:"javascript:void(0)"}},[t("b",[e._v(e._s(a.username))])])]),e._v(" "+e._s(e.$t("basic.button.reply"))+" "),t("router-link",{attrs:{to:{name:"player",params:{ouid:a.toOriginPersonaId}}}},[t("span",[e._v(e._s(a.toOriginName))])]),e._v(" ("+e._s(a.id)+") ")],1),t("div",{attrs:{slot:"extra"},slot:"extra"},[t("a",{attrs:{href:"javascript:void(0)"}},[t("Tooltip",{attrs:{content:"Edit Comment"}},[t("Button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openCommentModeAsIndex(s)}}},[t("Icon",{attrs:{type:"md-create"}}),e._v(" id: "+e._s(a.id)+" ")],1)],1)],1),t("Divider",{attrs:{type:"vertical"}}),t("a",{attrs:{href:"javascript:void(0)"}},[t("Tooltip",{attrs:{content:"Open Player Page"}},[t("Button",{attrs:{size:"small",to:{name:"player",params:{ouid:a.toOriginPersonaId}}}},[t("Icon",{attrs:{type:"ios-eye"}})],1)],1)],1)],1),t("HtmlWidget",{staticClass:"comment-html",attrs:{html:a.content}})],1),t("br")],1)})),0):t("Card",{attrs:{"dis-hover":""}},[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]),t("br"),t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}}),t("Modal",{attrs:{"footer-hide":""},model:{value:e.commentEditModel,callback:function(t){e.commentEditModel=t},expression:"commentEditModel"}},[t("Form",{ref:"commentFormValidate",attrs:{model:e.editCommentFrom,rules:e.commentRuleValidate,"label-position":"top"}},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{prop:"content"}},[t("Card",{attrs:{"dis-hover":"",padding:0}},[t("Textarea",{ref:"commentTextarea",attrs:{maxlength:65535},model:{value:e.editCommentFrom.content,callback:function(t){e.$set(e.editCommentFrom,"content",t)},expression:"editCommentFrom.content"}})],1)],1)],1),t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{prop:"videoLink",label:"videoLink"}},[t("Input",{attrs:{maxlength:255},model:{value:e.editCommentFrom.videoLink,callback:function(t){e.$set(e.editCommentFrom,"videoLink",t)},expression:"editCommentFrom.videoLink"}})],1)],1)],1)],1),t("div",{attrs:{solt:"footer"}},[t("Row",[t("Col",{attrs:{flex:"1"}}),t("Col",[t("Button",{attrs:{type:"primary",loading:e.commentEditLoad},on:{click:e.commentSubmit}},[e._v(" "+e._s(e.$t("basic.button.submit"))+" ")])],1)],1)],1)],1)],1)},M=[],F=a("617b"),S=(a("4362"),new r["a"]({data(){return{commentEditModel:!1,commentEditLoad:!1,editCommentFrom:{id:0,content:"",videoLink:""},commentRuleValidate:{content:[{required:!0,trigger:"blur"}],videoLink:[{trigger:"blur"}]},judgementType:{value:"kill",list:[{title:"Comfirmd",value:"kill"},{title:"Farm Weapon",value:"farm"},{title:"Suspicious",value:"suspect"},{title:"MOSS Proof",value:"innocent"},{title:"Under discussion",value:"discuss"},{title:"Voted",value:"guilt"},{title:"Invalid report",value:"invalid"}]},banAppealStats:{value:"open",list:[{title:"Open",value:"open"},{title:"Lock",value:"lock"},{title:"Close",value:"close"}]},searchCommentValue:"",load:!1,commentList:[],typeValue:"all",typeArray:["all","report","reply","judgement","banAppeal"],skip:1,limit:20,order:"desc",total:0}},components:{BusinessCard:c["a"],HtmlWidget:F["a"],Textarea:u["a"]},created(){this.http=l["d"].call(this),this.loadData()},watch:{$route:"loadData"},methods:{async loadData(){await l["l"].initUtil().then(e=>{this.games=e.gameName}),this.getCommentAllList()},openCommentModeAsIndex(e){l["a"].checkPrivilegeGroup(this.currentUser.userinfo,["super","root","dev"])?(this.editCommentFrom=this.commentList[e],this.openCommentModeBase()):this.$Message.error(this.$i18n.t("basic.tip.noAccess"))},openCommentModeAsData(e){this.editCommentFrom=e,this.openCommentModeBase()},openCommentModeBase(){this.$refs.commentTextarea&&this.$refs.commentTextarea.updateContent(this.editCommentFrom.content),this.commentEditModel=!0},handlePageChange(e){this.skip=e,this.getCommentAllList()},handlePageSizeChange(e){this.limit=e,this.getCommentAllList()},commentSubmit(){if(!this.editCommentFrom.id||!this.editCommentFrom.content)return;if(!l["a"].checkPrivilegeGroup(this.currentUser.userinfo,["super","root","dev"]))return void this.$Message.error(this.$i18n.t("basic.tip.noAccess"));let e={id:this.editCommentFrom.id,content:this.editCommentFrom.content};this.editCommentFrom.videoLink&&(e.videoLink=this.editCommentFrom.videoLink),this.editCommentFrom.isSpam&&(e.isSpam=this.editCommentFrom.isSpam),this.editCommentFrom.valid&&(e.valid=this.editCommentFrom.valid),this.http.post(l["b"]["admin_setComment"],{data:{data:e}}).then(e=>{const t=e.data;1!=t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.code)}).finally(()=>{this.commentEditModel=!1,this.load=!1,this.getCommentAllList()})},getSearchComment(){const e=this.searchCommentValue;e&&this.http.get(l["b"]["player_timeline_item"],{params:{id:this.searchCommentValue}}).then(e=>{const t=e.data;1!=t.success?this.$Message.error(t.message||t.code):this.openCommentModeAsData(t.data)}).finally(()=>{this.load=!1})},getCommentAllList(){this.load=!0,this.http.get(l["b"]["admin_commentAll"],{params:{type:this.typeValue,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order}}).then(e=>{const t=e.data;if(1==t.success)return this.commentList=t.data,void(this.total=t.total);this.$Message.error(t.message||t.code)}).finally(()=>{this.load=!1})},getCommentTypeList(){this.load=!0;let e={};"banAppeal"===this.typeValue&&(e.appealStatus=this.banAppealStats.value),"judgement"===this.typeValue&&(e.judgeAction=this.judgementType.value),this.http.get(l["b"]["admin_CommentTypeList"],{params:{type:this.typeValue,judgeAction:e.judgeAction,banAppealStats:e.appealStatus,skip:this.skip-1,limit:this.limit,order:this.order}}).then(e=>{const t=e.data;if(1==t.success)return this.commentList=t.data,void(this.total=t.total);this.$Message.error(t.message||t.code)}).finally(()=>{this.load=!1})}}})),z=S,O=(a("9faf"),Object(p["a"])(z,P,M,!1,null,"7be33caa",null)),A=O.exports,V=function(){var e=this,t=e._self._c;return t("div",[e.verificationList.length>0?e._l(e.verificationList,(function(a,s){return t("Card",{key:s,staticClass:"interval-card",attrs:{"dis-hover":""}},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{xs:{span:6}}},[a.username?t("b",[e._v(e._s(a.username))]):e._e(),e._v(" "),a.userId?[e._v("("+e._s(a.userId)+")")]:e._e(),t("p",[t("Tag",[e._v(e._s(a.type))])],1)],2),t("Col",{attrs:{flex:"1"}},[t("Input",{attrs:{"show-word-limit":"",readonly:"",type:"textarea",autosize:{min:0,max:10}},model:{value:a.uniqCode,callback:function(t){e.$set(a,"uniqCode",t)},expression:"i.uniqCode"}})],1),t("Col",[t("p",[t("Time",{attrs:{time:a.expiresTime}}),e._v("-"),t("Time",{attrs:{time:a.createTime}})],1)])],1)],1)})):t("Card",{attrs:{"dis-hover":""}},[t("Empty")],1)],2)},N=[],R={name:"verifications",components:{Empty:y["a"]},data(){return{verificationList:[],load:!1,limit:20,skip:1,total:0}},created(){this.http=l["d"].call(this),this.getVerifications()},methods:{getVerifications(){this.load=!0,this.http.get(l["b"]["admin_verifications"],{params:{limit:this.limit,skip:(this.skip-1)*this.limit,total:this.total}}).then(e=>{const t=e.data;1==t.success&&(this.verificationList=t.data,this.total=t.total)}).finally(()=>{this.load=!1})}}},B=R,j=(a("0469"),Object(p["a"])(B,V,N,!1,null,"f5943e08",null)),E=j.exports,q=function(){var e=this,t=e._self._c;return t("div",[t("Row",{attrs:{gutter:30}},[t("Col",{attrs:{flex:"1"}},[t("Input",{attrs:{search:"",type:"text","enter-button":"",placeholder:"input user db id"},on:{"on-enter":e.getUserOperationLog,"on-search":e.getUserOperationLog},model:{value:e.userIdValue,callback:function(t){e.userIdValue=t},expression:"userIdValue"}})],1)],1),t("br"),t("Row",[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getUserOperationLog}},[t("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),t("Card",{attrs:{"dis-hover":"",padding:5}},[e.operationLogs.length>0?e._l(e.operationLogs,(function(a){return t("div",{key:a.id},[t("Row",{attrs:{type:"flex",align:"middle"}},[t("Col",{attrs:{flex:"1"}},[t("div",[t("Tag",[e._v("Log")]),t("Time",{attrs:{time:a.createTime,type:"date"}}),e._v(": "),t("BusinessCard",{attrs:{id:a.byUserId,showAdminUserInfo:!0}},[t("b",[e._v(e._s(a.username))])]),e._v("   action: "),t("Tag",[e._v(" "+e._s(a.action))]),e._v("  "),t("b",[e._v(e._s(a.toUserId))]),e._v(" role: "),t("Tag",[e._v(e._s(a.role))])],1)])],1)],1)})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2)],1)},G=[],H={data(){return{load:!1,operationLogs:[],userIdValue:"",skip:1,limit:40,order:"desc",total:0}},components:{BusinessCard:c["a"]},created(){this.http=l["d"].call(this)},methods:{handlePageChange(e){this.skip=e,this.getBlockedUserAll()},handlePageSizeChange(e){this.limit=e,this.getBlockedUserAll()},getUserOperationLog(){this.load&&!this.userIdValue||(this.load=!0,this.http.get(l["b"]["admin_userOperationLogs"],{params:{id:this.userIdValue,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order}}).then(e=>{const t=e.data;1==t.success&&(this.operationLogs=t.data)}).finally(()=>{this.load=!1}))}}},W=H,J=(a("b17c"),Object(p["a"])(W,q,G,!1,null,"3a8bdb6a",null)),Y=J.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("p",[e._v("-> 右侧功能专门为miku400(iku)设立")]),t("p",[e._v("-> The right function is dedicated to the miku400(iku)")])]),t("Col",[t("Poptip",{ref:"filesPoptip",attrs:{placement:"bottom-end",trigger:"click",width:"400","popper-class":"files-poptip",padding:"20px 30px"}},[t("Button",[t("Icon",{attrs:{type:"md-funnel",size:"15"}})],1),t("Form",{ref:"filesFunnel",attrs:{slot:"content","label-position":"top"},slot:"content"},[t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{flex:"1"}},[t("FormItem",{attrs:{label:"Search Type"}},[t("Select",{model:{value:e.searchTypeValue,callback:function(t){e.searchTypeValue=t},expression:"searchTypeValue"}},e._l(e.searchType,(function(a,s){return t("Option",{key:s,attrs:{value:a}},[e._v(e._s(a))])})),1)],1)],1),t("Col",{attrs:{flex:"1"}},[t("FormItem",{attrs:{label:"Search"}},[t("Input",{attrs:{type:"text",placeholder:"input "+e.searchType.toString()},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1)],1),t("FormItem",{attrs:{label:"Create Time Radiu"}},[t("DatePicker",{attrs:{type:"daterange","split-panels":"",placeholder:"createTime"},on:{"on-change":e.handleCDatepicker}})],1),t("Row",{attrs:{gutter:10}},[t("Col",[t("Button",{on:{click:e.resetFormData}},[e._v(e._s(e.$t("basic.button.reset")))])],1),t("Col",[t("Button",{attrs:{type:"primary",disabled:e.judgementLog.load},on:{click:e.subimtFormData}},[e._v(" "+e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1)],1)],1),t("br"),t("Row",[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getAdminjudgementLog}},[t("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),t("Card",{attrs:{"dis-hover":"",padding:5}},[e.judgementLog.length>0?e._l(e.judgementLog,(function(a,s){return t("div",{key:s},[t("Row",{attrs:{type:"flex",align:"middle"},nativeOn:{click:function(t){return e.$router.push({name:"player",params:{ouid:a.toOriginPersonaId},hash:"#floor-"+a.id})}}},[t("Col",[t("Tag",[e._v("Log")])],1),t("Col",{attrs:{flex:"1"}},[t("div",[t("Time",{attrs:{time:a.createTime,type:"date"}}),e._v(" : "),t("BusinessCard",{attrs:{id:a.byUserId,showAdminUserInfo:!0}},[t("b",[e._v(e._s(a.username))])]),t("span",[e._v(" "+e._s(e.$t("detail.info.judge"))+" ")]),t("a",{attrs:{href:"javascript:void(0)"}},[e._v(e._s(a.toOriginPersonaId))]),t("span",[e._v(" "+e._s(a.cheatMethods.toString())+" "+e._s(e.$t(`basic.action.${e.util.queryAction(a.judgeAction)}.text`)))])],1)]),t("Col",[t("Icon",{attrs:{type:"ios-eye",size:"25"}})],1)],1)],1)})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2),t("br"),t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)},Q=[],X={data(){return{util:l["l"],load:!1,judgementLog:[],searchTypeValue:"userId",searchType:["userId","userName","dbId"],searchValue:"",createTimeFrom:0,createTimeTo:0,timeOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()},shortcuts:[{text:this.$i18n.t("sitestats.timeRange.daily"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.weekly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.monthly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.yearly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-31104e6),[t,e]}}]},currentFilters:{searchTypeValue:null,searchValue:null,createTimeFrom:null,createTimeTo:null},limit:40,skip:1,total:0}},components:{BusinessCard:c["a"]},created(){this.http=l["d"].call(this),this.getAdminjudgementLog()},methods:{getAdminjudgementLog(){this.setFilters();let e={limit:this.limit,skip:(this.skip-1)*this.limit};"userId"==this.currentFilters.searchTypeValue&&this.currentFilters.searchValue&&(e.userId=this.currentFilters.searchValue),"userName"==this.currentFilters.searchTypeValue&&this.currentFilters.searchValue&&(e.userName=this.currentFilters.searchValue),"dbId"==this.currentFilters.searchTypeValue&&this.currentFilters.searchValue&&(e.dbId=this.currentFilters.searchValue),this.currentFilters.createTimeFrom&&(e.createTimeFrom=this.currentFilters.createTimeFrom),this.currentFilters.createTimeTo&&(e.createTimeTo=this.currentFilters.createTimeTo),this.http.post(l["b"]["admin_judgementLog"],{data:e}).then(e=>{const t=e.data;1==t.success&&(this.judgementLog=t.data,this.total=t.total)}).finally(()=>{this.load=!1})},resetFormData(){this.searchValue="",this.createTimeFrom=0,this.createTimeTo=0,this.$refs["filesPoptip"].handleClose(),this.$refs["filesFunnel"].resetFields()},subimtFormData(){this.skip=1,this.getAdminjudgementLog()},handleCDatepicker(e){this.createTimeFrom=new Date(e[0]).getTime(),this.createTimeTo=new Date(e[1]).getTime(),this.skip=1},handlePageSizeChange(e){this.limit=e,this.getAdminjudgementLog()},handlePageChange(e){this.skip=e,this.getAdminjudgementLog()},setFilters(){this.currentFilters={searchTypeValue:this.searchTypeValue,searchValue:this.searchValue,createTimeFrom:this.createTimeFrom,createTimeTo:this.createTimeTo}}}},Z=X,ee=(a("bd11"),Object(p["a"])(Z,K,Q,!1,null,"1d7227f6",null)),te=ee.exports,ae=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Form",[t("FormItem",[t("Row",{attrs:{gutter:10}},[t("Col",[t("DatePicker",{attrs:{type:"datetimerange",options:e.timeOptions,format:"yyyy-MM-dd"},on:{"on-ok":e.change},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("Col",{attrs:{flex:"1",align:"right"}},[t("RadioGroup",{staticClass:"game-type",attrs:{type:"button"},model:{value:e.gameName,callback:function(t){e.gameName=t},expression:"gameName"}},[t("Radio",{attrs:{label:"all",value:"all",disabled:""}},[e._v(" "+e._s(e.$t("basic.games.all"))+" ")]),e._l(e.games,(function(s){return t("Radio",{key:s.value,class:e.gameName==s.value?"gametype-select":"",style:"background-image: url("+a("e153")("./"+s.bk_file+"/bf.jpg")+");",attrs:{label:s.value,disabled:s.disabled,"aria-radio":""}},[t("Tooltip",{attrs:{content:e.$t("basic.games."+s.value),placement:"top-start"}},[s.logo_src?t("img",{attrs:{height:"35",src:a("0b05")("./"+s.bk_file+"/logo.png")}}):t("span",[e._v(e._s(s.full_name))])])],1)}))],2)],1)],1)],1),e.adminTab.length>0?t("FormItem",[t("RadioGroup",{staticClass:"game-type",attrs:{type:"button"},model:{value:e.adminId,callback:function(t){e.adminId=t},expression:"adminId"}},e._l(e.adminTab,(function(a){return t("Radio",{key:a.byUserId,attrs:{label:a.byUserId}},[e._v(" "+e._s(a.username)+" - ["+e._s(a[e.gameName])+"] - ("+e._s(a.scale)+"%) ")])})),1)],1):e._e()],1),t("Card",{attrs:{"dis-hover":"",padding:5}},[e.adminLogs.length>0?e._l(e.adminLogs,(function(a,s){return t("div",{key:s},[t("Row",{attrs:{type:"flex",align:"middle"},nativeOn:{click:function(t){return e.$router.push({name:"player",params:{ouid:a.toOriginPersonaId}})}}},[t("Col",[t("Tag",[e._v("Log")])],1),t("Col",{attrs:{flex:"1"}},[t("div",[t("Time",{attrs:{time:a.createTime,type:"date"}}),e._v(" : "),t("BusinessCard",{attrs:{id:a.byUserId,showAdminUserInfo:!0}},[t("b",[e._v(e._s(a.username))])]),t("span",[e._v(" "+e._s(e.$t("detail.info.judge"))+" ")]),t("a",{staticClass:"text-distinguishing-letter",attrs:{href:"javascript:void(0)"}},[t("code",[e._v(e._s(a.originName))]),e._v(" ("+e._s(a.toOriginPersonaId)+")")]),t("span",[e._v(" "+e._s(a.cheatMethods.toString())+" "+e._s(e.$t(`basic.action.${e.util.queryAction(a.judgeAction)}.text`)))])],1)]),t("Col",[t("router-link",{attrs:{to:{name:"player",params:{ouid:a.toOriginPersonaId}}}},[t("Icon",{attrs:{type:"ios-eye",size:"25"}})],1)],1)],1)],1)})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2)],1)},se=[],ie=new r["a"]({data(){return{util:l["l"],load:!1,log:[],admin:[],adminId:"",date:[],timeOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()},shortcuts:[{text:this.$i18n.t("sitestats.timeRange.daily"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.weekly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.monthly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.yearly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-31104e6),[t,e]}}]},gameName:"bf1",games:[]}},components:{BusinessCard:c["a"]},watch:{$route:"loadData"},created(){this.http=l["d"].call(this),this.loadData()},methods:{async loadData(){await l["l"].initUtil().then(e=>{this.games=e.gameName})},getAdminLog({createTimeto:e,createTimeFrom:t}={}){let a={};this.load=!0,e&&(a["createTimeto"]=e),t&&(a["createTimeFrom"]=t),this.http.get(l["b"]["admin_adminLog"],{params:a}).then(e=>{const{data:t}=e.data,a=[],s=t.filter(e=>!e.privilege.includes("super"));s.forEach(e=>{const t=a.findIndex(t=>t.byUserId==e.byUserId),s=e.games[0];-1==t?a.push({...e,username:e.username,byUserId:e.byUserId,[s]:1}):a[t][s]?a[t][s]++:a[t][s]=1}),this.admin=a,this.log=s,this.adminId=this.admin[0]?this.admin[0].byUserId:0}).finally(()=>{this.load=!1})},change(e){const[t,a]=this.date,s=new Date(t),i=new Date(a),r=`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()}`,o=`${i.getFullYear()}-${i.getMonth()+1}-${i.getDate()}`;this.getAdminLog({createTimeFrom:r,createTimeto:o})}},computed:{adminLogs(){return this.currentlog.filter(e=>e.byUserId==this.adminId)},currentlog(){return this.log.filter(e=>e.games[0]==this.gameName)},adminTab(){let{admin:e,currentlog:t,gameName:a}=this;const s=t.length;return e.sort((e,t)=>t[a]-e[a]).map(e=>({...e,scale:parseInt(100*e[a]/s)})).filter(e=>e.scale>5)}}}),re=ie,oe=Object(p["a"])(re,ae,se,!1,null,null,null),ne=oe.exports,le=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Tabs",{attrs:{value:e.tagsName}},[e.isAdmin?t("TabPane",{attrs:{label:e.$t("profile.chat.tabsSend.itemName"),name:"chat"}},[t("Card",{attrs:{"dis-hover":""}},[t("Form",{attrs:{slot:"title",model:e.message,rules:e.message.ruleValidate},slot:"title"},[t("Row",{attrs:{gutter:30}},[t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.chat.tabsSend.messageMethod"),prop:"type"}},[t("Select",{attrs:{transfer:!0},model:{value:e.message.type,callback:function(t){e.$set(e.message,"type",t)},expression:"message.type"}},e._l(e.message.list,(function(a,s){return t("Option",{directives:[{name:"show",rawName:"v-show",value:a.privilege.filter(t=>e.currentUser.userinfo.privilege.includes(t)).length,expression:"item.privilege.filter(p => currentUser.userinfo.privilege.includes(p) ).length"}],key:s,attrs:{value:a.title,label:e.$t("profile.chat.types."+a.title+".text")}},[e._v(" "+e._s(e.$t("profile.chat.types."+a.title+".text"))+" "),t("p",{staticStyle:{margin:"5px 0","font-size":"10px"}},[e._v(" "+e._s(e.$t("profile.chat.types."+a.title+".describe"))+" ")]),t("PrivilegesTag",{attrs:{data:a.privilege}})],1)})),1)],1)],1),e.message.typeDictionary.includes(e.message.type)?t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:e.$t("profile.chat.tabsSend.messageID"),prop:"id"}},[t("AutoComplete",{attrs:{data:e.message.playerList,placeholder:e.$t("profile.chat.tabsSend.messageID")},model:{value:e.message.id,callback:function(t){e.$set(e.message,"id",t)},expression:"message.id"}},e._l(e.message.playerList,(function(a,s){return t("Option",{key:s,attrs:{value:a.id}},[t("Avatar",{attrs:{src:a.avatarLink||""}},[e._v(e._s(a.username[0]))]),e._v("  "),t("span",[e._v(e._s(a.username))]),t("Tag",{staticStyle:{float:"right"}},[e._v(" "+e._s(a.id)+" ")])],1)})),1)],1)],1):e._e()],1),t("FormItem",{attrs:{label:e.$t("profile.chat.tabsSend.content"),prop:"content"}},[t("Input",{attrs:{"show-word-limit":"",type:"textarea",placeholder:e.$t("profile.chat.placeholder"),maxlength:1e3,autosize:{minRows:5,maxRows:10}},model:{value:e.message.content,callback:function(t){e.$set(e.message,"content",t)},expression:"message.content"}})],1)],1),t("Row",{attrs:{gutter:10}},[t("Col",{attrs:{flex:"1"}}),t("Col",[t("Button",{directives:[{name:"voice-button",rawName:"v-voice-button"}],attrs:{type:"primary",loading:e.message.load,disabled:!e.message.type||!e.message.content},on:{click:e.putMessage}},[e._v(e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1):e._e()],1)},de=[],ce=a("c7c5"),me=new r["a"]({name:"messagePush",data(){return{tagsName:"chat",message:{list:ce.sendTypes,typeDictionary:ce.typeDictionary,ruleValidate:{type:[{required:!0,trigger:"blur"}],id:[{required:!0,trigger:"blur"}],content:[{required:!0,trigger:"blur"}]},messages:[],playerList:[],show:!1,load:!1,type:"",id:"",content:""}}},components:{BusinessCard:c["a"],PrivilegesTag:m["a"]},created(){this.http=l["d"].call(this)},methods:{putMessage(){const{uId:e}=this.$route.params;this.http.post(l["b"]["user_message"],{data:{data:{toUserId:this.message.id||e,type:this.message.type,content:this.message.content}}}).then(e=>{1==e.data.success?this.$Message.success(e.data.message):this.$Message.error(e.data.message)}).finally(()=>{this.resetMessageFrom(),l["f"].playSendVoice&&l["f"].playSendVoice(),this.message.load=!1,this.message.show=!1})}},computed:{}}),ue=me,he=Object(p["a"])(ue,le,de,!1,null,"06403707",null),ge=he.exports,pe=function(){var e=this,t=e._self._c;return t("div",[t("Row",[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getChatLog}},[t("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),t("div",[e.chatList.length>0?e._l(e.chatList,(function(a,s){return t("div",{key:s},[t("div",{staticClass:"ivu-card ivu-card-bordered ivu-card-dis-hover"},[t("div",{staticClass:"ivu-card-head"},[t("Tag",[e._v("Log")]),t("Tag",[e._v(e._s(a.type))]),t("Time",{attrs:{time:a.createTime,type:"date"}}),e._v(" : "),t("BusinessCard",{attrs:{id:a.byUserId,showAdminUserInfo:!0}},[t("b",[e._v(e._s(a.byUserId||"N/A"))])]),e._v(" -> "),t("BusinessCard",{attrs:{id:a.byUserId,showAdminUserInfo:!0}},[t("b",[e._v(e._s(a.toUserId||"N/A"))])]),t("div",{staticClass:"ivu-card-extra"},[e._v(" "+e._s(e.$t("profile.chat.tabsList.form."+(1==a.haveRead?"read":"unread")))+" ")])],1),t("Html",{attrs:{html:a.content}})],1),t("br")])})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2),t("br"),t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)},ve=[],fe=a("1b08"),be={name:"chat",data(){return{load:!1,chatList:[],limit:20,skip:1,total:0}},components:{BusinessCard:c["a"],Html:fe["a"]},created(){this.http=l["d"].call(this),this.getChatLog()},methods:{getChatLog(){this.load||(this.load=!0,this.http.get(l["b"]["admin_chatLog"],{params:{limit:this.limit,skip:(this.skip-1)*this.limit,total:this.total}}).then(e=>{const t=e.data;if(1==t.success)return t.data.forEach(e=>e.content=`<p>${e.content}</p>`),this.chatList=t.data,void(this.total=t.total);this.$Message.error(t)}).finally(()=>{this.load=!1}))},handlePageSizeChange(e){this.limit=e,this.getChatLog()},handlePageChange(e){this.skip=e,this.getChatLog()}}},_e=be,ye=Object(p["a"])(_e,pe,ve,!1,null,null,null),Ce=ye.exports,Ue=function(){var e=this,t=e._self._c;return t("div",[t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}}),t("Col",[t("Poptip",{ref:"filesPoptip",attrs:{placement:"bottom-end",trigger:"click",width:"400","popper-class":"files-poptip",padding:"20px 30px"}},[t("Button",[t("Icon",{attrs:{type:"md-funnel",size:"15"}})],1),t("Form",{ref:"filesFunnel",attrs:{slot:"content","label-position":"top"},slot:"content"},[t("FormItem",{attrs:{label:"User dbId"}},[t("Input",{attrs:{type:"text",placeholder:"input user dbId"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1),t("FormItem",{attrs:{label:"Create Time Radiu"}},[t("DatePicker",{attrs:{type:"daterange","split-panels":"",placeholder:"createTime"},on:{"on-change":e.handleCDatepicker}})],1),t("Row",{attrs:{gutter:10}},[t("Col",[t("Button",{on:{click:e.resetFormData}},[e._v(e._s(e.$t("basic.button.reset")))])],1),t("Col",[t("Button",{attrs:{type:"primary",disabled:e.deleteFileLoading},on:{click:e.subimtFormData}},[e._v(" "+e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1)],1)],1),t("br"),t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{flex:"1"}},[t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),t("Col",[t("Button",{attrs:{size:"small"},on:{click:e.getFiles}},[t("Icon",{class:e.filesLoading?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),t("br"),t("Card",{attrs:{"dis-hover":""}},[e.files.length>0?t("div",e._l(e.files,(function(a,s){return t("div",{key:s},[t("Row",[t("Col",[t("Tag",[e._v("file")])],1),t("Col",{attrs:{flex:"1"}},[t("p",[t("b",[e._v(e._s(a.filename))])]),t("div",[t("Time",{attrs:{time:a.createTime,type:"datetime"}}),t("Divider",{attrs:{type:"vertical"}}),t("BusinessCard",{attrs:{id:a.byUserId}},[t("router-link",{attrs:{to:{name:"account",params:{uId:a.byUserId}}}},[e._v(e._s(a.byUserId))])],1)],1)]),t("Col",[t("Button",{on:{click:function(t){return e.deleteFileItem(a.filename)}}},[t("Icon",{attrs:{type:"md-trash"}})],1)],1)],1)],1)})),0):t("Empty")],1),t("br"),t("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)},ke=[],we={data(){return{util:l["l"],deleteFileLoading:!1,filesLoading:!1,files:[],userId:"",createTimeFrom:0,createTimeTo:0,timeOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()},shortcuts:[{text:this.$i18n.t("sitestats.timeRange.daily"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.weekly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.monthly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.yearly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-31104e6),[t,e]}}]},limit:40,skip:1,total:0}},components:{BusinessCard:c["a"],Empty:y["a"]},created(){this.http=l["d"].call(this),this.getFiles()},methods:{getFiles(){let e={limit:this.limit,skip:(this.skip-1)*this.limit,data:{}};this.filesLoading||(this.userId&&(e.data.userId=this.userId),this.createTimeFrom&&(e.data.createTimeFrom=this.createTimeFrom),this.createTimeTo&&(e.data.createTimeTo=this.createTimeTo),this.filesLoading=!0,this.http.post(l["b"]["service_files"],{data:e}).then(e=>{const t=e.data;1===t.success&&(this.files=t.data,this.total=t.total)}).finally(()=>{this.filesLoading=!1}))},deleteFileItem(e){this.deleteFileLoading||(this.deleteFileLoading=!0,this.http.delete(l["b"]["service_file"],{data:{filename:e}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success("error")}).finally(()=>{this.deleteFileLoading=!1}))},resetFormData(){this.userId="",this.createTimeFrom=0,this.createTimeTo=0,this.$refs["filesPoptip"].handleClose(),this.$refs["filesFunnel"].resetFields()},subimtFormData(){this.getFiles(),this.resetFormData()},handleCDatepicker(e){this.createTimeFrom=new Date(e[0]).getTime(),this.createTimeTo=new Date(e[1]).getTime(),this.skip=1},handlePageSizeChange(e){this.limit=e,this.getFiles()},handlePageChange(e){this.skip=e,this.getFiles()}}},Te=we,Ie=(a("a339"),Object(p["a"])(Te,Ue,ke,!1,null,null,null)),xe=Ie.exports,De=new r["a"]({name:"profile",data(){return{privileges:[],openMuen:["comment","comm","log"],adminMenuValue:"home",adminMuen:[{title:"management",child:[{title:"user",value:"user",disabled:!1,privilege:["super","root","dev"]},{title:"blockedUsers",value:"blockedUsers",disabled:!1,privilege:["super","root","dev"]},{title:"muteUsers",value:"muteUsers",disabled:!1,privilege:["admin","super","root","dev"]},{title:"comment",value:"comment",disabled:!1,privilege:["super","root","dev"]},{title:"verifications",value:"verifications",disabled:!1,privilege:["root","dev"]}]},{title:"fileManagement",child:[{title:"files",value:"file_list",disabled:!1,privilege:["root","dev"]}]},{title:"messageManagement",child:[{title:"messagePush",value:"chat_push",disabled:!1,privilege:["admin","super","root","dev"]},{title:"messageList",value:"chat_list",disabled:!1,privilege:["super","root","dev"]}]},{title:"log",icon:"ios-paper",child:[{title:"judgementLog",value:"judgement_log",disabled:!1,privilege:["super","root","dev"]},{title:"adminOperationLog",value:"admin_operation_log",disabled:!1,privilege:["super","root","dev"]},{title:"adminOperation",value:"adminOperation",disabled:!1,privilege:["super","root","dev"]}]}]}},components:{user:f,blockedUsers:w,muteUsers:L,verifications:E,comment:A,adminOperationLog:Y,judgementLog:te,chatPush:ge,chatList:Ce,PrivilegesTag:m["a"],adminOperation:ne,fileList:xe},created(){const{pagename:e}=this.$route.params;if(void 0!=e){for(let e=0;e<this.adminMuen.length;e++)if(this.adminMuen[e].child)for(let t=0;t<this.adminMuen[e].child.length;t++)this.adminMuen[e].ignore||(this.adminMuen[e].child[t].disabled=l["a"].checkPrivilegeGroup(this.currentUser.userinfo,this.adminMuen[e].child[t].privilege));this.onMenuActive(e)}else this.onMenuActive("account")},methods:{onMenuActive(e){this.adminMenuValue=e,this.$router.push({name:"admin",params:{pagename:e}})}},computed:{}}),$e=De,Le=(a("5ccd"),Object(p["a"])($e,s,i,!1,null,"3a33765e",null));t["default"]=Le.exports},4741:function(e,t,a){"use strict";a("f7d7")},"5ccd":function(e,t,a){"use strict";a("6022")},6022:function(e,t,a){},"60ec":function(e,t,a){},"755b":function(e,t,a){},"784c":function(e,t,a){},"9faf":function(e,t,a){"use strict";a("e2d4")},a339:function(e,t,a){"use strict";a("60ec")},b17c:function(e,t,a){"use strict";a("bfd6")},bd11:function(e,t,a){"use strict";a("784c")},bfd6:function(e,t,a){},d6b9:function(e,t,a){},da32:function(e,t,a){"use strict";a("755b")},e153:function(e,t,a){var s={"./images/games/bf1/bf.jpg":"e953","./images/games/bf6/bf.jpg":"1c8a","./images/games/bfv/bf.jpg":"e124"};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id="e153"},e2d4:function(e,t,a){},e953:function(e,t,a){e.exports=a.p+"assets/img/bf.41bffcdf.jpg"},f7d7:function(e,t,a){}}]);
//# sourceMappingURL=chunk-7b7ffd4e.2.9.10.js.map