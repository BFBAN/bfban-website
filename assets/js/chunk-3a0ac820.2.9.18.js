(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a0ac820"],{"0379":function(e,t,a){},"0b05":function(e,t,a){var s={"./images/games/bf1/logo.png":"d141","./images/games/bf6/logo.png":"a542","./images/games/bfv/logo.png":"28dd","./images/logo.png":"9d64"};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id="0b05"},"13d5":function(e,t,a){"use strict";var s=a("23e7"),i=a("d58f").left,r=a("a640"),o=a("2d00"),n=a("605d"),l=r("reduce"),d=!n&&o>79&&o<83;s({target:"Array",proto:!0,forced:!l||d},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1c8a":function(e,t,a){e.exports=a.p+"assets/img/bf.350c4f88.jpg"},2953:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("br"),a("Row",[a("Col",{attrs:{xs:{push:1},lg:{push:0}}},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:{name:"home"}}},[e._v(e._s(e.$t("header.index")))]),a("BreadcrumbItem",{attrs:{to:{name:"profile",params:{pagename:"information"}}}},[e._v(e._s(e.$t("header.profile"))+" ")]),a("BreadcrumbItem",[e._v(e._s(e.$t("profile.admin.title")))])],1)],1)],1),a("br"),a("Card",{staticClass:"admin",attrs:{"dis-hover":"",padding:0}},[a("Row",{attrs:{gutter:0}},[a("Col",{attrs:{xs:{span:24},sm:{span:6}}},[a("Menu",{staticClass:"admin-menu",attrs:{mode:e.isMobile?"horizontal":"vertical",width:e.isMobile?null:"100%","open-names":e.openMenu,"active-name":e.adminMenuValue},on:{"on-select":e.onMenuActive}},[a("MenuItem",{attrs:{name:"home"}},[e._v(" "+e._s(e.$t("profile.admin.menu.home"))+" ")]),e._l(e.adminMenus,(function(t,s){return a("MenuGroup",{key:s,attrs:{title:e.isMobile?null:e.$t("profile.admin.menu."+t.title)}},e._l(t.child,(function(t,s){return a("MenuItem",{directives:[{name:"show",rawName:"v-show",value:t.disabled,expression:"j.disabled"}],key:s,attrs:{name:t.value}},[a("Row",[a("Col",{attrs:{flex:"1"}},[t.icon?a("Icon",{attrs:{type:t.icon}}):e._e(),e._v(" "+e._s(e.$t("profile.admin.menu."+t.title))+" ")],1),t.ignore?e._e():a("Col",[a("Poptip",{attrs:{trigger:"hover",transfer:""}},[a("Icon",{attrs:{type:"md-help-circle"}}),a("PrivilegesTag",{attrs:{slot:"content",data:t.privilege},slot:"content"})],1)],1)],1)],1)})),1)}))],2)],1),a("Col",{staticStyle:{padding:"20px"},attrs:{xs:{span:24},sm:{span:18}}},[a("keep-alive",["home"===e.adminMenuValue?a("div",[a("Banner",{staticClass:"index-banner profile-right-content ",attrs:{height:300}},[a("div",{staticClass:"admin-content"},[a("h1",[e._v(e._s(e.currentUser.userinfo.username))]),a("p",[e._v("("+e._s(e.currentUser.userinfo.userId)+")")]),a("br"),a("p",[a("PrivilegesTag",{attrs:{data:e.currentUser.userinfo.privilege}})],1)])]),a("Card",{attrs:{"dis-hover":""}},[a("Row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[e._v(" "+e._s(e.statistics.reports||0)+" ")]),a("span",[e._v(e._s(e.$t("sitestats.reports")))])]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[e._v(" "+e._s(e.statistics.players||0)+" ")]),e._v(" "+e._s(e.$t("sitestats.players"))+" ")]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[e._v(e._s(e.statistics.banAppeals||0))]),e._v(" "+e._s(e.$t("sitestats.banAppeals"))+" ")]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[e._v(" "+e._s(e.statistics.registers||0)+" ")]),a("span",[e._v(e._s(e.$t("sitestats.registers")))])]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[e._v(" "+e._s(e.statistics.confirmed||0)+" ")]),a("span",[e._v(e._s(e.$t("sitestats.confirmed")))])]),a("Divider",{staticClass:"mobile-hide",attrs:{type:"vertical"}}),a("Col",{attrs:{xs:{span:12},lg:{span:3}}},[a("h2",[e._v(e._s(e.statistics.admins||0))]),e._v(" "+e._s(e.$t("sitestats.admins"))+" ")])],1)],1),a("Row",{attrs:{gutter:10,wrap:!0}},[a("Col",{attrs:{lg:{span:24}}},[a("v-chart",{staticClass:"user-chart-op hot-map",attrs:{option:e.stats.userConfig},on:{click:function(t){return e.onRatioClick(t,e.stats.userData)}}})],1),a("Col",{attrs:{xs:{span:24},lg:{span:12}}},[a("Card",{attrs:{"dis-hover":"",padding:0}},[a("v-chart",{ref:"workingRatio",staticClass:"ratio",attrs:{option:e.stats.workingRatioStats},on:{click:function(t){return e.onRatioClick(t,e.stats.workingRatioData)}}}),a("Modal",{attrs:{"footer-hide":"",width:"600px"},model:{value:e.model.workingRatio.value,callback:function(t){e.$set(e.model.workingRatio,"value",t)},expression:"model.workingRatio.value"}},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("h2",[a("b",[e._v(e._s(e.model.workingRatio.data.title||"Detail"))])])]),a("Col",{attrs:{span:"24"}},[a("Card",{attrs:{"dis-hover":"",padding:0}},[a("v-chart",{staticClass:"statistical-percentage",attrs:{option:e.stats.statisticalPercentageStats}})],1),a("br")],1),a("Col",{attrs:{span:"24"}},[a("Row",{attrs:{gutter:20,type:"flex",justify:"space-between",align:"bottom"}},[a("Col",{attrs:{span:"6"}},[e.model.workingRatio.data.max?a("Card",{attrs:{"dis-hover":"",padding:4,align:"center"}},[a("div",[a("BusinessCard",{attrs:{id:e.model.workingRatio.data.max.id}},[a("HtmlLink",{attrs:{text:e.model.workingRatio.data.max.username,"is-poptip":!1,href:"/space/"+e.model.workingRatio.data.max.id+"?username="+e.model.workingRatio.data.max.username}}),e._v(" · "+e._s(e.model.workingRatio.data.max.total||"N/A")+" ")],1)],1),a("b",[e._v("Max")])]):e._e()],1),a("Col",{attrs:{span:"6"}},[a("Card",{attrs:{"dis-hover":"",padding:4,align:"center"}},[a("p",[e._v(e._s(e.statistics.admins-(e.model.workingRatio.data.users&&e.model.workingRatio.data.users.length||0)))]),a("b",[e._v("Have not participated")])])],1),a("Col",{attrs:{span:"6"}},[a("Card",{attrs:{"dis-hover":"",padding:4,align:"center"}},[a("p",[e._v(e._s(e.model.workingRatio.data.users&&e.model.workingRatio.data.users.length||0))]),a("b",[e._v("Participate in")])])],1),a("Col",{attrs:{span:"6"}},[a("Card",{attrs:{"dis-hover":"",padding:4,align:"center"}},[a("p",[e._v(" "+e._s(e.statistics.admins||0))]),a("b",[e._v("All personnel")])])],1)],1)],1),a("Col",{attrs:{span:"24"}},[a("br"),a("Input",{staticClass:"ivu-mb-10",attrs:{placeholder:"search value"},model:{value:e.model.workingRatio.searchValue,callback:function(t){e.$set(e.model.workingRatio,"searchValue",t)},expression:"model.workingRatio.searchValue"}},[a("template",{slot:"prefix"},[a("Icon",{attrs:{type:"ios-search"}})],1)],2)],1)],1),a("br"),a("Row",[a("Col",{attrs:{flex:"1"}}),a("Col",[e.model.workingRatio.data?[e._v(" All Count: "),a("b",[e._v(e._s(e.model.workingRatio.data.total_count||0))])]:e._e()],2)],1),a("div",{staticClass:"working-ratio-ul"},[e.model.workingRatio.data.users&&e.model.workingRatio.data.users.length>0?a("ul",e._l(e.model.workingRatio.data.users,(function(t,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:t.username.indexOf(e.model.workingRatio.searchValue)>=0,expression:"i.username.indexOf(model.workingRatio.searchValue) >= 0"}],key:s},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("BusinessCard",{attrs:{id:t.id}},[a("HtmlLink",{attrs:{text:t.username,"is-poptip":!1,href:"/space/"+t.id+"?username="+t.username}})],1)],1),a("Col",{attrs:{flex:"1"}},[a("Divider",{staticStyle:{margin:"0"},attrs:{dashed:""}})],1),a("Col",{staticClass:"privilege"},[a("HtmlLink",{attrs:{text:t.total||0,"is-poptip":!1,href:"/admin/judgement_log?value="+t.id+"&type=userId&date="+e.model.workingRatio.data.date_as}},[e._v(" "+e._s(t.total||0)+" ")])],1)],1)],1)})),0):e._e()])],1)],1)],1),a("Col",{attrs:{xs:{span:24},lg:{span:12}}},[a("Card",{staticClass:"inactive-user",attrs:{"dis-hover":""}},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("h2",[a("b",[e._v("inactive admin")])])]),a("Col",[a("span",[e._v(" ("+e._s(e.stats.inactiveUserData.length||0)+"/"+e._s(e.statistics.admins||0)+")")])])],1)],1),a("Col",{attrs:{span:"24"}},[a("Input",{staticClass:"ivu-mb-10",attrs:{placeholder:"search value"},model:{value:e.stats.inactiveUserSearchValue,callback:function(t){e.$set(e.stats,"inactiveUserSearchValue",t)},expression:"stats.inactiveUserSearchValue"}},[a("template",{slot:"prefix"},[a("Icon",{attrs:{type:"ios-search"}})],1)],2)],1)],1),a("br"),e.stats.inactiveUserData.length>0?a("ul",{staticClass:"sitestats-ul"},e._l(e.stats.inactiveUserData,(function(t,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:t.username.indexOf(e.stats.inactiveUserSearchValue)>=0,expression:"i.username.indexOf(stats.inactiveUserSearchValue) >= 0"}],key:s},[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("BusinessCard",{attrs:{id:t.id}},[a("HtmlLink",{attrs:{text:t.username,"is-poptip":!1,href:"/space/"+t.id+"?username="+t.username}})],1)],1),a("Col",{attrs:{flex:"1"}},[a("Divider",{staticStyle:{margin:"0"},attrs:{dashed:""}})],1),a("Col",{staticClass:"privilege"},[a("PrivilegesTag",{attrs:{data:t.privilege}})],1)],1)],1)})),0):e._e()],1)],1)],1),a("Spin",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}],attrs:{size:"large",fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"50"}})],1)],1):"user"==e.adminMenuValue?a("user"):"blockedUsers"==e.adminMenuValue?a("blockedUsers"):"muteUsers"==e.adminMenuValue?a("muteUsers"):"verifications"==e.adminMenuValue?a("verifications"):"comment"==e.adminMenuValue?a("comment"):"chat_push"==e.adminMenuValue?a("chatPush"):"chat_list"==e.adminMenuValue?a("chatList"):"file_list"==e.adminMenuValue?a("fileList"):"admin_operation_log"==e.adminMenuValue?a("adminOperationLog"):"message_Log"==e.adminMenuValue?a("messageLog"):"adminOperation"==e.adminMenuValue?a("adminOperation"):"judgement_log"==e.adminMenuValue?a("judgementLog"):e._e()],1)],1)],1)],1)],1)},i=[],r=(a("13d5"),a("e4b4")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("Button",{attrs:{disabled:!e.isAdmin},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.addUserModel=!0}}},[a("Row",{attrs:{gutter:20,type:"flex",align:"middle"}},[a("PrivilegesTag",{attrs:{data:["dev"]}}),a("Col",[a("Icon",{attrs:{type:"md-add"}})],1)],1)],1)],1),a("Col",{attrs:{flex:"1"}}),a("Col",[a("Select",{on:{"on-change":e.getUserList},model:{value:e.userOrder.value,callback:function(t){e.$set(e.userOrder,"value",t)},expression:"userOrder.value"}},e._l(e.userOrder.list,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),a("Col",[a("Select",{on:{"on-change":e.getUserList},model:{value:e.userType.value,callback:function(t){e.$set(e.userType,"value",t)},expression:"userType.value"}},e._l(e.userType.list,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),"all"===e.userType.value?[a("Col",[a("Select",{on:{"on-change":e.getUserList},model:{value:e.userParameter.value,callback:function(t){e.$set(e.userParameter,"value",t)},expression:"userParameter.value"}},e._l(e.userParameter.list,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),a("Col",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}]},[a("Icon",{attrs:{type:"ios-loading"}})],1)]),a("Col",[a("Input",{staticStyle:{width:"280px"},attrs:{type:"text",search:"","enter-button":""},on:{"on-enter":e.onSearchUser,"on-search":e.onSearchUser},model:{value:e.userValue,callback:function(t){e.userValue=t},expression:"userValue"}})],1)]:e._e()],2),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getUserList}},[a("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),e._l(e.userListData,(function(t,s){return a("Card",{key:s,staticClass:"admin-user",attrs:{"dis-hover":""}},[a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("BusinessCard",{attrs:{id:t.id,showAdminUserInfo:!0}},[a("b",[e._v(e._s(t.username))])]),a("div",[e._v(" Id:"+e._s(t.id)+" "),a("divider",{attrs:{type:"vertical"}}),e._v(" Valid:"+e._s(t.valid)+" ")],1)],1),a("Col",[t.privilege?a("PrivilegesTag",{ref:"tag_"+t.id+"_privilegesTag",refInFor:!0,attrs:{data:t.privilege}}):e._e()],1),a("Col",[a("Divider",{attrs:{type:"vertical"}}),a("Button",{attrs:{type:"dashed",size:"small",disabled:!e.isAdmin},on:{click:function(t){return e.onEditUser(s)}}},[a("Icon",{attrs:{type:"ios-create"}})],1),a("Divider",{attrs:{type:"vertical"}}),a("router-link",{attrs:{to:{name:"space",params:{uId:""+t.id}},target:"_blank"}},[a("Button",{attrs:{type:"dashed",size:"small"}},[a("Icon",{attrs:{type:"ios-eye"}})],1)],1),a("Divider",{attrs:{type:"vertical"}}),a("Button",{attrs:{type:"error",size:"small",disabled:!e.isAdmin},on:{click:function(t){return e.openDelUserModel(s)}}},[a("Icon",{attrs:{type:"md-trash"}})],1)],1)],1)],1)})),e.userListData.length<=0?a("Card",{attrs:{"dis-hover":"",align:"center"}},[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]):e._e(),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),a("Modal",{attrs:{width:"980",title:e.editUserData.username},on:{"on-ok":e.onEditUserSubmit},model:{value:e.userEditModel,callback:function(t){e.userEditModel=t},expression:"userEditModel"}},[a("Form",{ref:"formValidate",attrs:{model:e.editUserData,"label-position":"top"}},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"12"}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"24"}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{prop:"id"}},[a("Input",{attrs:{readonly:""},model:{value:e.editUserData.id,callback:function(t){e.$set(e.editUserData,"id",t)},expression:"editUserData.id"}})],1)],1),a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{prop:"username"}},[a("Input",{attrs:{maxlength:"40"},model:{value:e.editUserData.username,callback:function(t){e.$set(e.editUserData,"username",t)},expression:"editUserData.username"}})],1)],1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:e.$t("signup.form.password")}},[a("Input",{attrs:{value:"******",readonly:"",disabled:""}},[e.isAdminL3?a("a",{attrs:{slot:"append",href:"javascript:void(0)"},on:{click:function(t){e.generatesUserPasswordModel=!e.generatesUserPasswordModel}},slot:"append"},[a("Icon",{attrs:{type:"md-create",size:"15"}})],1):e._e()])],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.lastSigninIP"),prop:"username"}},[a("Input",{attrs:{readonly:"",disabled:""},model:{value:e.editUserData.attr.lastSigninIP,callback:function(t){e.$set(e.editUserData.attr,"lastSigninIP",t)},expression:"editUserData.attr.lastSigninIP"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.registerIP"),prop:""}},[a("Input",{attrs:{readonly:"",disabled:""},model:{value:e.editUserData.attr.registerIP,callback:function(t){e.$set(e.editUserData.attr,"registerIP",t)},expression:"editUserData.attr.registerIP"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.createTime"),prop:""}},[e.editUserData.createTime?a("TimeView",{attrs:{time:e.editUserData.createTime}},[e._v(" "+e._s(e.editUserData.createTime)+" ")]):a("span",[e._v("-")])],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.signoutTime"),prop:""}},[e.editUserData.signoutTime?a("TimeView",{attrs:{time:e.editUserData.signoutTime}},[e._v(" "+e._s(e.editUserData.signoutTime)+" ")]):a("span",[e._v("-")])],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",[a("Input",{attrs:{readonly:""},model:{value:e.editUserData.originEmail,callback:function(t){e.$set(e.editUserData,"originEmail",t)},expression:"editUserData.originEmail"}}),a("template",{slot:"label"},[e._v(" "+e._s(e.$t("profile.space.form.originEmail"))+" "),a("a",{on:{click:function(t){e.transferUserBindModel=!e.transferUserBindModel,e.editUserBindData.id=e.editUserData.id}}},[a("Icon",{attrs:{type:"md-create",size:"15"}})],1)])],2)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.originName")}},[a("Input",{attrs:{readonly:""},model:{value:e.editUserData.originName,callback:function(t){e.$set(e.editUserData,"originName",t)},expression:"editUserData.originName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.originPersonaId")}},[a("Input",{attrs:{readonly:""},model:{value:e.editUserData.originPersonaId,callback:function(t){e.$set(e.editUserData,"originPersonaId",t)},expression:"editUserData.originPersonaId"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.originUserId")}},[a("Input",{attrs:{readonly:""},model:{value:e.editUserData.originUserId,callback:function(t){e.$set(e.editUserData,"originUserId",t)},expression:"editUserData.originUserId"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:e.$t("profile.achievement.title"),prop:"achievements"}},[a("Card",{attrs:{"dis-hover":""}},[e.editUserData.attr.achievements?a("AchievementsTag",{attrs:{data:e.editUserData.attr.achievements||{},"max-overflow":"6"}}):e._e(),a("code",{staticStyle:{width:"100%","white-space":"pre-line"},attrs:{type:"json"}},[e._v(e._s(e.editUserData.attr.achievements))]),a("Row",{attrs:{gutter:10}},[a("Col",[a("Select",{model:{value:e.editUserData.achievementTypeValue,callback:function(t){e.$set(e.editUserData,"achievementTypeValue",t)},expression:"editUserData.achievementTypeValue"}},[a("Option",{attrs:{value:"add"}},[e._v("Add")]),a("Option",{attrs:{value:"delete"}},[e._v("Delete")])],1)],1),a("Col",{attrs:{flex:"1"}},[a("Input",{model:{value:e.editUserData.achievementValue,callback:function(t){e.$set(e.editUserData,"achievementValue",t)},expression:"editUserData.achievementValue"}})],1),a("Col",[a("Button",{on:{click:function(t){"add"===e.editUserData.achievementTypeValue?e.setUserAchievement(e.editUserData.id,e.editUserData.achievementValue):e.deleteUserAchievement(e.editUserData.id,e.editUserData.achievementValue)}}},["add"===e.editUserData.achievementTypeValue?a("Icon",{attrs:{type:"md-add"}}):"delete"===e.editUserData.achievementTypeValue?a("Icon",{attrs:{type:"md-close"}}):e._e()],1)],1)],1),a("p",{staticClass:"hint"},[e._v("The achievement value added here will ignore the rule and be saved upon confirmation")])],1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.changeNameLeft")}},[a("InputNumber",{attrs:{max:5,min:0},model:{value:e.editUserData.attr.changeNameLeft,callback:function(t){e.$set(e.editUserData.attr,"changeNameLeft",t)},expression:"editUserData.attr.changeNameLeft"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.language")}},[a("Select",{staticClass:"switch-language",attrs:{prefix:"md-globe",placement:"top-end"},model:{value:e.editUserData.attr.language,callback:function(t){e.$set(e.editUserData.attr,"language",t)},expression:"editUserData.attr.language"}},e._l(e.languages,(function(t){return a("Option",{key:t.name,attrs:{value:t.name,disabled:t.ignoreSave}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.showOrigin")}},[a("i-switch",{model:{value:e.editUserData.attr.showOrigin,callback:function(t){e.$set(e.editUserData.attr,"showOrigin",t)},expression:"editUserData.attr.showOrigin"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.allowDM")}},[a("i-switch",{model:{value:e.editUserData.attr.allowDM,callback:function(t){e.$set(e.editUserData.attr,"allowDM",t)},expression:"editUserData.attr.allowDM"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.space.form.showAchievement")}},[a("i-switch",{model:{value:e.editUserData.attr.showAchievement,callback:function(t){e.$set(e.editUserData.attr,"showAchievement",t)},expression:"editUserData.attr.showAchievement"}})],1)],1)],1),a("FormItem",{attrs:{label:e.$t("profile.space.form.privileges"),prop:"privileges"}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"24"}},[a("PrivilegesTag",{ref:"privilegesTag",attrs:{data:e.editUserData.privilege}})],1),a("Col",{attrs:{span:"24"}},[a("Row",{attrs:{gutter:10}},[a("Col",[a("Select",{staticStyle:{width:"160px"},model:{value:e.editPrivilegesForm.activeName,callback:function(t){e.$set(e.editPrivilegesForm,"activeName",t)},expression:"editPrivilegesForm.activeName"}},e._l(e.editPrivilegesForm.action,(function(t,s){return a("Option",{key:s,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("Col",{attrs:{flex:"1"}},[a("Select",{model:{value:e.editPrivilegesForm.roleName,callback:function(t){e.$set(e.editPrivilegesForm,"roleName",t)},expression:"editPrivilegesForm.roleName"}},e._l(e.editPrivilegesForm.role,(function(t,s){return a("Option",{key:s,attrs:{value:t,label:e.$t("basic.privilege."+t)}},[e._v(" "+e._s(e.$t("basic.privilege."+t))+" ")])})),1)],1),a("Col",[a("Button",{on:{click:e.onEditPrivileges}},["grant"===e.editPrivilegesForm.activeName?a("Icon",{attrs:{type:"md-add"}}):"revoke"===e.editPrivilegesForm.activeName?a("Icon",{attrs:{type:"md-close"}}):e._e()],1)],1)],1)],1)],1),a("p",{staticClass:"hint"},[e._v("To modify the user identity, click Save below")])],1),a("FormItem",{attrs:{label:"introduction",prop:"introduction"}},[a("Card",{attrs:{"dis-hover":"",padding:0}},[a("Textarea",{ref:"userIntroductionTextarea",attrs:{content:e.editUserData.attr.introduction},model:{value:e.editUserData.attr.introduction,callback:function(t){e.$set(e.editUserData.attr,"introduction",t)},expression:"editUserData.attr.introduction"}})],1)],1)],1)],1)],1)],1),a("Modal",{model:{value:e.generatesUserPasswordModel,callback:function(t){e.generatesUserPasswordModel=t},expression:"generatesUserPasswordModel"}},[a("template",{slot:"header"},[a("Row",{attrs:{type:"flex",align:"middle"}},[a("PrivilegesTag",{attrs:{data:["root","dev"]}}),a("Col",{attrs:{flex:"1"}},[e._v(" Generates Password ")])],1)],1),a("Form",{ref:"formUserPasswordValidate",attrs:{"label-position":"top"},model:{value:e.editUserPasswordData,callback:function(t){e.editUserPasswordData=t},expression:"editUserPasswordData"}},[a("FormItem",{attrs:{label:e.$t("reset.form.newPassword"),prop:"password"}},[a("Input",{attrs:{maxlength:"40"},model:{value:e.editUserPasswordData.password,callback:function(t){e.$set(e.editUserPasswordData,"password",t)},expression:"editUserPasswordData.password"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{loading:e.generatesUserPasswordLoad,color:"primary"},on:{click:e.onGeneratesUserPassword}},[e._v(e._s(e.$t("basic.button.submit")))])],1)],2),a("Modal",{model:{value:e.transferUserBindModel,callback:function(t){e.transferUserBindModel=t},expression:"transferUserBindModel"}},[a("template",{slot:"header"},[a("Row",{attrs:{type:"flex",align:"middle"}},[a("PrivilegesTag",{attrs:{data:["super","root","dev"]}}),a("Col",{attrs:{flex:"1"}},[e._v(" Transfer User Bind ")])],1)],1),a("Form",{ref:"formUserBindValidate",attrs:{rules:e.transferUserBindRuleValidate,"label-position":"top"},model:{value:e.editUserBindData,callback:function(t){e.editUserBindData=t},expression:"editUserBindData"}},[a("Row",[a("Col",{attrs:{span:"24"}},[a("Row",{attrs:{gutter:30,type:"flex",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("FormItem",{attrs:{label:"id",prop:"id"}},[a("Input",{attrs:{readonly:""},model:{value:e.editUserBindData.id,callback:function(t){e.$set(e.editUserBindData,"id",t)},expression:"editUserBindData.id"}})],1)],1),a("Col",{attrs:{span:"1",align:"center"}},[a("Icon",{attrs:{type:"md-link",size:"15"}})],1),a("Col",{attrs:{flex:"1"}},[a("FormItem",{attrs:{label:"Target Id",prop:"targetId"}},[a("Input",{model:{value:e.editUserBindData.targetId,callback:function(t){e.$set(e.editUserBindData,"targetId",t)},expression:"editUserBindData.targetId"}})],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"Mode"}},[a("Select",{model:{value:e.editUserBindData.mode,callback:function(t){e.$set(e.editUserBindData,"mode",t)},expression:"editUserBindData.mode"}},e._l(["cover","interchange"],(function(e){return a("Option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{loading:e.bindUserLoad,color:"primary"},on:{click:e.onTransferAccountBindData}},[e._v(e._s(e.$t("basic.button.submit")))])],1)],2),a("Modal",{attrs:{loading:e.addUserLoad},model:{value:e.addUserModel,callback:function(t){e.addUserModel=t},expression:"addUserModel"}},[a("Form",{ref:"addUserFormValidate",attrs:{model:e.addUserData,rules:e.addUserRuleValidate,"label-position":"top"}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:e.$t("signup.form.username"),prop:"username"}},[a("Input",{attrs:{maxlength:"40",placeholder:e.$t("signup.placeholder.username")},model:{value:e.addUserData.username,callback:function(t){e.$set(e.addUserData,"username",t)},expression:"addUserData.username"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:e.$t("signup.form.password"),prop:"password"}},[a("Input",{attrs:{password:"",minlength:"6",placeholder:e.$t("signup.placeholder.password")},model:{value:e.addUserData.password,callback:function(t){e.$set(e.addUserData,"password",t)},expression:"addUserData.password"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:e.$t("signup.form.originEmail"),prop:"originEmail"}},[a("Input",{attrs:{password:"",minlength:"6",placeholder:e.$t("signup.placeholder.originEmail")},model:{value:e.addUserData.originEmail,callback:function(t){e.$set(e.addUserData,"originEmail",t)},expression:"addUserData.originEmail"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:e.$t("signup.form.originName"),prop:"originName"}},[a("Input",{attrs:{password:"",minlength:"6",placeholder:e.$t("signup.placeholder.originName")},model:{value:e.addUserData.originName,callback:function(t){e.$set(e.addUserData,"originName",t)},expression:"addUserData.originName"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{loading:e.addUserLoad,color:"primary"},on:{click:e.onAddUserSubmit}},[e._v(e._s(e.$t("basic.button.submit")))])],1)],1),a("Modal",{attrs:{loading:e.delUserLoad,width:"360"},model:{value:e.delUserModel,callback:function(t){e.delUserModel=t},expression:"delUserModel"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[e._v("User account status")])],1),a("Card",{attrs:{"dis-hover":"",align:"center"}},[a("BusinessCard",{attrs:{id:e.editUserData.id,showAdminUserInfo:!0}},[a("h2",[a("a",{attrs:{href:"javascript:void(0)"}},[a("b",[e._v(e._s(e.editUserData.username))])])])]),a("p",[e._v("User Id: "+e._s(e.editUserData.id))]),a("p",[e._v("Current valid: "+e._s(e.editUserData.valid))])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",[a("Select",{model:{value:e.delTypeValue,callback:function(t){e.delTypeValue=t},expression:"delTypeValue"}},e._l(e.delTypes,(function(t,s){return a("Option",{key:s,attrs:{value:t}},[e._v(" "+e._s(t))])})),1)],1),a("Divider",{attrs:{type:"vertical"}}),a("Col",{attrs:{flex:"1"}},[a("Button",{attrs:{long:"",type:{logic:"error",real:"error",restore:"success"}[e.delTypeValue],ghost:{logic:!0,real:!1,restore:!1}[e.delTypeValue],loading:e.delUserLoad},on:{click:e.onDeleteUser}},["restore"!==e.delTypeValue?a("Icon",{attrs:{type:{logic:"md-trash",real:"md-trash"}[e.delTypeValue]}}):e._e(),e._v(" "+e._s(e.$t("basic.button.submit"))+" "),"real"===e.delTypeValue?[e._v("⚠️⚠️⚠️")]:e._e()],2)],1)],1)],1)],1)],2)},n=[],l=a("aa6e"),d=a("9648"),c=a("d78a"),m=a("fb1c"),u=a("daf8"),h=a("afdf"),p=a("2ec1"),g=new r["d"]({data(){return{achievement:p,delUserModel:!1,delUserLoad:!1,delTypes:["logic","real","restore"],delTypeValue:"logic",userType:{value:"all",list:[{title:"All",value:"all"},{title:"Admin`s",value:"admin"},{title:"Bot`s",value:"bot"}]},userOrder:{value:"asc",list:[{title:"Asc",value:"asc"},{title:"Desc",value:"desc"}]},userParameter:{value:"username",list:[{title:"BFBAN ID",value:"id"},{title:"BFBAN Username",value:"username"},{title:"originName",value:"originName"},{title:"originPersonaId",value:"originPersonaId"},{title:"Email",value:"originEmail"}]},generatesUserPasswordLoad:!1,addUserLoad:!1,bindUserLoad:!1,load:!1,userValue:"",userListData:[],editUserData:{attr:{language:"",introduction:""},achievementTypeValue:"add",achievementValue:"",temporaryPrivilege:{},privilege:[]},editPrivilegesForm:{id:"",roleName:"",role:["normal","admin","bot","super","dev","volunteer","blacklisted","freezed"],activeName:"grant",action:["grant","revoke"]},addUserData:{username:"",password:"",originEmail:"",originName:""},addUserRuleValidate:{username:[{required:!0,min:4,max:40,trigger:"blur"}],password:[{required:!0,min:6,max:40,trigger:"blur"}],originName:[{required:!0,min:1,trigger:"blur"}],originEmail:[{required:!0,min:1,type:"email",trigger:"blur"}]},editUserPasswordData:{password:""},transferUserBindRuleValidate:{id:[{trigger:"blur"}],targetId:[{required:!1,trigger:"blur"}]},editUserBindData:{id:"",targetId:"",mode:"cover"},userEditModel:!1,generatesUserPasswordModel:!1,transferUserBindModel:!1,addUserModel:!1,languages:h.child,skip:1,limit:40,order:"desc",total:0}},created(){this.http=r["f"].call(this),this.getUserList()},components:{Textarea:u["a"],TimeView:d["a"],PrivilegesTag:c["a"],BusinessCard:l["a"],AchievementsTag:m["a"]},methods:{async onEditUserSubmit(){this.load=!0,await this.setUserAttr();for(const e in this.editUserData.temporaryPrivilege)this.editUserData.id&&await this.setUserRole(this.editUserData.id,this.editUserData.temporaryPrivilege[e],e);await this.onSearchUser(),this.load=!1},onAddUserSubmit(){const{username:e,password:t,originEmail:a,originName:s}=this.addUserData;this.isAdminL3?this.$Message.error(this.$i18n.t("basic.tip.noAccess")):this.$refs.addUserFormValidate.validate(i=>{i?(this.addUserLoad=!0,this.http.post(r["c"]["signup4dev"],{data:{data:{username:e,password:t,originEmail:a,originName:s,language:this.$i18n.locale}}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.code)}).error(e=>{this.$Message.error(e)}).finally(()=>{this.addUserLoad=!1,this.addUserModel=!1})):this.$Message.error("Fail!")})},onDeleteUser(){const{id:e}=this.editUserData;!e&&this.delTypes.constructor(this.delTypeValue)||(this.delUserLoad=!0,this.http.post(r["c"]["admin_delUser"],{data:{data:{type:this.delTypeValue,id:e}}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.code)}).finally(()=>{this.getUserList(),this.delUserLoad=!1,this.delUserModel=!1}))},openDelUserModel(e){this.editUserData=this.userListData[e],this.delUserModel=!0},onEditPrivileges(){if(!this.editPrivilegesForm.roleName||!this.editUserData.privilege)return;const e=this.editUserData.privilege.indexOf(this.editPrivilegesForm.roleName);switch(this.editPrivilegesForm.activeName){case"grant":e>=0?this.$Message.error("already exist"):(this.editUserData.privilege.push(this.editPrivilegesForm.roleName),this.editUserData.temporaryPrivilege[this.editPrivilegesForm.roleName]="grant");break;case"revoke":e>=0?(this.editUserData.privilege.splice(e,1),this.editUserData.temporaryPrivilege[this.editPrivilegesForm.roleName]="revoke"):this.$Message.error("not role");break}this.$refs.privilegesTag&&this.$refs.privilegesTag.update()},onSearchUser(){this.getUserList().finally(()=>{this.onReset()})},async getUserList(){const e=this;let t={name:"",skip:(this.skip-1)*this.limit,limit:this.limit,parameter:""};if(!this.load)return new Promise((a,s)=>{e.load=!0,this.userValue&&(t.name=this.userValue),this.userType.value&&(t.type=this.userType.value),this.userOrder.value&&(t.order=this.userOrder.value),this.userParameter.value&&(t.parameter=this.userParameter.value),e.http.get(r["c"]["admin_searchUser"],{params:t}).then(t=>{const a=t.data;if(1===a.success)return e.userListData=a.data,void(e.total=a.total);e.$Message.error(a.message||a.code)}).finally(()=>{e.load=!1,a()})})},onEditUser(e){this.userEditModel=!0,this.editUserData=Object.assign(this.editUserData,this.userListData[e]),this.$refs.privilegesTag&&this.$refs.privilegesTag.update(this.editUserData.privilege),this.$refs.introduction&&this.$refs.introduction.updateContent(this.editUserData.userIntroduction)},async setUserRole(e,t,a){await this.http.post(r["c"]["admin_setUserRole"],{data:{data:{id:e,action:t,role:a}}}).then(e=>{const t=e.data;1!==t.success&&this.$Message.error(t.message||t.code)})},async setUserAchievement(e,t){await this.http.post(r["c"]["account_achievement_add"],{data:{userId:e,achievementId:t}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.message||t.code)}).finally(()=>{this.getSearchUser()})},async deleteUserAchievement(e,t){await this.http.post(r["c"]["account_achievement_delete"],{data:{userId:e,achievementId:t}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.message||t.code)}).finally(()=>{this.getSearchUser()})},async setUserAttr(){return new Promise((e,t)=>{let a=this.editUserData.attr;delete a.valid,delete a.language,delete a.registerIP,delete a.lastSigninIP,delete a.freezeOfNoBinding,this.http.post("admin/setUserAttr",{data:{data:{id:this.editUserData.id,username:this.editUserData.username,attr:a,userIntroduction:a.userIntroduction}}}).then(a=>{const s=a.data;1!==s.success?(this.$Message.error(s.message||s.code),t()):e()})})},async onGeneratesUserPassword(){try{this.$refs.formUserPasswordValidate.validate(async e=>{if(!e)return;this.generatesUserPasswordLoad=!0;const t=await this.http.post("admin_setUserGeneratePassword",{data:{data:{id:this.editUserData.id,newpassword:this.editUserPasswordData.password}}}),a=t.data;if(1===a.success)return this.$Message.success(a.message||a.code),void(this.generatesUserPasswordModel=!1);this.$Message.error(a.message||a.code)})}catch(e){this.$Message.error(e)}finally{this.generatesUserPasswordLoad=!1}},onTransferAccountBindData(){try{this.$refs.formUserBindValidate.validate(async e=>{if(!e)return;this.bindUserLoad=!0;const t=await this.http.post("admin_transferBindData",{data:{data:{id:this.editUserBindData.id,targetId:this.editUserBindData.targetId,mode:this.editUserBindData.mode}}}),a=t.data;if(1===a.success)return this.$Message.success(a.message||a.code),void(this.transferUserBindModel=!1);this.$Message.error(a.message||a.code)})}catch(e){this.$Message.error(e)}finally{this.bindUserLoad=!1}},handlePageChange(e){this.skip=e,this.getUserList()},handlePageSizeChange(e){this.limit=e,this.getUserList()},onReset(){this.skip=1,this.limit=20,this.order="desc",this.total=0}}}),v=g,f=(a("35fa"),a("2877")),b=Object(f["a"])(v,o,n,!1,null,"473de7aa",null),y=b.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"hint"},[e._v(" 此处名单将禁用账户，用户无法继续登陆账户；如果仍然需要保留账户，并且依旧能赋予黑名单限制，可以在账户身份中添加'黑名单'身份来限制用户网站使用范围")]),a("p",{staticClass:"hint"},[e._v("Use with caution, and your actions will be recorded")]),a("br"),a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("Select",{attrs:{filterable:"","remote-method":e.getSearchUser,loading:e.searchLoading},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},e._l(e.searchBlockedUserList,(function(t,s){return a("Option",{key:s,attrs:{value:t.username,disabled:!0}},[a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[e._v(" "+e._s(t.username)+" ("+e._s(t.id)+") ")]),a("Col",[a("PrivilegesTag",{attrs:{data:t.privilege}})],1),a("Col",[a("Button",{attrs:{size:"small",disabled:e.isDeleteExecutable},on:{click:function(t){return e.onAddUserBlocked(e.searchBlockedUserList[s])}}},[a("Icon",{attrs:{type:"md-add"}})],1)],1)],1)],1)})),1)],1),a("Col",[a("router-link",{attrs:{to:{name:"admin",params:{pagename:"admin_operation_log"}},target:"_blank"}},[e._v(" "+e._s(e.$t("profile.admin.menu.adminOperationLog"))+" ")])],1)],1),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getBlockedUserAll}},[a("Icon",{class:e.blockedLoading?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),e.blockedUserList.length>0?e._l(e.blockedUserList,(function(t,s){return a("Card",{key:s,staticClass:"interval-card",attrs:{"dis-hover":""}},[a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("BusinessCard",{attrs:{id:t.id,showAdminUserInfo:!0}},[a("b",[e._v(e._s(t.username))]),e._v(" ("+e._s(t.id)+") ")])],1),a("Col",[t.privilege?a("PrivilegesTag",{ref:"tag_"+t.id+"_privilegesTag",refInFor:!0,attrs:{data:t.privilege}}):e._e()],1),a("Col",[a("Button",{attrs:{disabled:e.isDeleteExecutable},on:{click:function(t){return e.onRemoveUserBlocked(e.blockedUserList[s])}}},[a("Icon",{attrs:{type:"md-trash"}}),e._v(" Removal Blocked ")],1)],1)],1)],1)})):a("Card",{attrs:{"dis-hover":""}},[a("Empty")],1),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),a("br")],2)},C=[],k=a("02bc"),w=new r["d"]({name:"blockedUsers",data(){return{searchName:"",searchLoading:!1,searchBlockedUserList:[],blockedLoading:!1,blockedModel:!1,blockedUserList:[],editUserData:{attr:{language:"",introduction:""},temporaryPrivilege:{},privilege:[]},skip:1,limit:20,total:0,order:null}},components:{PrivilegesTag:c["a"],BusinessCard:l["a"],Empty:k["a"]},created(){this.http=r["f"].call(this),this.getBlockedUserAll()},methods:{handlePageChange(e){this.skip=e,this.getBlockedUserAll()},handlePageSizeChange(e){this.limit=e,this.getBlockedUserAll()},getSearchUser(e){e&&(this.searchLoading=!0,this.http.get(r["c"]["admin_searchUser"],{params:{name:e,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order,parameter:"username"}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error({content:t.message||t.code,duration:3}):this.searchBlockedUserList=t.data}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.searchLoading=!1}))},getBlockedUserAll(){this.blockedLoading=!0,this.http.get(r["c"]["admin_blockedUserAll"],{params:{skip:this.skip-1,limit:this.limit}}).then(e=>{const t=e.data;if(1===t.success)return this.blockedUserList=t.data,void(this.total=t.total);this.$Message.error({content:t.message||t.code,duration:3})}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.blockedLoading=!1})},onOperatingAccountStatus(e,t){e&&(t||["logic","restore"].includes(t))?(this.delUserLoad=!0,this.http.post(r["c"]["admin_delUser"],{data:{data:{type:t,id:e}}}).then(e=>{const t=e.data;if(1===t.success)return this.$Message.success(t.code),void(this.searchBlockedUserList=[]);this.$Message.error(t.message||t.code)}).finally(()=>{this.getBlockedUserAll(),this.delUserLoad=!1,this.delUserModel=!1})):this.$Message.error(this.$i18n.t("signup.fillIn"))},onAddUserBlocked(e){const{id:t}=e;this.onOperatingAccountStatus(t,"logic")},onRemoveUserBlocked(e){const{id:t}=e;this.onOperatingAccountStatus(t,"restore")}},computed:{isDeleteExecutable(){return!r["a"].checkPrivilegeGroup(this.currentUser.userinfo,["root","dev"])}}}),U=w,x=(a("99dd"),Object(f["a"])(U,_,C,!1,null,"07a53fad",null)),D=x.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"hint"},[e._v("Here you can search for users on the site and add a gag, which prevents users from Posting anything on the site")]),a("p",{staticClass:"hint"},[e._v("Unable to add an administrator user")]),a("p",{staticClass:"hint"},[e._v("Use with caution, and your actions will be recorded")]),a("br"),a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("Select",{attrs:{filterable:"","remote-method":e.getSearchMuteUser,loading:e.searchLoading},model:{value:e.muteSearchName,callback:function(t){e.muteSearchName=t},expression:"muteSearchName"}},e._l(e.searchMuteUserList,(function(t,s){return a("Option",{key:s,attrs:{value:t.username,disabled:!0}},[a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("b",[e._v(e._s(t.username))]),e._v(" ("+e._s(t.id)+") ")]),a("Col",[a("PrivilegesTag",{attrs:{data:t.privilege}})],1),a("Col",[a("Button",{attrs:{type:"dashed",size:"small",disabled:!e.isAdmin},nativeOn:{click:function(a){return e.showMuteAlert(t.id)}}},[a("Icon",{attrs:{type:"md-add"}}),a("Icon",{attrs:{type:"md-mic",title:"mute user"}})],1)],1)],1)],1)})),1)],1),a("Col",[a("router-link",{attrs:{to:{name:"admin",params:{pagename:"admin_operation_log"}},target:"_blank"}},[e._v(" "+e._s(e.$t("profile.admin.menu.adminOperationLog"))+" ")])],1)],1),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getMuteUsers}},[a("Icon",{class:e.queryMuteUsersLoading?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),e.muteUserList.length>0?e._l(e.muteUserList,(function(t,s){return a("Card",{key:s,staticClass:"interval-card",attrs:{"dis-hover":""}},[a("Row",{attrs:{gutter:10,type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("b",[e._v(e._s(t.username))]),e._v(" ("+e._s(t.id)+") "),a("p",{staticClass:"description"},[e._v(" Gag time: "),a("Time",{attrs:{time:t.attr.mute}})],1)]),a("Col",[a("PrivilegesTag",{attrs:{data:t.privilege}})],1),a("Col",[a("Button",{attrs:{disabled:!e.isAdmin},on:{click:function(a){return e.muteUser("remove",t.id)}}},[a("Icon",{attrs:{type:"md-mic-off",title:"remove mute"}}),e._v(" Removal Mute ")],1)],1)],1)],1)})):a("Card",{attrs:{"dis-hover":""}},[a("Empty")],1),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),a("Modal",{on:{"on-ok":e.modalOk,"on-cancel":function(t){e.mute.show=!1}},model:{value:e.mute.show,callback:function(t){e.$set(e.mute,"show",t)},expression:"mute.show"}},[a("p",{staticStyle:{color:"#333","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Select the time duration for mute")])]),a("Form",[a("FormItem",[a("Select",{model:{value:e.mute.value,callback:function(t){e.$set(e.mute,"value",t)},expression:"mute.value"}},e._l([{value:0,text:"10 mins"},{value:1,text:"1 hr"},{value:2,text:"12 hrs"},{value:3,text:"1 day"},{value:4,text:"1 week"},{value:5,text:"1 month"}],(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),1)],1),a("FormItem",[a("Checkbox",{model:{value:e.mute.isNoticeIntraStationUser,callback:function(t){e.$set(e.mute,"isNoticeIntraStationUser",t)},expression:"mute.isNoticeIntraStationUser"}},[e._v("是否将此禁令通知玩家？")])],1)],1)],1)],2)},I=[],$=new r["d"]({name:"muteUsers",data(){return{mute:{value:"0",id:"",show:!1,isNoticeIntraStationUser:!1},muteSearchName:"",muteUserList:[],queryMuteUsersLoading:!1,searchMuteUserList:[],searchLoading:!1,skip:1,limit:20,total:0,order:null}},components:{PrivilegesTag:c["a"],Empty:k["a"]},created(){this.http=r["f"].call(this),this.getMuteUsers()},methods:{showMuteAlert(e){this.mute.id=e,this.mute.show=!0},modalOk(){this.muteUser("add",this.mute.id,this.mute.value)},muteUser(e,t,a=0){const{isNoticeIntraStationUser:s}=this.mute;if(!a&&!t&&!e)return!1;this.http.post(r["c"]["admin_muteUser"],{data:{data:{type:e,id:t,value:a},isNotice:s,language:r["g"].exchangeLangField(this.$root.$i18n.locale)}}).then(e=>{const t=e.data;if(1===t.success)return this.getMuteUsers(),void this.$Message.success({content:t.message||t.code,duration:3});this.$Message.error({content:t.message||t.code,duration:3})}).catch(e=>{this.$Message.error(e.code)})},handlePageChange(e){this.skip=e,this.getMuteUsers()},handlePageSizeChange(e){this.limit=e,this.getMuteUsers()},getSearchMuteUser(e){e&&(this.searchLoading=!0,this.http.get(r["c"]["admin_searchUser"],{params:{name:e,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order,parameter:"username"}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error({content:t.message||t.code,duration:3}):this.searchMuteUserList=t.data}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.searchLoading=!1}))},getMuteUsers(){this.queryMuteUsersLoading=!0,this.http.get(r["c"]["admin_muteUserAll"],{params:{skip:this.skip-1,limit:this.limit,order:this.order}}).then(e=>{const t=e.data;if(1===t.success)return this.muteUserList=t.data,this.total=t.total,void(this.searchMuteUserList=[]);this.$Message.error({content:t.message||t.code,duration:3})}).catch(e=>{this.$Message.error(e.code)}).finally(()=>{this.queryMuteUsersLoading=!1})}}}),L=$,P=(a("6219"),Object(f["a"])(L,T,I,!1,null,"3a17e618",null)),M=P.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:10,type:"flex",align:"middle"}},[a("Col",[a("Select",{attrs:{disabled:!!e.searchCommentValue},on:{"on-change":function(t){return e.getCommentAllList()}},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.typeArray,(function(t,s){return a("Option",{key:s,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),"judgement"===e.typeValue?[a("Col",[a("Select",{attrs:{disabled:!!e.searchCommentValue},on:{"on-change":e.getCommentTypeList},model:{value:e.judgementType.value,callback:function(t){e.$set(e.judgementType,"value",t)},expression:"judgementType.value"}},e._l(e.judgementType.list,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)]:e._e(),"banAppeal"===e.typeValue?[a("Col",[a("Select",{attrs:{disabled:!!e.searchCommentValue},on:{"on-change":e.getCommentTypeList},model:{value:e.banAppealStats.value,callback:function(t){e.$set(e.banAppealStats,"value",t)},expression:"banAppealStats.value"}},e._l(e.banAppealStats.list,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)]:e._e(),a("Col",{attrs:{flex:"1"}}),a("Col",[a("Row",{attrs:{gutter:10}},[a("Col",[a("Select",{attrs:{disabled:"all"!==e.typeValue},model:{value:e.filter.queryModeValue,callback:function(t){e.$set(e.filter,"queryModeValue",t)},expression:"filter.queryModeValue"}},e._l(e.filter.queryModes,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),a("Col",[a("Input",{staticStyle:{width:"280px"},attrs:{disabled:"all"!==e.typeValue,type:"text",search:"","enter-button":""},on:{"on-enter":e.getSearchComment,"on-search":e.getSearchComment},model:{value:e.searchCommentValue,callback:function(t){e.searchCommentValue=t},expression:"searchCommentValue"}})],1)],1)],1)],2),a("br"),a("Row",[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:function(t){return e.getCommentAllList()}}},[a("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),e.commentList.length>0?a("div",e._l(e.commentList,(function(t,s){return a("div",{key:s},[a("Card",{attrs:{padding:0,"dis-hover":""}},[a("div",{attrs:{slot:"title"},slot:"title"},["banAppeal"===t.type?a("div",[a("Tag",[e._v("COMMENT")]),a("Tag",[e._v(e._s(t.type))]),a("Tag",[e._v(e._s(t.appealStatus))])],1):e._e(),"judgement"===t.type?a("div",[a("Tag",[e._v("COMMENT")]),a("Tag",[e._v(e._s(t.type))]),a("Tag",[e._v(e._s(t.judgeAction))])],1):e._e(),"reply"===t.type?a("div",[a("Tag",[e._v("COMMENT")]),a("Tag",[e._v(e._s(t.type))]),a("Tag",[e._v(e._s(t.id))])],1):e._e(),"all"===t.type?a("div",[a("Tag",[e._v("COMMENT")]),a("Tag",[e._v(e._s(t.id))]),a("Tag",[e._v(e._s(t.type))])],1):e._e(),"report"===t.type?a("div",[a("Tag",[e._v("REPORT")]),a("Tag",[e._v(e._s(t.toOriginName))]),a("Tag",[e._v(e._s(t.toOriginPersonaId))])],1):e._e(),a("TimeView",{attrs:{time:t.createTime}},[a("Time",{attrs:{time:t.createTime,type:"date"}})],1),e._v(" : "),a("BusinessCard",{attrs:{id:t.byUserId,showAdminUserInfo:!0}},[a("a",{attrs:{href:"javascript:void(0)"}},[a("b",[e._v(e._s(t.username))])])]),e._v(" "+e._s(e.$t("basic.button.reply"))+" "),a("router-link",{attrs:{to:{name:"player",params:{ouid:t.toOriginPersonaId},query:{byPath:e.$route.name}}}},[a("span",[e._v(e._s(t.toOriginName))])]),e._v(" ("+e._s(t.id)+") ")],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("Tooltip",{attrs:{content:"Edit Comment"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openCommentModeAsIndex(s)}}},[a("Icon",{attrs:{type:"md-create"}}),e._v(" id: "+e._s(t.id)+" ")],1)],1)],1),a("Divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:void(0)"}},[a("Tooltip",{attrs:{content:"Open Player Page"}},[a("Button",{attrs:{size:"small",to:{name:"player",params:{ouid:t.toOriginPersonaId},query:{byPath:e.$route.name}}}},[a("Icon",{attrs:{type:"ios-eye"}})],1)],1)],1)],1),t.videoLink?a("div",{staticClass:"comment-links"},[a("EditLinks",{attrs:{links:t.videoLink,isReadonly:!0,placeholder:"http(s)://"}})],1):e._e(),a("HtmlWidget",{staticClass:"comment-html",attrs:{html:t.content}})],1),a("br")],1)})),0):a("Card",{attrs:{"dis-hover":""}},[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]),a("br"),a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}}),a("Modal",{attrs:{"footer-hide":""},model:{value:e.commentEditModel,callback:function(t){e.commentEditModel=t},expression:"commentEditModel"}},[a("Form",{ref:"commentFormValidate",attrs:{model:e.editCommentFrom,rules:e.commentRuleValidate,"label-position":"top"}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{prop:"videoLink",label:"videoLink"}},[a("EditLinks",{attrs:{links:e.editCommentFrom.videoLink,max:10,placeholder:"http(s)://"},model:{value:e.editCommentFrom.videoLink,callback:function(t){e.$set(e.editCommentFrom,"videoLink",t)},expression:"editCommentFrom.videoLink"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{prop:"content"}},[a("Card",{attrs:{"dis-hover":"",padding:0}},[e.editCommentFrom.content.text?[a("Textarea",{ref:"commentTextarea",attrs:{maxlength:65535},model:{value:e.editCommentFrom.content.text,callback:function(t){e.$set(e.editCommentFrom.content,"text",t)},expression:"editCommentFrom.content.text"}})]:[a("Textarea",{ref:"commentTextarea",attrs:{maxlength:65535},model:{value:e.editCommentFrom.content,callback:function(t){e.$set(e.editCommentFrom,"content",t)},expression:"editCommentFrom.content"}})]],2)],1)],1)],1)],1),a("div",{attrs:{solt:"footer"}},[a("Row",[a("Col",{attrs:{flex:"1"}}),a("Col",[a("Button",{attrs:{type:"primary",loading:e.commentEditLoad},on:{click:e.onCommentSubmit}},[e._v(" "+e._s(e.$t("basic.button.submit"))+" ")])],1)],1)],1)],1)],1)},R=[],S=a("945e"),V=a("617b"),A=(a("4362"),new r["d"]({data(){return{commentEditModel:!1,commentEditLoad:!1,editCommentFrom:{id:0,content:"",videoLink:""},commentRuleValidate:{content:[{required:!0,trigger:"blur"}],videoLink:[{required:!1,trigger:"blur"}]},filter:{queryModeValue:"userId",queryModes:[{value:"commentId",label:"Comment ID"},{value:"userId",label:"User ID"}]},judgementType:{value:"kill",list:[{title:"Comfirmd",value:"kill"},{title:"Farm Weapon",value:"farm"},{title:"Suspicious",value:"suspect"},{title:"MOSS Proof",value:"innocent"},{title:"Under discussion",value:"discuss"},{title:"Voted",value:"guilt"},{title:"Invalid report",value:"invalid"}]},banAppealStats:{value:"open",list:[{title:"Open",value:"open"},{title:"Lock",value:"lock"},{title:"Close",value:"close"}]},searchCommentValue:"",load:!1,commentList:[],typeValue:"all",typeArray:["all","report","reply","judgement","banAppeal"],skip:1,limit:20,order:"desc",total:0}},components:{BusinessCard:l["a"],TimeView:d["a"],HtmlWidget:V["a"],EditLinks:S["a"],Textarea:u["a"]},created(){this.http=r["f"].call(this),this.loadData()},watch:{$route:"loadData"},methods:{async loadData(){await r["r"].initUtil().then(e=>{this.games=e.gameName}),this.getCommentAllList()},openCommentModeAsIndex(e){r["a"].checkPrivilegeGroup(this.currentUser.userinfo,["super","root","dev"])?(this.openCommentModeAsData(this.commentList[e]),this.openCommentModeBase()):this.$Message.error(this.$i18n.t("basic.tip.noAccess"))},openCommentModeAsData(e){this.editCommentFrom=e,this.$refs.commentTextarea&&this.$refs.commentTextarea.updateContent(this.editCommentFrom.content||this.editCommentFrom.content.text),this.openCommentModeBase()},openCommentModeBase(){this.commentEditModel=!0},onCommentSubmit(){if(!this.editCommentFrom.id||!this.editCommentFrom.content)return;if(!r["a"].checkPrivilegeGroup(this.currentUser.userinfo,["super","root","dev"]))return void this.$Message.error(this.$i18n.t("basic.tip.noAccess"));let e={id:this.editCommentFrom.id,content:this.editCommentFrom.content.text||this.editCommentFrom.content};this.editCommentFrom.videoLink&&(e.videoLink=this.editCommentFrom.videoLink),this.editCommentFrom.isSpam&&(e.isSpam=this.editCommentFrom.isSpam),this.editCommentFrom.valid&&(e.valid=this.editCommentFrom.valid),this.http.post(r["c"]["admin_setComment"],{data:{data:e}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success(t.code)}).finally(()=>{this.commentEditModel=!1,this.load=!1,this.getCommentAllList()})},getSearchComment(){const e=this.searchCommentValue;if(e)switch(this.filter.queryModeValue){case"userId":this.getCommentAllList({userId:e});break;case"commentId":this.getCommentAllList({id:e});break}},getCommentAllList(e={}){this.load=!0,this.http.get(r["c"]["admin_commentAll"],{params:{type:this.typeValue,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order,...e}}).then(e=>{const t=e.data;if(1==t.success)return this.commentList=t.data,void(this.total=t.total);this.$Message.error(t.message||t.code)}).finally(()=>{this.load=!1})},getCommentTypeList(){this.load=!0;let e={};"banAppeal"===this.typeValue&&(e.appealStatus=this.banAppealStats.value),"judgement"===this.typeValue&&(e.judgeAction=this.judgementType.value),this.http.get(r["c"]["admin_commentTypeList"],{params:{type:this.typeValue,judgeAction:e.judgeAction,banAppealStats:e.appealStatus,skip:this.skip-1,limit:this.limit,order:this.order}}).then(e=>{const t=e.data;if(1==t.success)return this.commentList=t.data,void(this.total=t.total);this.$Message.error(t.message||t.code)}).finally(()=>{this.load=!1})},handlePageChange(e){this.skip=e,this.getCommentAllList()},handlePageSizeChange(e){this.limit=e,this.getCommentAllList()}}})),B=A,z=(a("9b87"),Object(f["a"])(B,F,R,!1,null,"5153eef2",null)),O=z.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getVerifications}},[a("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),e.verificationList.length>0?e._l(e.verificationList,(function(t,s){return a("Card",{key:s,staticClass:"interval-card",attrs:{"dis-hover":""}},[a("Form",[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{lg:{span:5}}},["reset"==t.type?[a("BusinessCard",{attrs:{id:t.userId}},[a("b",[e._v(e._s(t.userId))])])]:"register"==t.type?[t.username?a("b",[e._v(e._s(t.username))]):e._e(),t.userId?[e._v("("+e._s(t.userId)+")")]:e._e()]:e._e(),a("p",[a("Tag",{attrs:{type:"border"}},[e._v(e._s(t.type))])],1)],2),a("Col",{attrs:{lg:{span:9}}},[a("Input",{attrs:{"show-word-limit":"",readonly:"",type:"textarea",autosize:{min:1,max:4}},model:{value:t.uniqCode,callback:function(a){e.$set(t,"uniqCode",a)},expression:"i.uniqCode"}}),a("HtmlLink",{attrs:{href:e.handlerLink(t.type,t.uniqCode),text:"✋🏻Activate "+t.type+" code",isPoptip:!1}})],1),a("Col",{attrs:{lg:{span:4}}},[a("FormItem",{attrs:{label:"expires Time"}},[a("TimeView",{attrs:{time:t.expiresTime}},[a("Time",{attrs:{time:t.expiresTime}})],1)],1)],1),a("Col",{attrs:{lg:{span:6}}},[a("FormItem",{attrs:{label:"create Time"}},[a("TimeView",{attrs:{time:t.createTime}},[a("Time",{attrs:{time:t.createTime,type:"datetime"}})],1)],1)],1)],1)],1)],1)})):a("Card",{attrs:{"dis-hover":""}},[a("Empty")],1),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),a("br")],2)},E=[],j=a("120c"),q={name:"verifications",components:{HtmlLink:j["a"],TimeView:d["a"],BusinessCard:l["a"],Empty:k["a"]},data(){return{verificationList:[],load:!1,limit:40,skip:1,total:0}},created(){this.http=r["f"].call(this),this.getVerifications()},methods:{handlePageChange(e){this.skip=e,this.getVerifications()},handlePageSizeChange(e){this.limit=e,this.getVerifications()},getVerifications(){this.load=!0,this.http.get(r["c"]["admin_verifications"],{params:{limit:this.limit,skip:(this.skip-1)*this.limit,total:this.total}}).then(e=>{const t=e.data;1==t.success&&(this.verificationList=t.data,this.total=t.total)}).finally(()=>{this.load=!1})},handlerLink(e,t){switch(e){case"register":return`${window.location.origin}/registerVerification?code=${t}&lang=en`;case"reset":return`${window.location.origin}/forgetPasswordVerify?code=${t}$lang=en`;case"binding":return`${window.location.origin}/bindOrigin?code=${t}`}}}},H=q,G=(a("d17f"),Object(f["a"])(H,N,E,!1,null,"bca4826a",null)),J=G.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:30}},[a("Col",{attrs:{flex:"1"}},[a("Input",{attrs:{search:"",type:"text","enter-button":"",placeholder:"input user db id"},on:{"on-enter":e.getUserOperationLog,"on-search":e.getUserOperationLog},model:{value:e.userIdValue,callback:function(t){e.userIdValue=t},expression:"userIdValue"}})],1)],1),a("br"),a("Row",[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getUserOperationLog}},[a("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),a("Card",{attrs:{"dis-hover":"",padding:5}},[e.operationLogs.length>0?e._l(e.operationLogs,(function(t){return a("div",{key:t.id},[a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{flex:"1"}},[a("div",[a("Tag",[e._v("Log")]),a("Time",{attrs:{time:t.createTime,type:"date"}}),e._v(": "),a("BusinessCard",{attrs:{id:t.byUserId,showAdminUserInfo:!0}},[a("b",[e._v(e._s(t.username))])]),e._v("   action: "),a("Tag",[e._v(" "+e._s(t.action))]),e._v("  "),a("b",[e._v(e._s(t.toUserId))]),e._v(" role: "),a("Tag",[e._v(e._s(t.role))])],1)])],1)],1)})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2)],1)},Y=[],K={data(){return{load:!1,operationLogs:[],userIdValue:"",skip:1,limit:40,order:"desc",total:0}},components:{BusinessCard:l["a"]},created(){this.http=r["f"].call(this)},methods:{handlePageChange(e){this.skip=e,this.getBlockedUserAll()},handlePageSizeChange(e){this.limit=e,this.getBlockedUserAll()},getUserOperationLog(){this.load&&!this.userIdValue||(this.load=!0,this.http.get(r["c"]["admin_userOperationLogs"],{params:{id:this.userIdValue,skip:(this.skip-1)*this.limit,limit:this.limit,order:this.order}}).then(e=>{const t=e.data;1==t.success&&(this.operationLogs=t.data)}).finally(()=>{this.load=!1}))}}},Q=K,X=(a("a030"),Object(f["a"])(Q,W,Y,!1,null,"4dfacba2",null)),Z=X.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}}),a("Col",[a("Poptip",{ref:"filesPoptip",attrs:{placement:"bottom-end",trigger:"click",width:"400","popper-class":"files-poptip",padding:"20px 30px"}},[a("Button",[a("Icon",{attrs:{type:"md-funnel",size:"15"}})],1),a("Form",{ref:"filesFunnel",attrs:{slot:"content","label-position":"top"},slot:"content"},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{flex:"1"}},[a("FormItem",{attrs:{label:"Search Type"}},[a("Select",{model:{value:e.searchTypeValue,callback:function(t){e.searchTypeValue=t},expression:"searchTypeValue"}},e._l(e.searchType,(function(t,s){return a("Option",{key:s,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("Col",{attrs:{flex:"1"}},[a("FormItem",{attrs:{label:"Search"}},[a("Input",{attrs:{type:"text",placeholder:"input "+e.searchType.toString()},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1)],1),a("FormItem",{attrs:{label:"Create Time Radiu"}},[a("DatePicker",{attrs:{type:"daterange","split-panels":"",placeholder:"createTime"},on:{"on-change":e.handleCDatepicker}})],1),a("Row",{attrs:{gutter:10}},[a("Col",[a("Button",{on:{click:e.resetFormData}},[e._v(e._s(e.$t("basic.button.reset")))])],1),a("Col",[a("Button",{attrs:{type:"primary",disabled:e.judgementLog.load},on:{click:e.subimtFormData}},[e._v(" "+e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1)],1)],1),a("br"),a("Row",[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getAdminJudgementLog}},[a("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),a("Card",{attrs:{"dis-hover":"",padding:5}},[e.judgementLog.length>0?e._l(e.judgementLog,(function(t,s){return a("div",{key:s},[a("Row",{attrs:{type:"flex",align:"middle"},nativeOn:{click:function(a){return e.$router.push({name:"player",params:{ouid:t.toOriginPersonaId},query:{byPath:e.$route.name},hash:"#floor-"+t.id})}}},[a("Col",[a("Tag",[e._v("Log")])],1),a("Col",{attrs:{flex:"1"}},[a("div",[a("Time",{attrs:{time:t.createTime,type:"date"}}),e._v(" : "),a("BusinessCard",{attrs:{id:t.byUserId,showAdminUserInfo:!0}},[a("b",[e._v(e._s(t.username))])]),a("span",[e._v(" "+e._s(e.$t("detail.info.judge"))+" ")]),a("a",{attrs:{href:"javascript:void(0)",target:"_blank"}},[e._v(e._s(t.toOriginPersonaId))]),a("span",[e._v(" "+e._s(t.cheatMethods.toString())+" "+e._s(e.$t("basic.action."+e.util.queryAction(t.judgeAction)+".text")))])],1)]),a("Col",[a("Icon",{attrs:{type:"ios-eye",size:"25"}})],1)],1)],1)})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2),a("br"),a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)},te=[],ae={data(){return{util:r["r"],load:!1,judgementLog:[],searchTypeValue:"userId",searchType:["userId","userName","dbId"],searchValue:"",createTimeFrom:0,createTimeTo:0,timeOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()},shortcuts:[{text:this.$i18n.t("sitestats.timeRange.daily"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.weekly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.monthly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.yearly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-31104e6),[t,e]}}]},currentFilters:{searchTypeValue:null,searchValue:null,createTimeFrom:null,createTimeTo:null},limit:40,skip:1,total:0}},created(){this.http=r["f"].call(this),this.getAdminJudgementLog()},watch:{$route:"getAdminJudgementLog"},components:{BusinessCard:l["a"]},methods:{getAdminJudgementLog(){let{value:e,type:t,date:a}=this.$route.query;e&&(this.searchValue=e.toString()),t&&(this.currentFilters.searchTypeValue=t),a&&(this.currentFilters.createTimeFrom=new Date(a.split(",")[0]).getTime(),this.currentFilters.createTimeTo=new Date(a.split(",")[1]).getTime()),e&&t&&a||this.setFilters();let s={limit:this.limit,skip:(this.skip-1)*this.limit};this.load=!0,"userId"===this.currentFilters.searchTypeValue&&this.currentFilters.searchValue&&(s.userId=this.currentFilters.searchValue),"userName"===this.currentFilters.searchTypeValue&&this.currentFilters.searchValue&&(s.userName=this.currentFilters.searchValue),"dbId"===this.currentFilters.searchTypeValue&&this.currentFilters.searchValue&&(s.dbId=this.currentFilters.searchValue),this.currentFilters.createTimeFrom&&(s.createTimeFrom=this.currentFilters.createTimeFrom),this.currentFilters.createTimeTo&&(s.createTimeTo=this.currentFilters.createTimeTo),this.http.post(r["c"]["admin_judgementLog"],{data:s}).then(e=>{const t=e.data;1===t.success&&(this.judgementLog=t.data,this.total=t.total)}).finally(()=>{this.load=!1})},resetFormData(){this.searchValue="",this.createTimeFrom=0,this.createTimeTo=0,this.$refs["filesPoptip"].handleClose(),this.$refs["filesFunnel"].resetFields()},subimtFormData(){this.skip=1,this.getAdminJudgementLog()},handleCDatepicker(e){this.createTimeFrom=new Date(e[0]).getTime(),this.createTimeTo=new Date(e[1]).getTime(),this.skip=1},handlePageSizeChange(e){this.limit=e,this.getAdminjudgementLog()},handlePageChange(e){this.skip=e,this.getAdminjudgementLog()},setFilters(){this.currentFilters={searchTypeValue:this.searchTypeValue,searchValue:this.searchValue,createTimeFrom:this.createTimeFrom,createTimeTo:this.createTimeTo}}}},se=ae,ie=(a("3ce3"),Object(f["a"])(se,ee,te,!1,null,"392125e4",null)),re=ie.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Form",[s("FormItem",[s("Row",{attrs:{gutter:10}},[s("Col",[s("DatePicker",{attrs:{type:"datetimerange",options:e.timeOptions,format:"yyyy-MM-dd"},on:{"on-ok":e.change},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),s("Col",{attrs:{flex:"1",align:"right"}},[s("RadioGroup",{staticClass:"game-type",attrs:{type:"button"},model:{value:e.gameName,callback:function(t){e.gameName=t},expression:"gameName"}},[s("Radio",{attrs:{label:"all",value:"all",disabled:""}},[e._v(" "+e._s(e.$t("basic.games.all"))+" ")]),e._l(e.games,(function(t){return s("Radio",{key:t.value,class:e.gameName===t.value?"game-type-select":"",style:"background-image: url("+a("e153")("./"+t.bk_file+"/bf.jpg")+");",attrs:{label:t.value,disabled:t.disabled,"aria-radio":""}},[s("Tooltip",{attrs:{content:e.$t("basic.games."+t.value),placement:"top-start"}},[t.logo_src?s("img",{attrs:{height:"35",src:a("0b05")("./"+t.bk_file+"/logo.png")}}):s("span",[e._v(e._s(t.full_name))])])],1)}))],2)],1)],1)],1),e.adminTab.length>0?s("FormItem",[s("RadioGroup",{staticClass:"game-type",attrs:{type:"button"},model:{value:e.adminId,callback:function(t){e.adminId=t},expression:"adminId"}},e._l(e.adminTab,(function(t){return s("Radio",{key:t.byUserId,attrs:{label:t.byUserId}},[e._v(" "+e._s(t.username)+" - ["+e._s(t[e.gameName])+"] - ("+e._s(t.scale)+"%) ")])})),1)],1):e._e()],1),s("Card",{attrs:{"dis-hover":"",padding:5}},[e.adminLogs.length>0?e._l(e.adminLogs,(function(t,a){return s("div",{key:a},[s("Row",{attrs:{type:"flex",align:"middle"},nativeOn:{click:function(a){return e.$router.push({name:"player",params:{ouid:t.toOriginPersonaId},query:{byPath:e.$route.name}})}}},[s("Col",[s("Tag",[e._v("Log")])],1),s("Col",{attrs:{flex:"1"}},[s("div",[s("Time",{attrs:{time:t.createTime,type:"date"}}),e._v(" : "),s("BusinessCard",{attrs:{id:t.byUserId,showAdminUserInfo:!0}},[s("b",[e._v(e._s(t.username))])]),e._v(" "+e._s(e.$t("detail.info.judge"))+" "),s("ExposedName",[s("a",{attrs:{href:"javascript:void(0)"}},[e._v(e._s(t.originName)+" ("+e._s(t.toOriginPersonaId)+")")])]),e._v(" "+e._s(t.cheatMethods.toString())+" "+e._s(e.$t("basic.action."+e.util.queryAction(t.judgeAction)+".text"))+" ")],1)]),s("Col",[s("router-link",{attrs:{to:{name:"player",params:{ouid:t.toOriginPersonaId},query:{byPath:e.$route.name}},target:"_blank"}},[s("Icon",{attrs:{type:"ios-eye",size:"25"}})],1)],1)],1)],1)})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2)],1)},ne=[],le=new r["d"]({data(){return{util:r["r"],load:!1,log:[],admin:[],adminId:"",date:[],timeOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()},shortcuts:[{text:this.$i18n.t("sitestats.timeRange.daily"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.weekly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.monthly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.yearly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-31104e6),[t,e]}}]},gameName:"bf1",games:[]}},components:{BusinessCard:l["a"]},watch:{$route:"loadData"},created(){this.http=r["f"].call(this),this.loadData()},methods:{async loadData(){await r["r"].initUtil().then(e=>{this.games=e.gameName})},getAdminLog({createTimeto:e,createTimeFrom:t}={}){let a={};this.load=!0,e&&(a["createTimeto"]=e),t&&(a["createTimeFrom"]=t),this.http.get(r["c"]["admin_adminLog"],{params:a}).then(e=>{const{data:t}=e.data,a=[],s=t.filter(e=>!e.privilege.includes("super"));s.forEach(e=>{const t=a.findIndex(t=>t.byUserId==e.byUserId),s=e.games[0];-1==t?a.push({...e,username:e.username,byUserId:e.byUserId,[s]:1}):a[t][s]?a[t][s]++:a[t][s]=1}),this.admin=a,this.log=s,this.adminId=this.admin[0]?this.admin[0].byUserId:0}).finally(()=>{this.load=!1})},change(e){const[t,a]=this.date,s=new Date(t),i=new Date(a),r=`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()}`,o=`${i.getFullYear()}-${i.getMonth()+1}-${i.getDate()}`;this.getAdminLog({createTimeFrom:r,createTimeto:o})}},computed:{adminLogs(){return this.currentlog.filter(e=>e.byUserId==this.adminId)},currentlog(){return this.log.filter(e=>e.games[0]==this.gameName)},adminTab(){let{admin:e,currentlog:t,gameName:a}=this;const s=t.length;return e.sort((e,t)=>t[a]-e[a]).map(e=>({...e,scale:parseInt(100*e[a]/s)})).filter(e=>e.scale>5)}}}),de=le,ce=Object(f["a"])(de,oe,ne,!1,null,null,null),me=ce.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Tabs",{attrs:{value:e.tagsName}},[e.isAdmin?a("TabPane",{attrs:{label:e.$t("profile.chat.tabsSend.itemName"),name:"chat"}},[a("Card",{attrs:{"dis-hover":""}},[a("Form",{attrs:{slot:"title",model:e.message,rules:e.message.ruleValidate},slot:"title"},[a("Row",{attrs:{gutter:30}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.chat.tabsSend.messageMethod"),prop:"type"}},[a("Select",{attrs:{transfer:!0},model:{value:e.message.type,callback:function(t){e.$set(e.message,"type",t)},expression:"message.type"}},e._l(e.message.list,(function(t,s){return a("Option",{directives:[{name:"show",rawName:"v-show",value:t.privilege.filter((function(t){return e.currentUser.userinfo.privilege.includes(t)})).length,expression:"item.privilege.filter(p => currentUser.userinfo.privilege.includes(p) ).length"}],key:s,attrs:{value:t.title,label:e.$t("profile.chat.types."+t.title+".text")}},[e._v(" "+e._s(e.$t("profile.chat.types."+t.title+".text"))+" "),a("p",{staticStyle:{margin:"5px 0","font-size":"10px"}},[e._v(" "+e._s(e.$t("profile.chat.types."+t.title+".describe"))+" ")]),a("PrivilegesTag",{attrs:{data:t.privilege}})],1)})),1)],1)],1),e.message.typeDictionary.includes(e.message.type)?a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:e.$t("profile.chat.tabsSend.messageID"),prop:"id"}},[a("AutoComplete",{attrs:{data:e.message.playerList,placeholder:e.$t("profile.chat.tabsSend.messageID")},model:{value:e.message.id,callback:function(t){e.$set(e.message,"id",t)},expression:"message.id"}},e._l(e.message.playerList,(function(t,s){return a("Option",{key:s,attrs:{value:t.id}},[a("Avatar",{attrs:{src:t.avatarLink||""}},[e._v(e._s(t.username[0]))]),e._v("  "),a("span",[e._v(e._s(t.username))]),a("Tag",{staticStyle:{float:"right"}},[e._v(" "+e._s(t.id)+" ")])],1)})),1)],1)],1):e._e()],1),a("FormItem",{attrs:{label:e.$t("profile.chat.tabsSend.content"),prop:"content"}},[a("Input",{attrs:{"show-word-limit":"",type:"textarea",placeholder:e.$t("profile.chat.placeholder"),maxlength:1e3,autosize:{minRows:5,maxRows:10}},model:{value:e.message.content,callback:function(t){e.$set(e.message,"content",t)},expression:"message.content"}})],1)],1),a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{flex:"1"}}),a("Col",[a("Button",{directives:[{name:"voice-button",rawName:"v-voice-button"}],attrs:{type:"primary",loading:e.message.load,disabled:!e.message.type||!e.message.content},on:{click:e.putMessage}},[e._v(e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1):e._e()],1)},he=[],pe=a("c7c5"),ge=new r["d"]({name:"messagePush",data(){return{tagsName:"chat",message:{list:pe.sendTypes,typeDictionary:pe.typeDictionary,ruleValidate:{type:[{required:!0,trigger:"blur"}],id:[{required:!0,trigger:"blur"}],content:[{required:!0,trigger:"blur"}]},messages:[],playerList:[],show:!1,load:!1,type:"",id:"",content:""}}},components:{BusinessCard:l["a"],PrivilegesTag:c["a"]},created(){this.http=r["f"].call(this)},methods:{putMessage(){const{uId:e}=this.$route.params;this.http.post(r["c"]["user_message"],{data:{data:{toUserId:this.message.id||e,type:this.message.type,content:this.message.content}}}).then(e=>{1==e.data.success?this.$Message.success(e.data.message):this.$Message.error(e.data.message)}).finally(()=>{this.resetMessageFrom(),r["h"].playSendVoice&&r["h"].playSendVoice(),this.message.load=!1,this.message.show=!1})}},computed:{}}),ve=ge,fe=Object(f["a"])(ve,ue,he,!1,null,"0213b60c",null),be=fe.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getChatLog}},[a("Icon",{class:e.load?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),a("div",[e.chatList.length>0?e._l(e.chatList,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"ivu-card ivu-card-bordered ivu-card-dis-hover"},[a("div",{staticClass:"ivu-card-head"},[a("Tag",[e._v("Log")]),a("Tag",[e._v(e._s(t.type))]),a("Time",{attrs:{time:t.createTime,type:"date"}}),e._v(" : "),a("BusinessCard",{attrs:{id:t.byUserId,showAdminUserInfo:!0}},[a("b",[e._v(e._s(t.byUserId||"N/A"))])]),e._v(" -> "),a("BusinessCard",{attrs:{id:t.byUserId,showAdminUserInfo:!0}},[a("b",[e._v(e._s(t.toUserId||"N/A"))])]),a("div",{staticClass:"ivu-card-extra"},[e._v(" "+e._s(e.$t("profile.chat.tabsList.form."+(1==t.haveRead?"read":"unread")))+" ")])],1),a("Html",{attrs:{html:t.content}})],1),a("br")])})):[e._v(" "+e._s(e.$t("basic.tip.notContent"))+" ")]],2),a("br"),a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)},_e=[],Ce=a("1b08"),ke={name:"chat",data(){return{load:!1,chatList:[],limit:20,skip:1,total:0}},components:{BusinessCard:l["a"],Html:Ce["a"]},created(){this.http=r["f"].call(this),this.getChatLog()},methods:{getChatLog(){this.load||(this.load=!0,this.http.get(r["c"]["admin_chatLog"],{params:{limit:this.limit,skip:(this.skip-1)*this.limit,total:this.total}}).then(e=>{const t=e.data;if(1==t.success)return t.data.forEach(e=>e.content=`<p>${e.content}</p>`),this.chatList=t.data,void(this.total=t.total);this.$Message.error(t)}).finally(()=>{this.load=!1}))},handlePageSizeChange(e){this.limit=e,this.getChatLog()},handlePageChange(e){this.skip=e,this.getChatLog()}}},we=ke,Ue=Object(f["a"])(we,ye,_e,!1,null,null,null),xe=Ue.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}}),a("Col",[a("Poptip",{ref:"filesPoptip",attrs:{placement:"bottom-end",trigger:"click",width:"400","popper-class":"files-poptip",padding:"20px 30px"}},[a("Button",[a("Icon",{attrs:{type:"md-funnel",size:"15"}})],1),a("Form",{ref:"filesFunnel",attrs:{slot:"content","label-position":"top"},slot:"content"},[a("FormItem",{attrs:{label:"User dbId"}},[a("Input",{attrs:{type:"text",placeholder:"input user dbId"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1),a("FormItem",{attrs:{label:"Create Time Radiu"}},[a("DatePicker",{attrs:{type:"daterange","split-panels":"",placeholder:"createTime"},on:{"on-change":e.handleCDatepicker}})],1),a("Row",{attrs:{gutter:10}},[a("Col",[a("Button",{on:{click:e.resetFormData}},[e._v(e._s(e.$t("basic.button.reset")))])],1),a("Col",[a("Button",{attrs:{type:"primary",disabled:e.deleteFileLoading},on:{click:e.subimtFormData}},[e._v(" "+e._s(e.$t("basic.button.commit"))+" ")])],1)],1)],1)],1)],1)],1),a("br"),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{flex:"1"}},[a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1),a("Col",[a("Button",{attrs:{size:"small"},on:{click:e.getFiles}},[a("Icon",{class:e.filesLoading?"spin-icon-load":"",attrs:{type:"md-refresh"}})],1)],1)],1),a("br"),a("Card",{attrs:{"dis-hover":""}},[e.files.length>0?a("div",e._l(e.files,(function(t,s){return a("div",{key:s},[a("Row",[a("Col",[a("Tag",[e._v("file")])],1),a("Col",{attrs:{flex:"1"}},[a("p",[a("b",[e._v(e._s(t.filename))])]),a("div",[a("Time",{attrs:{time:t.createTime,type:"datetime"}}),a("Divider",{attrs:{type:"vertical"}}),a("BusinessCard",{attrs:{id:t.byUserId}},[a("router-link",{attrs:{to:{name:"space",params:{uId:t.byUserId}}}},[e._v(e._s(t.byUserId))])],1)],1)]),a("Col",[a("Button",{on:{click:function(a){return e.deleteFileItem(t.filename)}}},[a("Icon",{attrs:{type:"md-trash"}})],1)],1)],1)],1)})),0):a("Empty")],1),a("br"),a("Page",{staticClass:"page",attrs:{size:"small","show-sizer":"","show-total":"","show-elevator":"","page-size":e.limit,current:e.skip,total:e.total},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)},Te=[],Ie={data(){return{util:r["r"],deleteFileLoading:!1,filesLoading:!1,files:[],userId:"",createTimeFrom:0,createTimeTo:0,timeOptions:{disabledDate(e){return e&&e.valueOf()>Date.now()},shortcuts:[{text:this.$i18n.t("sitestats.timeRange.daily"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.weekly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.monthly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$i18n.t("sitestats.timeRange.yearly"),value(){const e=new Date,t=new Date;return t.setTime(t.getTime()-31104e6),[t,e]}}]},limit:40,skip:1,total:0}},components:{BusinessCard:l["a"],Empty:k["a"]},created(){this.http=r["f"].call(this),this.getFiles()},methods:{getFiles(){let e={limit:this.limit,skip:(this.skip-1)*this.limit,data:{}};this.filesLoading||(this.userId&&(e.data.userId=this.userId),this.createTimeFrom&&(e.data.createTimeFrom=this.createTimeFrom),this.createTimeTo&&(e.data.createTimeTo=this.createTimeTo),this.filesLoading=!0,this.http.post(r["c"]["service_files"],{data:e}).then(e=>{const t=e.data;1===t.success&&(this.files=t.data,this.total=t.total)}).finally(()=>{this.filesLoading=!1}))},deleteFileItem(e){this.deleteFileLoading||(this.deleteFileLoading=!0,this.http.delete(r["c"]["service_file"],{data:{filename:e}}).then(e=>{const t=e.data;1!==t.success?this.$Message.error(t.message||t.code):this.$Message.success("error")}).finally(()=>{this.deleteFileLoading=!1}))},resetFormData(){this.userId="",this.createTimeFrom=0,this.createTimeTo=0,this.$refs["filesPoptip"].handleClose(),this.$refs["filesFunnel"].resetFields()},subimtFormData(){this.getFiles(),this.resetFormData()},handleCDatepicker(e){this.createTimeFrom=new Date(e[0]).getTime(),this.createTimeTo=new Date(e[1]).getTime(),this.skip=1},handlePageSizeChange(e){this.limit=e,this.getFiles()},handlePageChange(e){this.skip=e,this.getFiles()}}},$e=Ie,Le=(a("facee"),Object(f["a"])($e,De,Te,!1,null,null,null)),Pe=Le.exports,Me=a("84af"),Fe=(a("313e"),new r["d"]({name:"profile",data(){return{load:!1,privileges:[],openMenu:["comment","comm","log"],adminMenuValue:"home",adminMenus:[{title:"management",child:[{title:"user",value:"user",disabled:!1,privilege:["super","root","dev"]},{title:"blockedUsers",value:"blockedUsers",disabled:!1,privilege:["super","root","dev"]},{title:"muteUsers",value:"muteUsers",disabled:!1,privilege:["admin","super","root","dev"]},{title:"comment",value:"comment",disabled:!1,privilege:["super","root","dev"]},{title:"verifications",value:"verifications",disabled:!1,privilege:["root","dev"]}]},{title:"fileManagement",child:[{title:"files",value:"file_list",disabled:!1,privilege:["root","dev"]}]},{title:"messageManagement",child:[{title:"messagePush",value:"chat_push",disabled:!1,privilege:["admin","super","root","dev"]},{title:"messageList",value:"chat_list",disabled:!1,privilege:["super","root","dev"]}]},{title:"log",icon:"ios-paper",child:[{title:"judgementLog",value:"judgement_log",disabled:!1,privilege:["super","root","dev"]},{title:"adminOperationLog",value:"admin_operation_log",disabled:!1,privilege:["super","root","dev"]},{title:"adminOperation",value:"adminOperation",disabled:!1,privilege:["super","root","dev"]}]}],model:{workingRatio:{value:!1,searchValue:"",data:{}}},statistics:{},stats:{userShowRawValue:4,userConfig:{tooltip:{position:"top"},visualMap:{min:0,calculable:!0,orient:"horizontal",left:"center",top:-100,inRange:{color:["#46E761","#3DCB55","#34AE48","#2B913C","#237430","#275423","#15451D","#0F3315","#203918","#423918","#7F3918","#852E14","#88250F","#942510","#B9170A"]}},calendar:[],series:[]},userData:{},inactiveUserData:Array.from({length:10},(e,t)=>({privilege:0,username:"🦖 "+(t+1),id:-1}))||[],inactiveUserSearchValue:"",workingRatioStats:{tooltip:{position:"top",trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){return`${e[0].name}: <b>${e[0].data}</b>`}},grid:{left:10,right:10,top:10,bottom:0},yAxis:{type:"value",show:!1},xAxis:{type:"category",data:[],interval:10},series:[]},workingRatioData:[],statisticalPercentageStats:{grid:{top:"20%"},series:[]},statisticalPercentageData:{}}}},components:{BusinessCard:l["a"],HtmlLink:j["a"],PrivilegesTag:c["a"],Banner:Me["a"],user:y,blockedUsers:D,muteUsers:M,verifications:J,comment:O,adminOperationLog:Z,judgementLog:re,chatPush:be,chatList:xe,adminOperation:me,fileList:Pe},created(){const{pagename:e}=this.$route.params;if(this.http=r["f"].call(this),void 0!==e){for(let e=0;e<this.adminMenus.length;e++)if(this.adminMenus[e].child)for(let t=0;t<this.adminMenus[e].child.length;t++)this.adminMenus[e].ignore||(this.adminMenus[e].child[t].disabled=r["a"].checkPrivilegeGroup(this.currentUser.userinfo,this.adminMenus[e].child[t].privilege));this.getUserStats(),this.getStatisticsInfo(),this.onMenuActive(e)}else this.onMenuActive("space")},methods:{onMenuActive(e){this.adminMenuValue=e,this.$router.push({name:"admin",params:{pagename:e},query:{...this.$route.query}})},getStatisticsInfo(){this.http.get(r["c"]["statistics"],{params:{reports:!0,players:!0,confirmed:!0,registers:!0,banAppeals:!0,admins:!0,from:15147648e5}}).then(e=>{const t=e.data;1===t.success&&(this.statistics=t.data)})},getUserStats(){this.isAdminL2&&(this.load=!0,this.http.get(r["c"]["admin_userStats"],{}).then(e=>{const t=e.data;if(1===t.success)return this.stats.userData=t.data.behaviorAdminDayStats,this.stats.inactiveUserData=t.data.inactiveAdminStats,this.stats.workingRatioData=t.data.behaviorAdminStats,this.generateYearsHeatMap(),void this.generateWorkingRatio();this.$Message.error(this.$t(`basic.tip['${t.code}']`,{message:t.message||""}))}).finally(()=>{this.load=!1}))},generateYearsHeatMap(){this.stats.workingRatioStats.series=[],this.stats.workingRatioStats.xAxis.data=[];let e=this.stats.workingRatioData.reduce((e,t)=>{const a=t.month;return e[a]||(e[a]=[]),e[a].push(t),e},{}),t=Object.entries(e),a=[];t.slice(t.length-20,t.length).forEach((e,t,s)=>{this.stats.workingRatioStats.xAxis.data.push(e[0]),a.push(e[1].map(e=>e.total_count)[0])}),this.stats.workingRatioStats.series.push({data:a,type:"bar",barWidth:"95%",itemStyle:{color:"rgb(211,201,8)",borderRadius:[4,4,0,0]},label:{show:!0,position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:e=>""+e.data,fontSize:16,rich:{name:{}}},showBackground:!0})},generateWorkingRatio(){this.stats.userConfig.series=[],this.stats.userConfig.calendar=[];let e=this.stats.userData.reduce((e,t)=>{const a=t.month.split("-")[0];return e[a]||(e[a]=[]),e[a].push(t),e},{}),t=Object.entries(e);t.slice(t.length-this.stats.userShowRawValue,t.length).forEach((e,t,a)=>{this.stats.userConfig.calendar.push({top:185*t+23,range:e[0],cellSize:["auto",15],itemStyle:{borderWidth:.5,color:"rgba(0, 0, 0, 0)",borderColor:"rgba(141,141,141,0.3)"},splitLine:{lineStyle:{color:"rgba(141,141,141,0.3)"}},left:50,right:0}),this.stats.userConfig.series.push({symbol:"roundRect",universalTransition:{enabled:!0,seriesKey:"calendar"},type:"scatter",coordinateSystem:"calendar",calendarIndex:t,data:e[1].map(e=>[e.month,e.total_count])})})},generateStatisticalPercentage(e){if(!e)return;let t=e.users.map(e=>({value:e.total,name:e.username})),a=new Date(e.month),s=new Date(a).setHours(0,0,0,0).toString(),i=new Date(a).setHours(23,59,59,999).toString();e.max=e.users.sort((e,t)=>t.total-e.total)[0],e.title=e.month,e.date_as=`${s},${i}`,this.stats.statisticalPercentageStats.series=[{type:"pie",radius:["30%","100%"],center:["50%","100%"],startAngle:180,endAngle:360,data:t}]},onRatioClick(e,t){switch(this.model.workingRatio.value=!this.model.workingRatio.value,e.seriesType){case"scatter":this.model.workingRatio.data=t.filter(t=>e.data[0]===t.month)[0];break;case"bar":this.model.workingRatio.data=t.filter(t=>e.name===t.month)[0];break}this.generateStatisticalPercentage(this.model.workingRatio.data)}},computed:{}})),Re=Fe,Se=(a("5f84"),Object(f["a"])(Re,s,i,!1,null,null,null));t["default"]=Se.exports},"35fa":function(e,t,a){"use strict";a("6fe0")},"3ce3":function(e,t,a){"use strict";a("78e6")},"460f":function(e,t,a){},"4cf6":function(e,t,a){},"5f84":function(e,t,a){"use strict";a("f5222")},"605d":function(e,t,a){var s=a("c6b6"),i=a("da84");e.exports="process"==s(i.process)},6219:function(e,t,a){"use strict";a("0379")},"6fe0":function(e,t,a){},7305:function(e,t,a){},"78e6":function(e,t,a){},"945e":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",[e.linkList.length<=0?a("Empty",{attrs:{notHint:!1}}):e._l(e.linkList,(function(t,s){return a("FormItem",{key:s,attrs:{prop:"linkList["+s+"].value",rules:{validator:function(t,a,i){e.checkVideoLink(t,e.linkList[s].value,i)},trigger:"change"}}},[a("Row",{attrs:{gutter:5}},[a("Col",{attrs:{flex:"1"}},[a("Input",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"url",pattern:"*://.*",clearable:!e.isReadonly,readonly:e.isReadonly,placeholder:e.placeholder},on:{"on-change":e.onInputChange},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"i.value"}})],1),e.isReadonly?a("Col",[a("a",{attrs:{href:t.value,target:"_new"}},[a("Button",[a("Icon",{attrs:{type:"md-share"}})],1)],1)]):a("Col",[e.linkList.length>=0?a("Button",{directives:[{name:"voice-button",rawName:"v-voice-button"}],attrs:{type:"dashed"},on:{click:function(t){return e.del(s)}}},[a("Icon",{attrs:{type:"md-trash"}})],1):e._e()],1)],1)],1)})),e.isReadonly?e._e():a("Button",{attrs:{long:"",disabled:e.linkList.length>=e.max},on:{click:e.add}},[a("Icon",{attrs:{type:"md-add"}}),e._v(" ("+e._s(e.linkList.length)+"/"+e._s(e.max)+") ")],1)],2)],1)},i=[],r=a("e4b4"),o=a("02bc"),n=new r["d"]({props:{placeholder:"",isReadonly:!1,max:{type:Number,default:3},links:{type:String,default:""}},data(){return{linkList:[]}},watch:{},components:{Empty:o["a"]},created(){this.init()},methods:{init(){this.linkList=[],this.links&&"string"==typeof this.links&&this.links.split(",").forEach(e=>{this.linkList.push({value:e})}),this.links&&"object"==typeof this.links&&this.links.forEach(e=>{this.linkList.push({value:e})})},add(){this.linkList.length>=this.max||this.linkList.push({value:""})},del(e){this.linkList.splice(e,1),this.upData()},onInputChange(){this.upData()},upData(){let e=[];for(let t of this.linkList){let a=r["n"].check("link",t.value);t.value&&0==a.code&&e.push(t.value)}this.$emit("input",e.toString())},checkVideoLink(e,t,a){const s=this.$i18n.t("report.messages.videoBadFormat"),i=t;if(!i)return a(this.$i18n.t("report.messages.videoEmpty"));const o=r["n"].check("link",i);0==o.code?a():a(new Error(this.$i18n.t(s)))}}}),l=n,d=a("2877"),c=Object(d["a"])(l,s,i,!1,null,"3a71de60",null);t["a"]=c.exports},"99dd":function(e,t,a){"use strict";a("460f")},"9b87":function(e,t,a){"use strict";a("4cf6")},a030:function(e,t,a){"use strict";a("fe76")},a640:function(e,t,a){"use strict";var s=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&s((function(){a.call(null,t||function(){throw 1},1)}))}},c7c5:function(e){e.exports=JSON.parse('{"name":"messgae","sendTypes":[{"title":"direct","privilege":["normal","admin","root","super","dev"]},{"title":"warn","privilege":["root","super","dev"]},{"title":"fatal","privilege":["root","super","dev"]},{"title":"toAll","privilege":["root","super","dev"]},{"title":"toAdmins","privilege":["super","admin","dev"]},{"title":"toNormals","privilege":["super","admin"]},{"title":"command","privilege":["root","dev"]}],"typeDictionary":["direct","warn","fatal"]}')},d17f:function(e,t,a){"use strict";a("edb8")},d58f:function(e,t,a){var s=a("1c0b"),i=a("7b0b"),r=a("44ad"),o=a("50c4"),n=function(e){return function(t,a,n,l){s(a);var d=i(t),c=r(d),m=o(d.length),u=e?m-1:0,h=e?-1:1;if(n<2)while(1){if(u in c){l=c[u],u+=h;break}if(u+=h,e?u<0:m<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:m>u;u+=h)u in c&&(l=a(l,c[u],u,d));return l}};e.exports={left:n(!1),right:n(!0)}},e124:function(e,t,a){e.exports=a.p+"assets/img/bf.b384c970.jpg"},e153:function(e,t,a){var s={"./images/games/bf1/bf.jpg":"e953","./images/games/bf6/bf.jpg":"1c8a","./images/games/bfv/bf.jpg":"e124"};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id="e153"},e953:function(e,t,a){e.exports=a.p+"assets/img/bf.41bffcdf.jpg"},edb8:function(e,t,a){},f5222:function(e,t,a){},facee:function(e,t,a){"use strict";a("7305")},fe76:function(e,t,a){}}]);
//# sourceMappingURL=chunk-3a0ac820.2.9.18.js.map