{"version":3,"sources":["webpack:///./src/views/Signup.vue","webpack:///src/views/Signup.vue","webpack:///./src/views/Signup.vue?e9bc","webpack:///./src/views/Signup.vue?9f49","webpack:///./src/components/EmailTip.vue","webpack:///src/components/EmailTip.vue","webpack:///./src/components/EmailTip.vue?f94a","webpack:///./src/components/EmailTip.vue?3e5f","webpack:///./src/components/Captcha.vue?b936","webpack:///./src/components/Captcha.vue","webpack:///src/components/Captcha.vue","webpack:///./src/components/Captcha.vue?68b1","webpack:///./src/components/Captcha.vue?a78d"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","push","name","_v","_s","$t","$route","bindOriginName","span","pull","stepsIndex","ref","signup","ruleValidate","backBindOriginMsg","_e","domProps","model","value","username","callback","$$v","$set","expression","password","originEmail","originName","directives","rawName","captcha","slot","on","$refs","refreshCaptcha","$event","preventDefault","stopPropagation","spinShow","handleSignup","bindOrigin","staticRenderFns","data","required","min","max","trigger","components","EmailTip","Captcha","created","query","methods","o","http","language","encryptCaptcha","then","res","that","catch","err","finally","params","code","lang","setInterval","bindOriginVerify","component","$","props","email","style","captchaTime","count","height","content","class","disable","staticStyle","id","type","default","seconds","postload","hash","capthcaHash","fun","lock","storage","destroyed","clearInterval","t","setTimeout","capthcaTimeout","computed","isCaptcha"],"mappings":"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","file":"assets/js/chunk-3c35cd10.2.7.0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"content\"},[_c('br'),_c('Row',[_c('Col',{attrs:{\"xs\":{push: 1},\"lg\":{push: 0}}},[_c('Breadcrumb',[_c('BreadcrumbItem',{attrs:{\"to\":{name: 'home'}}},[_vm._v(_vm._s(_vm.$t(\"header.index\")))]),_c('BreadcrumbItem',[_vm._v(_vm._s(this.$route.name == _vm.bindOriginName ? _vm.$t(\"bindOrigin.title\") : _vm.$t(\"signup.title\")))])],1)],1)],1),_c('br'),_c('Row',[_c('Col',{attrs:{\"xs\":{span: 22, push: 1, pull: 1},\"lg\":{span: 24, push: 0, pull: 0}}},[_c('Card',{attrs:{\"shadow\":\"\"}},[_c('Steps',{staticClass:\"mobile-hide\",attrs:{\"current\":_vm.stepsIndex}},[_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[0].title'),\"content\":_vm.$t('signup.steps[0].supplement')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[1].title'),\"content\":_vm.$t('signup.steps[1].title')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[2].title'),\"content\":_vm.$t('signup.steps[2].title')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[3].title'),\"content\":_vm.$t('signup.steps[3].title')}}),_c('Step',{attrs:{\"title\":_vm.$t('signup.steps[4].title'),\"content\":_vm.$t('signup.steps[4].title')}})],1),_c('Divider',{staticClass:\"mobile-hide\",attrs:{\"dashed\":\"\"}}),_c('Card',{attrs:{\"dis-hover\":\"\",\"padding\":50}},[_c('Form',{ref:\"formValidate\",attrs:{\"label-position\":\"top\",\"model\":_vm.signup,\"rules\":_vm.ruleValidate}},[(_vm.backBindOriginMsg)?_c('Alert',{attrs:{\"type\":\"error\",\"show-icon\":\"\"}},[_c('b',[_vm._v(_vm._s(_vm.$t('signup.failed'))+\" :\")]),_vm._v(\" \"+_vm._s(_vm.backBindOriginMsg)+\" \")]):_vm._e(),[_c('Alert',{attrs:{\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.$t('signup.eaPrivacy'))}}),_vm._v(\" \"+_vm._s(_vm.$t('signup.checkAllEmail'))+\" \")]),_c('br')],(_vm.stepsIndex == 0)?[_c('FormItem',{attrs:{\"label\":_vm.$t('signup.form.username'),\"prop\":\"username\"}},[_c('Input',{attrs:{\"maxlength\":\"40\",\"size\":\"large\",\"placeholder\":_vm.$t('signup.placeholder.username')},model:{value:(_vm.signup.username),callback:function ($$v) {_vm.$set(_vm.signup, \"username\", $$v)},expression:\"signup.username\"}})],1),_c('FormItem',{attrs:{\"label\":_vm.$t('signup.form.password'),\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"password\":\"\",\"minlength\":\"6\",\"size\":\"large\",\"placeholder\":_vm.$t('signup.placeholder.password')},model:{value:(_vm.signup.password),callback:function ($$v) {_vm.$set(_vm.signup, \"password\", $$v)},expression:\"signup.password\"}})],1)]:_vm._e(),(_vm.stepsIndex === 1)?[_c('FormItem',{attrs:{\"label\":_vm.$t('signup.form.originEmail'),\"prop\":\"originEmail\"}},[_c('Input',{attrs:{\"size\":\"large\",\"placeholder\":_vm.$t('signup.placeholder.originEmail')},model:{value:(_vm.signup.originEmail),callback:function ($$v) {_vm.$set(_vm.signup, \"originEmail\", $$v)},expression:\"signup.originEmail\"}})],1),_c('FormItem',{attrs:{\"label\":_vm.$t('signup.form.originName'),\"prop\":\"originName\"}},[_c('Input',{attrs:{\"size\":\"large\",\"placeholder\":_vm.$t('signup.placeholder.originName')},model:{value:(_vm.signup.originName),callback:function ($$v) {_vm.$set(_vm.signup, \"originName\", $$v)},expression:\"signup.originName\"}})],1)]:_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsIndex === 2),expression:\"stepsIndex === 2\"}]},[_c('FormItem',{attrs:{\"label\":_vm.$t('captcha.title')}},[_c('Input',{attrs:{\"type\":\"text\",\"size\":\"large\",\"maxlength\":\"4\",\"placeholder\":_vm.$t('captcha.title')},model:{value:(_vm.signup.captcha),callback:function ($$v) {_vm.$set(_vm.signup, \"captcha\", $$v)},expression:\"signup.captcha\"}},[_c('div',{staticClass:\"captcha-input-append\",attrs:{\"slot\":\"append\",\"alt\":_vm.$t('captcha.get')},slot:\"append\"},[_c('Captcha',{ref:\"captcha\"})],1)])],1)],1),(_vm.stepsIndex === 3)?[_c('EmailTip',{attrs:{\"email\":_vm.signup.originEmail},on:{\"refreshCaptcha\":_vm.$refs.captcha.refreshCaptcha}})]:_vm._e(),(_vm.stepsIndex === 4)?[_c('div',{attrs:{\"align\":\"center\"}},[_c('Icon',{attrs:{\"type\":\"md-checkmark-circle-outline\",\"size\":\"180\",\"color\":\"#42b983\"}})],1)]:_vm._e(),_c('Row',[_c('Col',{attrs:{\"flex\":\"auto\"}},[(_vm.stepsIndex >=0 && _vm.stepsIndex <= 2)?_c('Button',{attrs:{\"disabled\":this.$route.name == _vm.bindOriginName ? _vm.stepsIndex <= 1 : _vm.stepsIndex == 0,\"size\":\"large\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stepsIndex--}}},[_vm._v(_vm._s(_vm.$t('basic.button.prev'))+\" \")]):_vm._e(),_c('Divider',{attrs:{\"type\":\"vertical\"}}),(_vm.stepsIndex != 2  && _vm.stepsIndex >= 0 && _vm.stepsIndex <= 2)?_c('Button',{attrs:{\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stepsIndex++}}},[_vm._v(_vm._s(_vm.$t('basic.button.next'))+\" \")]):_vm._e()],1),_c('Col',{attrs:{\"flex\":\"auto\",\"align\":\"right\",\"type\":\"flex\"}},[(_vm.stepsIndex == 2 && _vm.$route.name != _vm.bindOriginName)?[_c('Button',{attrs:{\"long\":\"\",\"disabled\":!_vm.signup.captcha,\"loading\":_vm.spinShow,\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSignup('formValidate')}}},[_vm._v(_vm._s(_vm.$t('basic.button.submit'))+\" \")])]:(_vm.stepsIndex == 2 && _vm.$route.name == _vm.bindOriginName)?[_c('Button',{attrs:{\"long\":\"\",\"disabled\":!_vm.signup.captcha,\"loading\":_vm.spinShow,\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":_vm.bindOrigin}},[_vm._v(_vm._s(_vm.$t('basic.button.submit'))+\" \")])]:_vm._e()],2)],1)],2)],1),_c('br'),(_vm.stepsIndex != 4 || _vm.stepsIndex != 3)?_c('Row',{attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[_c('Col',[_c('router-link',{attrs:{\"to\":{name: 'signin'}}},[_vm._v(_vm._s(_vm.$t('signup.form.submitHint')))])],1),_c('Divider',{attrs:{\"type\":\"vertical\"}}),_c('Col',[_c('router-link',{attrs:{\"to\":{name: 'forgetPassword'}}},[_vm._v(_vm._s(_vm.$t('signup.form.forgetPasswordHint')))])],1)],1):_vm._e()],1)],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"content\">\n      <br>\n      <Row>\n        <Col :xs=\"{push: 1}\" :lg=\"{push: 0}\">\n          <Breadcrumb>\n            <BreadcrumbItem :to=\"{name: 'home'}\">{{ $t(\"header.index\") }}</BreadcrumbItem>\n            <BreadcrumbItem>{{ this.$route.name == bindOriginName ? $t(\"bindOrigin.title\") : $t(\"signup.title\") }}</BreadcrumbItem>\n          </Breadcrumb>\n        </Col>\n      </Row>\n      <br>\n\n      <Row>\n        <Col :xs=\"{span: 22, push: 1, pull: 1}\" :lg=\"{span: 24, push: 0, pull: 0}\">\n          <Card shadow>\n            <Steps :current=\"stepsIndex\" class=\"mobile-hide\">\n              <Step :title=\"$t('signup.steps[0].title')\" :content=\"$t('signup.steps[0].supplement')\"></Step>\n              <Step :title=\"$t('signup.steps[1].title')\" :content=\"$t('signup.steps[1].title')\"></Step>\n              <Step :title=\"$t('signup.steps[2].title')\" :content=\"$t('signup.steps[2].title')\"></Step>\n              <Step :title=\"$t('signup.steps[3].title')\" :content=\"$t('signup.steps[3].title')\"></Step>\n              <Step :title=\"$t('signup.steps[4].title')\" :content=\"$t('signup.steps[4].title')\"></Step>\n            </Steps>\n\n            <Divider dashed class=\"mobile-hide\"></Divider>\n\n            <Card dis-hover :padding=\"50\">\n              <Form ref=\"formValidate\" label-position=\"top\" :model=\"signup\" :rules=\"ruleValidate\">\n                <Alert type=\"error\" show-icon v-if=\"backBindOriginMsg\">\n                  <b>{{ $t('signup.failed') }} :</b>\n                  {{ backBindOriginMsg }}\n                </Alert>\n\n                <template>\n                  <Alert type=\"info\" show-icon>\n                    <div v-html=\"$t('signup.eaPrivacy')\"></div>\n                    {{ $t('signup.checkAllEmail') }}\n                  </Alert>\n                  <br>\n                </template>\n\n                <template v-if=\"stepsIndex == 0\">\n                  <FormItem :label=\"$t('signup.form.username')\" prop=\"username\">\n                    <Input v-model=\"signup.username\" maxlength=\"40\" size=\"large\"\n                           :placeholder=\"$t('signup.placeholder.username')\"/>\n                  </FormItem>\n                  <FormItem :label=\"$t('signup.form.password')\" prop=\"password\">\n                    <Input type=\"password\" password minlength=\"6\" v-model=\"signup.password\" size=\"large\"\n                           :placeholder=\"$t('signup.placeholder.password')\"/>\n                  </FormItem>\n                </template>\n\n                <template v-if=\"stepsIndex === 1\">\n                  <FormItem :label=\"$t('signup.form.originEmail')\" prop=\"originEmail\">\n                    <Input v-model=\"signup.originEmail\" size=\"large\" :placeholder=\"$t('signup.placeholder.originEmail')\"/>\n                  </FormItem>\n                  <FormItem :label=\"$t('signup.form.originName')\" prop=\"originName\">\n                    <Input v-model=\"signup.originName\" size=\"large\" :placeholder=\"$t('signup.placeholder.originName')\"/>\n                  </FormItem>\n                </template>\n\n                <div v-show=\"stepsIndex === 2\">\n                  <FormItem :label=\"$t('captcha.title')\">\n                    <Input type=\"text\" v-model=\"signup.captcha\"\n                           size=\"large\"\n                           maxlength=\"4\"\n                           :placeholder=\"$t('captcha.title')\">\n                      <div slot=\"append\" class=\"captcha-input-append\" :alt=\"$t('captcha.get')\">\n                        <Captcha ref=\"captcha\"></Captcha>\n                      </div>\n                    </Input>\n                  </FormItem>\n                </div>\n\n                <template v-if=\"stepsIndex === 3\">\n                  <EmailTip :email=\"signup.originEmail\" @refreshCaptcha=\"$refs.captcha.refreshCaptcha\"></EmailTip>\n                </template>\n\n                <template v-if=\"stepsIndex === 4\">\n                  <div align=\"center\">\n                    <Icon type=\"md-checkmark-circle-outline\" size=\"180\" color=\"#42b983\"/>\n                  </div>\n                </template>\n\n                <Row>\n                  <Col flex=\"auto\">\n                    <Button v-if=\"stepsIndex >=0 && stepsIndex <= 2\"\n                            :disabled=\"this.$route.name == bindOriginName ? stepsIndex <= 1 : stepsIndex == 0\"\n                            @click.prevent.stop=\"stepsIndex--\" size=\"large\">{{ $t('basic.button.prev') }}\n                    </Button>\n                    <Divider type=\"vertical\"/>\n                    <Button v-if=\"stepsIndex != 2  && stepsIndex >= 0 && stepsIndex <= 2\"\n                            @click.prevent.stop=\"stepsIndex++\" size=\"large\"\n                            type=\"primary\">{{ $t('basic.button.next') }}\n                    </Button>\n                  </Col>\n                  <Col flex=\"auto\" align=\"right\" type=\"flex\">\n                    <!-- 注册 -->\n                    <template v-if=\"stepsIndex == 2 && $route.name != bindOriginName\">\n                      <Button\n                          long\n                          @click=\"handleSignup('formValidate')\"\n                          :disabled=\"!signup.captcha\"\n                          :loading=\"spinShow\"\n                          size=\"large\" type=\"primary\">{{ $t('basic.button.submit') }}\n                      </Button>\n                    </template>\n                    <!-- 绑定 -->\n                    <template v-else-if=\"stepsIndex == 2 && $route.name == bindOriginName\">\n                      <Button long\n                              @click=\"bindOrigin\"\n                              :disabled=\"!signup.captcha\"\n                              :loading=\"spinShow\"\n                              size=\"large\" type=\"primary\">{{ $t('basic.button.submit') }}\n                      </Button>\n                    </template>\n                  </Col>\n                </Row>\n              </Form>\n            </Card>\n\n            <br>\n            <Row type=\"flex\" justify=\"center\" align=\"middle\" v-if=\"stepsIndex != 4 || stepsIndex != 3\">\n              <Col>\n                <router-link :to=\"{name: 'signin'}\">{{ $t('signup.form.submitHint') }}</router-link>\n              </Col>\n              <Divider type=\"vertical\"/>\n              <Col>\n                <router-link :to=\"{name: 'forgetPassword'}\">{{ $t('signup.form.forgetPasswordHint') }}</router-link>\n              </Col>\n            </Row>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BFBAN from \"../assets/js/bfban\";\n\nimport {http, api, http_token, mail} from '../assets/js/index'\nimport {testWhitespace} from \"@/mixins/common\";\n\nimport EmailTip from \"../components/EmailTip\";\nimport Captcha from \"../components/Captcha\";\n\nimport _ from \"lodash\";\n\nexport default new BFBAN({\n  data() {\n    return {\n      stepsIndex: 0,\n      ruleValidate: {\n        username: [\n          {required: true, min: 4, max: 40, trigger: 'blur'}\n        ],\n        password: [\n          {required: true, min: 6, max: 40, trigger: 'blur'}\n        ],\n        originEmail: [\n          {required: true, trigger: 'blur'}\n        ],\n        originName: [\n          {required: true, trigger: 'blur'}\n        ],\n      },\n      signup: {\n        username: '',\n        password: '',\n        originEmail: '',\n        originName: '',\n        captcha: '',\n      },\n      backBindOriginMsg: '',\n      spinShow: false,\n\n      // 绑定页面名字\n      bindOriginName: 'bindOrigin',\n    }\n  },\n  components: {EmailTip, Captcha},\n  created() {\n    const {query, name} = this.$route;\n\n    this.http = http_token.call(this);\n\n    if (name == this.bindOriginName) {\n      this.stepsIndex = 1;\n\n      delete this.ruleValidate.username;\n      delete this.ruleValidate.password;\n    }\n\n    // 注册验证\n    this.registerVerify(query.code);\n  },\n  methods: {\n    // 注册\n    handleSignup(name) {\n      const that = this;\n      this.$refs[name].validate((valid) => {\n        let {username, password, originEmail, originName, captcha} = _.each(this.signup, (v, k, o) => {\n          o[k] = v.trim();\n        });\n\n        // 检查表单\n        if (!valid) {\n          this.$Message.error('Fail!');\n          return;\n        }\n\n        if (username && !testWhitespace(username) && password && !testWhitespace(password) && captcha.length === 4) {\n          this.spinShow = true;\n\n          http.post(api[\"account_signup\"], {\n            data: {\n              data: {\n                username,\n                password,\n                originEmail,\t// must match the originName below\n                originName,\t// must have one of bf series game\n                language: mail.exchangeLangField(this.$root.$i18n.locale)\n              },\n              encryptCaptcha: this.$refs.captcha.hash,\n              captcha\n            }\n          }).then(res => {\n            const d = res.data;\n\n            if (d.success == 1) {\n              that.stepsIndex += 1;\n              that.$Message.success(d.code);\n              return;\n            }\n\n            that.$Message.error(d.code);\n            that.backBindOriginMsg = res.message;\n          }).catch(err => {\n            that.$Message.error(err);\n\n            that.signup.captcha = '';\n            that.signup.originEmail = '';\n            that.signup.originName = '';\n            that.stepsIndex = 0;\n\n          }).finally(() => {\n            this.spinShow = false;\n            this.$refs.captcha.refreshCaptcha();\n          });\n        } else {\n          this.$Message.error('请规范填写');\n        }\n      })\n    },\n\n    // 注册验证\n    async registerVerify(code) {\n      if (!code) return;\n\n      http.get(api[\"account_signupVerify\"], {\n        params: {\n          code,\n          lang: this.$root.$i18n.locale\n        },\n      }).then((res) => {\n        const d = res.data;\n\n        if (d.success === 1) {\n          this.stepsIndex = 4;\n\n          setInterval(function () {\n            this.$router.push('/signin')\n          }, 3000);\n        } else {\n          this.$Message.error(d.code || d.msg);\n\n          this.signup.password = '';\n          this.signup.captcha = '';\n\n          this.$refs['captcha'].refreshCaptcha();\n        }\n      });\n    },\n\n    // 绑定橘子账户\n    bindOrigin() {\n      const that = this;\n      let {originEmail, originName, captcha} = this.signup;\n\n      that.$refs['formValidate'].validate((valid) => {\n        // 检查表单\n        if (!valid) { return; }\n\n        that.spinShow = true;\n\n        that.http.post(api[\"user_bindOrigin\"], {\n          data: {\n            data: {\n              originEmail,\n              originName,\n              language: mail.exchangeLangField(that.$i18n.locale)\n            },\n            encryptCaptcha: this.$refs.captcha.hash,\n            captcha,\n          }\n        }).then((res) => {\n          const d = res.data;\n\n          if (d.success == 1) {\n            that.stepsIndex++;\n            that.$Message.success(d.message);\n\n            return;\n          }\n\n          if (typeof d.code == 'string') {\n            switch (d.code) {\n              case \"bindOrigin.gameNotShowed\":\n                that.$Message.error(this.$i18n.t('signup.gameNotShowed'));\n                break;\n              case \"bindOrigin.originNotFound\":\n                that.$Message.error(this.$i18n.t('signup.playerNotFound'));\n                break;\n              case \"bindOrigin.originBindingExist\":\n                that.$Message.error(this.$i18n.t('signup.originIdExist'));\n                break;\n              case \"bindOrigin.bad\":\n                that.$Message.error(this.$i18n.t('signup.failed'));\n                break;\n              default:\n                that.$Message.error(d.code);\n                break;\n            }\n\n            that.backBindOriginMsg = `${d.code} / ${d.message}`;\n            that.$refs.captcha.refreshCaptcha();\n          }\n\n        }).catch(err => {\n          that.backBindOriginMsg = this.$i18n.t('signup.failed');\n        }).finally(() => {\n          that.spinShow = false;\n        });\n      })\n    },\n\n    // 绑定橘子验证\n    // 提供旧用户需要换绑\n    bindOriginVerify(code) {\n      if (!code) {\n        return\n      }\n\n      this.http.get(api[\"user_bindOriginVerify\"], {\n        params: {code}\n      }).then(res => {\n        const d = res.data;\n\n        if (d.success === 1) {\n          this.stepsIndex = 3;\n          this.$Message.success(d.message);\n\n          setInterval(() => this.$router.back(), 3000);\n        } else {\n          this.$Message.error(d.code);\n        }\n      }).finally(() => {\n\n      })\n    },\n  },\n});\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Signup.vue?vue&type=template&id=0d31be7e&\"\nimport script from \"./Signup.vue?vue&type=script&lang=js&\"\nexport * from \"./Signup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$('signup.checkAllEmail'))+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Alert type=\"success\" show-icon>\n      {{ $('signup.checkAllEmail') }}\n    </Alert>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"EmailTip\",\n  props: {\n    email: String\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailTip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailTip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmailTip.vue?vue&type=template&id=32964e9f&scoped=true&\"\nimport script from \"./EmailTip.vue?vue&type=script&lang=js&\"\nexport * from \"./EmailTip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32964e9f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=style&index=0&id=04e5879f&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"captcha-view\",style:(`cursor: ${_vm.captchaTime.count <= 0 ? 'pointer' : 'not-allowed'};height: ${_vm.height}`),on:{\"click\":_vm.refreshCaptcha}},[(!_vm.content)?_c('span',{staticClass:\"tip\"},[(!_vm.disable)?[_vm._v(\" \"+_vm._s(_vm.$t('captcha.get'))+\" \")]:_c('div',{staticStyle:{\"min-width\":\"80px\"}},[_c('Icon',{attrs:{\"type\":\"md-close\",\"size\":\"20\"}})],1)],2):_c('div',{class:`${_vm.captchaTime.count <= 0 ? 'disable': ''}`,domProps:{\"innerHTML\":_vm._s(_vm.content)}}),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.content && _vm.captchaTime.count <= 0),expression:\"content && captchaTime.count <= 0\"}],staticClass:\"captcha-view-icon\"},[(_vm.disable)?_c('Icon',{attrs:{\"type\":\"md-close\",\"size\":\"20\"}}):_c('Icon',{attrs:{\"type\":\"md-refresh\",\"size\":\"20\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.captchaTime.count > 0),expression:\"captchaTime.count > 0\"}],staticClass:\"count\"},[_vm._v(_vm._s(_vm.captchaTime.count)+\"s\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"captcha-view\"\n       @click=\"refreshCaptcha\"\n       :style=\"`cursor: ${captchaTime.count <= 0 ? 'pointer' : 'not-allowed'};height: ${height}`\">\n    <span v-if=\"!content\" class=\"tip\">\n      <template v-if=\"!disable\">\n        {{ $t('captcha.get') }}\n      </template>\n      <div v-else style=\"min-width: 80px\">\n        <Icon type=\"md-close\" size=\"20\" />\n      </div>\n    </span>\n    <div v-else v-html=\"content\"\n         :class=\"`${captchaTime.count <= 0 ? 'disable': ''}`\">\n    </div>\n    <transition name=\"fade\">\n      <div v-show=\"content && captchaTime.count <= 0\" class=\"captcha-view-icon\">\n        <Icon v-if=\"disable\" type=\"md-close\" size=\"20\" />\n        <Icon v-else type=\"md-refresh\" size=\"20\" />\n      </div>\n    </transition>\n    <div class=\"count\" v-show=\"captchaTime.count > 0\">{{ captchaTime.count }}s</div>\n  </div>\n</template>\n\n<script>\nimport {http, api, storage} from '../assets/js/index'\nexport default {\n  name: \"Captcha\",\n  props: {\n    id: {\n      type: String,\n      default: '0',\n    },\n    disable: {\n      type: Boolean,\n      default: false,\n    },\n    seconds: {\n      type: Number,\n      default: 60\n    },\n    height: {\n      type: String,\n      default: '40px'\n    }\n  },\n  data() {\n    return {\n      postload: false,\n      hash: \"\",\n      content: \"\",\n      capthcaHash: {},\n      captchaTime: {\n        fun: null,\n        count: 0,\n        lock: false,\n      },\n    }\n  },\n  created() {\n    let captcha = storage.session().get('captcha');\n    if (captcha) {\n      this.capthcaHash = captcha.data;\n    } else {\n      storage.session().set(`captcha`, {\n        [`${this.id}_${this.$route.name}`]: this.seconds\n      });\n    }\n  },\n  destroyed() {\n    clearInterval(this.captchaTime.fun);\n    this.captchaTime.fun = null;\n  },\n  methods: {\n    /**\n     * 刷新验证码\n     */\n    async refreshCaptcha() {\n      let captcha = await storage.session().get('captcha');\n      let that = this;\n\n      if (captcha.code <= 0) {\n        captcha = {\n          data: {\n            value: this.seconds,\n          }\n        }\n      }\n\n      if (this.disable || this.postload) return;\n      if (this.captchaTime.count > 0) return;\n\n      this.postload = true;\n\n      http.get(api[\"captcha\"], {\n        params: {\n          t: Math.random()\n        }\n      }).then((res) => {\n        if (res.data.success === 1) {\n          // 储存验证码hash\n          that.capthcaHash = Object.assign({\n            [that.$route.name] : 0\n          });\n\n          this.hash = res.data.data[\"hash\"];\n          this.content = res.data.data[\"content\"];\n        }\n      }).finally((res) => {\n        setTimeout(function () {\n          that.postload = false;\n        }, 800)\n\n        if (Object.keys(captcha.data.value).indexOf(this.$route.name) >= 0) {\n          // 会话持久对应时间加载\n          this.captchaTime.count = captcha.data.value[this.$route.name];\n        }\n\n        this.capthcaTimeout(this.captchaTime.count || this.seconds);\n      });\n    },\n    /**\n     * 计时器\n     * @param num\n     */\n    capthcaTimeout(num) {\n      const that = this;\n      let fun;\n      if (that.captchaTime.lock) return;\n      that.captchaTime.count = num;\n      fun = setInterval(function () {\n        if (that.captchaTime.count <= 0) {\n          clearInterval(fun);\n          that.captchaTime.lock = false;\n          return;\n        }\n        that.captchaTime.count -= 1;\n\n        that.capthcaHash = Object.assign({\n          [`${that.id}_${that.$route.name}`] : that.captchaTime.count\n        });\n        storage.session().set(\"captcha\", that.capthcaHash);\n      }, 1000);\n\n      that.captchaTime.lock = true;\n    }\n  },\n  computed: {\n    // 是否有验证码\n    isCaptcha() {\n      return this.hash && this.content;\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.captcha-view {\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  justify-items: center;\n  align-items: center;\n  margin: 0 5px;\n\n  .captcha-view-icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    top: 0;\n    height: 100%;\n    width: 100%;\n  }\n\n  .disable {\n    filter: blur(2px);\n    transition: all .24s;\n    opacity: .4;\n  }\n\n  .count {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: all 1s;\n    font-size: 10px;\n    transform: scale(.7);\n    color: #000;\n    padding: 0 2px;\n    border: 1px solid #000;\n    background-color: #fff;\n    border-radius: 5px;\n    position: absolute;\n    top: 2px;\n    right: 2px;\n  }\n\n  .tip {\n    font-size: 12px;\n    margin: 0 5px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Captcha.vue?vue&type=template&id=04e5879f&\"\nimport script from \"./Captcha.vue?vue&type=script&lang=js&\"\nexport * from \"./Captcha.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Captcha.vue?vue&type=style&index=0&id=04e5879f&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}