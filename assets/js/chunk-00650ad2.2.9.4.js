(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00650ad2"],{"02bc":function(t,e,r){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[t._v(" "+t._s(t.$t("basic.tip.notContent"))+" ")])},i=[],n={name:"Empty"},o=n,s=r("2877"),d=Object(s["a"])(o,a,i,!1,null,"52e29e5e",null);e["a"]=d.exports},"0366":function(t,e,r){var a=r("4625"),i=r("59ed"),n=r("40d5"),o=a(a.bind);t.exports=function(t,e){return i(t),void 0===e?t:n?o(t,e):function(){return t.apply(e,arguments)}}},"182d":function(t,e,r){var a=r("f8cd"),i=RangeError;t.exports=function(t,e){var r=a(t);if(r%e)throw i("Wrong offset");return r}},"19aa":function(t,e,r){var a=r("3a9b"),i=TypeError;t.exports=function(t,e){if(a(e,t))return t;throw i("Incorrect invocation")}},"1d02":function(t,e,r){"use strict";var a=r("ebb5"),i=r("a258").findLastIndex,n=a.aTypedArray,o=a.exportTypedArrayMethod;o("findLastIndex",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"3c5d":function(t,e,r){"use strict";var a=r("da84"),i=r("c65b"),n=r("ebb5"),o=r("07fa"),s=r("182d"),d=r("7b0b"),c=r("d039"),l=a.RangeError,u=a.Int8Array,p=u&&u.prototype,h=p&&p.set,f=n.aTypedArray,y=n.exportTypedArrayMethod,m=!c((function(){var t=new Uint8ClampedArray(2);return i(h,t,{length:1,0:3},1),3!==t[1]})),v=m&&n.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new u(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));y("set",(function(t){f(this);var e=s(arguments.length>1?arguments[1]:void 0,1),r=d(t);if(m)return i(h,this,r,e);var a=this.length,n=o(r),c=0;if(n+e>a)throw l("Wrong length");while(c<n)this[e+c]=r[c++]}),!m||v)},4625:function(t,e,r){var a=r("c6b6"),i=r("e330");t.exports=function(t){if("Function"===a(t))return i(t)}},"4b11":function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},5172:function(t,e,r){},"5d71":function(t,e,r){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[e("quill-editor",{ref:"myTextEditor",staticClass:"editor",style:"height:"+t.height,attrs:{content:t.editorContent,options:t.editorOption,disabled:t.disabled,maxlength:t.maxlength,useCustomImageHandler:""},on:{change:t.onEditorChange,blur:t.onEditorBlur,ready:t.onEditorReady}}),t.maxlength?e("p",{staticStyle:{"text-align":"right","padding-right":"10px"}},[t._v(" "+t._s(t.editorContent.length||0)+"/"+t._s(t.maxlength))]):t._e(),e("Modal",{attrs:{width:"60%"},model:{value:t.updataPlane,callback:function(e){t.updataPlane=e},expression:"updataPlane"}},[e("br"),-5!=t.currentindex?e("Steps",{attrs:{current:t.currentindex}},[0==t.currentType?[e("Step",{attrs:{title:t.$t("textarea.steps.url.0")}}),e("Step",{attrs:{title:t.$t("textarea.steps.url.1")}})]:1==t.currentType?[e("Step",{attrs:{title:t.$t("textarea.steps.upload.0")}}),e("Step",{attrs:{title:t.$t("textarea.steps.upload.1")}}),e("Step",{attrs:{title:t.$t("textarea.steps.upload.2")}})]:2==t.currentType?[e("Step",{attrs:{title:t.$t("textarea.steps.upload.0")}}),e("Step",{attrs:{title:t.$t("textarea.steps.upload.1")}})]:t._e()],2):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.currentindex,expression:"currentindex == 0"}]},[e("Select",{staticStyle:{margin:"40px 0 0 0"},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},[e("Option",{attrs:{value:"0"}},[t._v(t._s(t.$t("textarea.type.url")))]),e("Option",{attrs:{value:"1"}},[t._v(t._s(t.$t("textarea.type.upload")))]),e("Option",{attrs:{value:"2"}},[t._v(t._s(t.$t("textarea.type.media")))])],1),"0"==t.currentType?[e("div",{staticClass:"see-mode"},[e("Input",{attrs:{placeholder:"http(s)://"},model:{value:t.insertValue,callback:function(e){t.insertValue=e},expression:"insertValue"}})],1)]:t._e(),"1"==t.currentType?[e("Upload",{staticClass:"upload-mode",attrs:{action:"",accept:"image/*",multiple:"",type:"drag",headers:t.headers,data:t.extraData,"max-size":t.imgMaxSize,"with-credentials":t.withCredentials,"show-upload-list":t.showUploadList,"before-upload":t.handleBeforeSelectFile}},[e("div",{staticClass:"upload-mode-content"},[e("Icon",{attrs:{type:"ios-cloud-upload",size:"52"}})],1)]),e("Alert",{attrs:{type:"warning"}},[t._v(" "+t._s(t.$t("report.info.uploadPic2"))+" "),e("a",{attrs:{target:"_blank",href:"https://sm.ms"}},[t._v("https://sm.ms")]),t._v("，"+t._s(t.$t("report.info.uploadPic3"))+" ")]),e("span",{staticClass:"hint"},[t._v(t._s(t.$t("report.info.uploadPic1")))]),e("span",{staticClass:"hint"},[t._v(t._s(t.$t("report.info.uploadPic4")))])]:t._e(),"2"==t.currentType?[e("div",{staticClass:"media-card"},[t.media.data.length>0?[e("Form",{attrs:{"label-position":"top"}},t._l(t.media.data,(function(r,a){return e("Card",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{"dis-hover":""}},[e("Row",{attrs:{gutter:30}},[e("Col",{attrs:{flex:"1"}},[e("Row",[e("Col",{attrs:{span:"12"}},[t._v(" "+t._s(r.filename)+" ")]),e("Col",{attrs:{span:"6"}},[t._v(" "+t._s(r.size)+" ")]),e("Col",{attrs:{span:"6"}},[e("Time",{attrs:{time:r.createTime}})],1)],1)],1),e("Col",[e("Button",{attrs:{href:"javascript:void(0)",loading:r.load},on:{click:function(e){return t.selectMediaFile(a)}}},[t._v(" "+t._s(t.$t("basic.button.insert"))+" ")])],1)],1)],1)})),1)]:e("Empty"),e("Spin",{directives:[{name:"show",rawName:"v-show",value:t.media.load,expression:"media.load"}],attrs:{size:"large",fix:""}})],2)]:t._e()],2),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentindex,expression:"currentindex == 1"}]},[t.currentFileType.indexOf("image")>=0?[t.ignore?e("div",{staticClass:"see-mode"},[e("img",{attrs:{src:t.vueCropper.img}})]):e("vue-Cropper",{ref:"cropper",staticClass:"cropper-mode",attrs:{centerBox:!0,mode:"cover",img:t.vueCropper.img,outputSize:t.vueCropper.size,outputType:t.vueCropper.outputType,autoCrop:t.vueCropper.autoCrop}})]:e("div",[e("div",{staticClass:"see-mode"},[t._v(" 不支持编辑 ")])])],2),2==t.currentindex?e("div",[t.currentFileType.indexOf("image")>=0?e("div",{staticClass:"see-mode"},[e("img",{attrs:{src:t.insertValue,height:"100%"}})]):e("div",{staticClass:"see-mode"},[e("div",[t._v(t._s(t.currentFileType))]),e("p",[e("a",{attrs:{href:t.insertValue,target:"_blank"}},[t._v(t._s(t.insertValue))])])])]):t._e(),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Row",{attrs:{gutter:20,type:"flex",align:"middle"}},[e("Col",[e("Button",{on:{click:function(e){t.updataPlane=!1}}},[t._v(t._s(t.$t("basic.button.cancel")))])],1),0==t.currentindex?[e("Col",{attrs:{flex:"1"}},[0==t.currentType?e("Button",{attrs:{type:"primary",disabled:!t.insertValue},on:{click:function(e){t.currentindex=2,t.currentFileType="image"}}},[t._v(t._s(t.$t("basic.button.next"))+" ")]):t._e()],1)]:t._e(),1==t.currentindex?[e("Col",{attrs:{flex:"1"}},[e("Checkbox",{model:{value:t.ignore,callback:function(e){t.ignore=e},expression:"ignore"}},[t._v(t._s(t.$t("textarea.originalImage")))])],1),e("Col",[e("Button",{on:{click:function(e){t.currentindex-=1}}},[t._v(t._s(t.$t("basic.button.prev")))]),e("Button",{attrs:{type:"primary",loading:t.updataIcon,disabled:t.updataIcon},on:{click:t.onBeforeUpload}},[t._v(t._s(t.$t("basic.button.next"))+" ")])],1)]:2==t.currentindex||-5==t.currentindex?e("Col",{attrs:{flex:"1"}},[e("Button",{on:{click:function(e){t.currentindex=0}}},[t._v(t._s(t.$t("basic.button.reset")))]),e("Button",{attrs:{type:"primary",loading:t.insertLoad,disabled:!t.insertValue},on:{click:t.onInsert}},[t._v(t._s(t.$t("basic.button.commit"))+" ")])],1):t._e()],2)],1)],1)],1)},i=[],n=(r("14d9"),r("b7ef"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("e4b4")),o=(r("9339"),r("953d")),s=r("7e79");HTMLElement.prototype.prevListAll=HTMLElement.prototype.prevListAll||function(){for(var t=this.parentElement,e=t.children,r=[],a=0;a<e.length;a++){var i=e[a];if(i==this)break;r.push(i)}return r};var d=r("02bc"),c=(r("5172"),{props:{index:null,maxlength:{type:Number,default:0},height:{type:String,default:"200px"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},content:{type:String,default:""},toolbar:null},components:{Empty:d["a"],quillEditor:o["quillEditor"],VueCropper:s["VueCropper"]},watch:{currentType:{handler(t,e){2==t&&this.getMediaList()},deep:!0}},data(){return{currentindex:0,currentFileType:"",currentType:"0",insertValue:"",updataIcon:!1,headers:{"x-csrf-token":""},imgMaxSize:2014,vodMaxSize:30720,extraData:{token:""},withCredentials:!1,showUploadList:!1,vueCropper:{img:"",size:.6,outputType:"jpg",autoCrop:!0},updataPlane:!1,insertLoad:!1,ignore:!1,editorContent:"",editorOption:{placeholder:this.placeholder,modules:{clipboard:{matchers:[[Node.ELEMENT_NODE,this.handlePaste]]},toolbar:{container:this.toolbar||[[{list:"ordered"},{list:"bullet"}],["bold"],["link","image"]],handlers:{image:()=>{this.updataPlane=!0,this.currentindex=0,this.currentFileType="",this.updataIcon=!1}}}}},media:{load:!1,detail:{},data:[],limit:40,skip:1}}},created(){this.http=n["d"].call(this),this.content&&(this.editorContent=this.content)},methods:{handlePaste(t,e){let r=[];return e.ops.forEach(t=>{t.attributes&&"string"===typeof t.attributes.link?r.push({insert:t.attributes.link}):t.insert&&"string"===typeof t.insert&&r.push({insert:t.insert})}),e.ops=r,e},updateContent(t){(!t||!this.maxlength||t.length<this.maxlength)&&(this.editorContent=t)},async onInsert(){try{var t;const e=this.quill,r=e.getSelection(!0);if(this.insertLoad=!0,0==await n["i"].authImage(this.insertValue))return this.$Message.error("Image unavailable :("),void(this.insertLoad=!1);e.insertEmbed(r.index,null!==(t="image")&&void 0!==t?t:this.currentFileType,this.insertValue),this.updataPlane=!1,this.insertLoad=!1,e.setSelection(r.index+1)}catch(e){console.log(e),this.$Message.error(e),this.updataIcon=!1,this.insertLoad=!1}},async onBeforeUpload(){const t=this;let e;this.ignore?(e=await t.dataURLtoFile(this.vueCropper.img,this.filename()),await t.onAfterUpload(e)):this.$refs.cropper.getCropBlob(async r=>{r.lastModifiedDate=new Date,r.name=this.filename(),this.updataIcon=!0,e=new File([r],t.currentFileType,{type:r.type}),await t.onAfterUpload(e)})},async onAfterUpload(t){const e=this;this.updataIcon=!0,await n["l"].on(t).then(t=>{t&&t.code>=1&&(this.currentindex+=1,this.insertValue=t.url)}).catch(t=>{e.currentindex=0,e.$Message.error(t.message)}).finally(()=>{e.updataIcon=!1})},async handleBeforeSelectFile(t){const e=this;let r=new FileReader;return r.readAsDataURL(t),this.currentFileType=t.type,r.addEventListener("loadend",(function(){e.vueCropper.img=r.result,e.currentindex+=1})),!1},onEditorReady(){},onEditorChange(t){const e=this.maxlength;(t.html&&e?t.html.length<e:!this.disabled)&&(this.editorContent=t.html)},onEditorBlur(t){const e=this.maxlength;(t.html&&e?t.html.length<e:!this.disabled)&&this.$emit("input",this.editorContent)},async dataURLtoFile(t,e){var r=t.split(","),a=r[0].match(/:(.*?);/)[1],i=atob(r[1]),n=i.length,o=new Uint8Array(n);while(n--)o[n]=i.charCodeAt(n);return new File([o],e,{type:a})},filename(){return`${(new Date).getTime()}${Math.floor(Math.random()*(new Date).getTime())}`},getMediaList(){this.http.get(n["b"]["service_myFiles"],{params:{limit:this.media.limit,skip:this.media.skip-1}}).then(t=>{const e=t.data;1===e.success&&(this.media.data=e.data)})},async queryMediaDetail(t){this.media.load=!0;let e=await n["c"].get(n["b"]["service_file"],{params:{filename:t,explain:!0}});return this.currentFileType=e.data.data.mimeType,this.media.load=!1,e},async selectMediaFile(t){if(this.media.data[t].load)return;this.media.data[t].load=!0;let e=await this.queryMediaDetail(this.media.data[t].filename);if(1==e.data.success)return this.insertValue=e.data.data.downloadURL,this.currentindex=2,void(this.media.data[t].load=!1);this.media.data[t].load=!1,this.currentindex=0,this.$Message.error(e.data.code)}},computed:{editor(){return this.$refs.myTextEditor.quill}},mounted(){this.quill=this.editor}}),l=c,u=(r("e2e3"),r("2877")),p=Object(u["a"])(l,a,i,!1,null,null,null);e["a"]=p.exports},"907a":function(t,e,r){"use strict";var a=r("ebb5"),i=r("07fa"),n=r("5926"),o=a.aTypedArray,s=a.exportTypedArrayMethod;s("at",(function(t){var e=o(this),r=i(e),a=n(t),s=a>=0?a:r+a;return s<0||s>=r?void 0:e[s]}))},"986a":function(t,e,r){"use strict";var a=r("ebb5"),i=r("a258").findLast,n=a.aTypedArray,o=a.exportTypedArrayMethod;o("findLast",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},a258:function(t,e,r){var a=r("0366"),i=r("44ad"),n=r("7b0b"),o=r("07fa"),s=function(t){var e=1==t;return function(r,s,d){var c,l,u=n(r),p=i(u),h=a(s,d),f=o(p);while(f-- >0)if(c=p[f],l=h(c,f,u),l)switch(t){case 0:return c;case 1:return f}return e?-1:void 0}};t.exports={findLast:s(0),findLastIndex:s(1)}},b7ef:function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("d066"),o=r("5c6c"),s=r("9bf2").f,d=r("1a2d"),c=r("19aa"),l=r("7156"),u=r("e391"),p=r("cf98"),h=r("0d26"),f=r("83ab"),y=r("c430"),m="DOMException",v=n("Error"),_=n(m),E=function(){c(this,g);var t=arguments.length,e=u(t<1?void 0:arguments[0]),r=u(t<2?void 0:arguments[1],"Error"),a=new _(e,r),i=v(e);return i.name=m,s(a,"stack",o(1,h(i.stack,1))),l(a,this,E),a},g=E.prototype=_.prototype,x="stack"in v(m),b="stack"in new _(1,2),T=_&&f&&Object.getOwnPropertyDescriptor(i,m),R=!!T&&!(T.writable&&T.configurable),A=x&&!R&&!b;a({global:!0,constructor:!0,forced:y||A},{DOMException:A?E:_});var C=n(m),I=C.prototype;if(I.constructor!==C)for(var w in y||s(I,"constructor",o(1,C)),p)if(d(p,w)){var S=p[w],O=S.s;d(C,O)||s(C,O,o(6,S.c))}},cf98:function(t,e){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e163:function(t,e,r){var a=r("1a2d"),i=r("1626"),n=r("7b0b"),o=r("f772"),s=r("e177"),d=o("IE_PROTO"),c=Object,l=c.prototype;t.exports=s?c.getPrototypeOf:function(t){var e=n(t);if(a(e,d))return e[d];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof c?l:null}},e177:function(t,e,r){var a=r("d039");t.exports=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e2e3:function(t,e,r){"use strict";r("f894")},ebb5:function(t,e,r){"use strict";var a,i,n,o=r("4b11"),s=r("83ab"),d=r("da84"),c=r("1626"),l=r("861d"),u=r("1a2d"),p=r("f5df"),h=r("0d51"),f=r("9112"),y=r("cb2d"),m=r("9bf2").f,v=r("3a9b"),_=r("e163"),E=r("d2bb"),g=r("b622"),x=r("90e3"),b=r("69f3"),T=b.enforce,R=b.get,A=d.Int8Array,C=A&&A.prototype,I=d.Uint8ClampedArray,w=I&&I.prototype,S=A&&_(A),O=C&&_(C),M=Object.prototype,D=d.TypeError,L=g("toStringTag"),N=x("TYPED_ARRAY_TAG"),U="TypedArrayConstructor",F=o&&!!E&&"Opera"!==p(d.opera),k=!1,$={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},P=function(t){if(!l(t))return!1;var e=p(t);return"DataView"===e||u($,e)||u(V,e)},B=function(t){var e=_(t);if(l(e)){var r=R(e);return r&&u(r,U)?r[U]:B(e)}},z=function(t){if(!l(t))return!1;var e=p(t);return u($,e)||u(V,e)},Y=function(t){if(z(t))return t;throw D("Target is not a typed array")},q=function(t){if(c(t)&&(!E||v(S,t)))return t;throw D(h(t)+" is not a typed array constructor")},H=function(t,e,r,a){if(s){if(r)for(var i in $){var n=d[i];if(n&&u(n.prototype,t))try{delete n.prototype[t]}catch(o){try{n.prototype[t]=e}catch(c){}}}O[t]&&!r||y(O,t,r?e:F&&C[t]||e,a)}},W=function(t,e,r){var a,i;if(s){if(E){if(r)for(a in $)if(i=d[a],i&&u(i,t))try{delete i[t]}catch(n){}if(S[t]&&!r)return;try{return y(S,t,r?e:F&&S[t]||e)}catch(n){}}for(a in $)i=d[a],!i||i[t]&&!r||y(i,t,e)}};for(a in $)i=d[a],n=i&&i.prototype,n?T(n)[U]=i:F=!1;for(a in V)i=d[a],n=i&&i.prototype,n&&(T(n)[U]=i);if((!F||!c(S)||S===Function.prototype)&&(S=function(){throw D("Incorrect invocation")},F))for(a in $)d[a]&&E(d[a],S);if((!F||!O||O===M)&&(O=S.prototype,F))for(a in $)d[a]&&E(d[a].prototype,O);if(F&&_(w)!==O&&E(w,O),s&&!u(O,L))for(a in k=!0,m(O,L,{get:function(){return l(this)?this[N]:void 0}}),$)d[a]&&f(d[a],N,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:k&&N,aTypedArray:Y,aTypedArrayConstructor:q,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:W,getTypedArrayConstructor:B,isView:P,isTypedArray:z,TypedArray:S,TypedArrayPrototype:O}},f894:function(t,e,r){},f8cd:function(t,e,r){var a=r("5926"),i=RangeError;t.exports=function(t){var e=a(t);if(e<0)throw i("The argument can't be less than 0");return e}}}]);
//# sourceMappingURL=chunk-00650ad2.2.9.4.js.map