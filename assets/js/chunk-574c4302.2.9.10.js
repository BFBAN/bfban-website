(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-574c4302"],{"4a33":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"container"},[e("div",{staticClass:"content"},[e("div",{attrs:{"dis-hover":"",padding:0}},[e("Row",{attrs:{gutter:0,type:"flex",justify:"center"}},[e("Col",{staticStyle:{width:"500px"}},[e("br"),e("Row",[e("Col",{attrs:{xs:{push:1},lg:{push:0}}},[e("Breadcrumb",[e("BreadcrumbItem",{attrs:{to:{name:"home"}}},[t._v(t._s(t.$t("header.index")))]),e("BreadcrumbItem",[t._v(t._s(t.$t("signin.title")))])],1)],1)],1),e("br"),t.isLogin?t._e():e("Card",{staticClass:"signin-box",attrs:{padding:t.isMobile?20:50,"dis-hover":""}},[e("Form",{ref:"signin",attrs:{model:t.signin,rules:t.ruleValidate,"label-position":"top"}},[t.serverReturnMessage?e("Alert",{attrs:{type:"error","show-icon":""}},[e("b",[t._v(t._s(t.$t("signin.failed"))+" :")]),t._v(" "+t._s(t.serverReturnMessage)+" ")]):t._e(),e("FormItem",{attrs:{label:t.$t("signin.form.username"),prop:"username"}},[e("Input",{attrs:{prefix:"ios-contact",type:"text",size:"large",placeholder:t.$t("signin.form.username")},model:{value:t.signin.username,callback:function(e){t.$set(t.signin,"username",e)},expression:"signin.username"}})],1),e("FormItem",{attrs:{label:t.$t("signin.form.password"),prop:"password"}},[e("Input",{attrs:{type:"password",password:"",size:"large",placeholder:t.$t("signin.form.password")},model:{value:t.signin.password,callback:function(e){t.$set(t.signin,"password",e)},expression:"signin.password"}})],1),e("Row",{attrs:{gutter:30,type:"flex",justify:"space-between",align:"middle"}},[e("Col",{attrs:{span:t.isMobile?24:15}},[e("FormItem",{attrs:{label:t.$t("captcha.title"),prop:"captcha"}},[e("Input",{attrs:{type:"text",size:"large",maxlength:"4",placeholder:t.$t("captcha.title")},model:{value:t.signin.captcha,callback:function(e){t.$set(t.signin,"captcha",e)},expression:"signin.captcha"}},[e("div",{staticClass:"captcha-input-append",attrs:{slot:"append",alt:t.$t("captcha.get")},slot:"append"},[e("Captcha",{ref:"captcha",attrs:{seconds:15,disable:!(t.signin.password&&t.signin.username)}})],1)])],1)],1)],1),e("br"),e("FormItem",[e("Button",{attrs:{long:"",loading:t.spinShow,size:"large",type:"primary"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSignin.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("basic.button.submit"))+" ")])],1),t.spinShow?e("spin",{attrs:{fix:""}},[e("Icon",{attrs:{type:"md-refresh spin-icon-load",size:"30"}})],1):t._e()],1),e("Divider",{style:`margin:40px -${t.isMobile?20:50}px;width:calc(100% + ${t.isMobile?40:100}px)`,attrs:{dashed:""}}),e("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("Col",[e("router-link",{attrs:{to:{name:"signup"}}},[e("Icon",{attrs:{type:"md-mail"}}),t._v(" "+t._s(t.$t("signin.form.submitHint"))+" ")],1)],1),e("Divider",{attrs:{type:"vertical"}}),e("Col",[e("router-link",{attrs:{to:{name:"forgetPassword"}}},[t._v(t._s(t.$t("signin.form.forgetPasswordHint")))])],1),e("Divider",{attrs:{type:"vertical"}}),e("Col",[e("a",{attrs:{href:"http://kook.top/wHwxhw"}},[t._v(t._s(t.$t("signin.form.Feedback")))])])],1)],1),t.isLogin?e("Card",{attrs:{shadow:"",align:"center",padding:t.isMobile?20:50}},[e("Avatar",{attrs:{icon:"ios-person",size:"100",src:t.currentUser.userinfo.userAvatar}}),e("h1",[e("router-link",{attrs:{to:{name:"profile",params:{pagename:"information"}}}},[t._v(" "+t._s(t.currentUser.userinfo.username)+" ")])],1),e("p",[t._v(" "+t._s(t.$t("signin.loggedIn"))+" ")])],1):t._e()],1)],1)],1)])])},r=[],i=(s("14d9"),s("ad43")),n=s("e4b4"),o=s("e7f8"),c=s("2f62"),p=s("2ef0"),l=s.n(p);const{mapActions:u,mapMutations:d}=c["a"];var g=new i["a"]({components:{Captcha:o["a"]},data(){return{ruleValidate:{username:[{required:!0,min:4,max:40,trigger:"blur"},{validator(t,e,s){return 0==n["i"].check("username",e).code||0==n["i"].check("email",e).code},message:this.$t("signup.placeholder.username"),trigger:"change"}],password:[{required:!0,trigger:"blur"}],captcha:[{required:!0,len:4,trigger:"blur"}]},serverReturnMessage:"",signin:{username:"",password:"",captcha:""},spinShow:!1}},beforeMount(){this.$route.query.backPath&&this.$Message.info(this.$t("signin.loginFirst"))},methods:{...u({signinUser:"signin"}),...d(["SIGNIN"]),handleSignin:function(){const t=this,e=this.$route.query.backPath,{username:s,password:a,captcha:r}=l.a.each(this.signin,(t,e,s)=>{s[e]=t.trim()});this.$refs["signin"].validate(i=>{i?(this.spinShow=!0,n["c"].post(n["b"]["account_signin"],{data:{data:{username:s,password:a},encryptCaptcha:this.$refs.captcha.hash,captcha:r}}).then(async s=>{const a=s.data;if(1===a.error)return t.signin.password="",t.signin.captcha="",t.serverReturnMessage=this.$t(`basic.tip['${a.code}']`,{message:a.message||""}),void this.$Message.error(t.serverReturnMessage);await t.signinUser(a.data),e?await this.$router.push({path:e}):this.$router.go("-1"),this.$Message.success(this.$t(`basic.tip['${a.code}']`,{message:a.message||""}))}).finally(e=>{t.spinShow=!1,t.$refs.captcha&&t.$refs.captcha.refreshCaptcha()})):this.$Message.error(this.$t("signin.fillEverything"))})}},computed:{currentUser(){return this.$store.state.user||{token:""}}}}),h=g,m=(s("dbdb"),s("2877")),f=Object(m["a"])(h,a,r,!1,null,"a507b24e",null);e["default"]=f.exports},5700:function(t,e,s){},dbdb:function(t,e,s){"use strict";s("5700")}}]);
//# sourceMappingURL=chunk-574c4302.2.9.10.js.map